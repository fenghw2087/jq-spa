!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="5u1x")}({"/1Qr":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatPrice=e.imgViewer=e.editerDefault=e.yearList=e.pageTail=e.labelStatusList=e.imgPath=e.requestServer=e.confirmModal=e.floatModal=e.emitter=void 0;var i=c(n("1uvi")),a=c(n("cKoO")),r=c(n("pT4b")),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("aDY6")),s=c(n("vzCy"));function c(t){return t&&t.__esModule?t:{default:t}}e.emitter=new s.default,e.floatModal=new i.default({noInput:!0}),e.confirmModal=new a.default({}),e.requestServer="",e.imgPath="",e.labelStatusList=[{name:"不限",id:-1,value:"all"},{name:"启用",id:1,value:"enable"},{name:"停用",id:0,value:"disable"}],e.pageTail=".html";var d=(new Date).getFullYear()+10;e.yearList=new Array(15).fill(1).map(function(t,e){return{name:d-e+"年",year:d-e}}),e.editerDefault="<p>请在此编辑商品详情</p>",e.imgViewer=new r.default,e.formatPrice=function(t){return isNaN(t)?"":o.toFixed(t,2)}},"/Ejp":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">标签管理</div>\n        <div class="c-i-c" style="width: 400px;margin-left: 20px">\n            <div class="c-i-t">标签名称：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" placeholder="请输入标签名称" />\n            </div>\n        </div>\n        <div class="c-i-c" style="width: 200px;margin-left: 20px">\n            <div class="c-i-t">标签状态：</div>\n            <div class="c-i-d status-select">\n            </div>\n        </div>\n        <div class="flex1"></div>\n        <button class="btn btn-ys-default add-tag"><i class="fa fa-plus-circle"></i>添加标签</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer label-table"></div>\n</div>\n</div>'}},"/W9z":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){if(e<1||e>12)throw new Error("getMonthLength param month must between 1-12");return new Date(t+"/"+e+"/1").getDay()}},"/krT":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("iu2K");var a,r=n("hPQL"),o=(a=r)&&a.__esModule?a:{default:a};var s=function(){function t(e){var n=e.obj,i=void 0===n?{}:n,a=e.placeholder,r=void 0===a?"请选择":a,o=e.list,s=void 0===o?[]:o,d=e.renderLi,l=e.renderSecLi,u=e.activeIndex,f=void 0===u?-1:u,h=e.activeSecIndex,p=void 0===h?-1:h,m=e.beforeClick,v=void 0===m?function(){}:m,g=e.onSelectChange,y=void 0===g?function(){}:g,b=e.hasReset,w=void 0!==b&&b,_=e.hasChildren,x=void 0!==_&&_,k=e.menuStyle,P=void 0===k?"max-height:300px;overflow-y:auto":k,D=e.dropup,C=e.disabled,j=e.autoShow,O=e.btnStyle,T=void 0===O?"":O,S=e.hasSearch;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c.call(this),this.obj=i,this.placeholder=r,this.list=s,this.renderLi=d,this.renderSecLi=l,this.activeIndex=f,this.activeSecIndex=p,this.onSelectChange=y,this.hasReset=w?1:0,this.hasChildren=!!x,this.beforeClick=v,this.menuStyle=P,this.dropup=D,this.disabled=C,this.autoShow=j,this.btnStyle=T,this.hasSearch=S,!(i instanceof $)||i instanceof $&&1!==i.length)throw new Error("Dropdown param obj must be an one length jqueryDom");if("function"!=typeof this.onSelectChange)throw new Error("Dropdown param onSelectChange must be a function");if(this.renderLi&&"function"!=typeof this.renderLi)throw new Error("Dropdown param renderLi must be a function");if(this.renderSecLi&&"function"!=typeof this.renderSecLi)throw new Error("Dropdown param renderSecLi must be a function");if("function"!=typeof this.beforeClick)throw new Error("Dropdown param beforeClick must be a function");this.current=this.list[this.activeIndex],this.valueC=null,this.listC=null,this.btn=null,this.itemDetail=[],this.isOpen=!1,this._init()}return i(t,[{key:"setData",value:function(t,e){return e||0===e?(this.activeIndex=t,this.activeSecIndex=e,this.current=this.list[t].children[e],void this.valueC.text(this.renderSecLi?this.renderSecLi(this.current,this.activeIndex,this.activeSecIndex):this.current).addClass("active")):t<this.hasReset||void 0===this.list[t]?this.reset():(this.activeIndex=t,this.current=this.list[this.activeIndex],this.valueC.text(this.renderLi?this.renderLi(this.current,this.activeIndex):this.current).addClass("active"),this)}},{key:"renderList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list;return this.list=t,this.listC.html(this._renderListHtml()),this}},{key:"setDisabled",value:function(t){return this.btn.attr("disabled",!!t),this}},{key:"setValue",value:function(t){return""===t||null===t||void 0===t?this:(this.valueC.text(t).addClass("active"),this)}},{key:"_renderChildren",value:function(t,e){var n=this;return t&&t.length?'<i class="fa fa-caret-right"></i>\n            <div class="ys-dropdown-sec-div"><ul class="ys-dropdown-sec-menu">'+t.map(function(t,i){return'<li class="ys-sec-li">'+(n.renderSecLi?n.renderSecLi(t,e,i):t)+"</li>"}).join("")+"</ul></div>":""}},{key:"_init",value:function(){this._renderHtml()}}]),t}(),c=function(){var t=this;this.toggleDrop=function(e){if("open"===e){if(t.isOpen)return;t.outer.addClass("ys-open")}else if("close"===e){if(!t.isOpen)return;t.outer.removeClass("ys-open")}else t.outer.toggleClass("ys-open");t.isOpen=!t.isOpen,t.outer.hasClass("ys-open")?t._openDrop():t._closeDrop()},this.reset=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t.activeIndex=-1,t.current=null,t.valueC.text(t.placeholder).removeClass("active"),e&&t.onSelectChange(t.current,t.activeIndex),t},this.getList=function(){return t.list},this.getData=function(){return{current:t.current,activeIndex:t.activeIndex,activeSecIndex:t.activeSecIndex}},this._openDrop=function(){t.drop.addClass("open-start"),setTimeout(function(){t.drop.addClass("opening"),setTimeout(function(){t.drop.removeClass("open-start").addClass("open-end")},0)},0)},this._closeDrop=function(){t.drop.removeClass("open-end").addClass("open-start"),setTimeout(function(){t.drop.removeClass("opening"),setTimeout(function(){t.drop.removeClass("open-start")},0)},100)},this._itemClick=function(){t.current=t.list[t.activeIndex],t.valueC.text(t.renderLi?t.renderLi(t.current,t.activeIndex):t.current).addClass("active"),t.onSelectChange(t.current,t.activeIndex,t.activeSecIndex),t.hasSearch&&t._resetSearch()},this._searchItem=function(e){var n=!1;[].forEach.call(t.listC.find("li"),function(i,a){var r=t.itemDetail[a].indexOf(e)>-1;r&&(n=!0),$(i).toggle(r)}),t.searchEmpty.toggle(!n)},this._resetSearch=function(){t.autoSearch.reset(),t.listC.find("li").show(),t.searchEmpty.hide()},this._bindEvent=function(){var e=t;t.outer.on("click",".ys-dropdown-btn",function(){e.toggleDrop()}).on("click",".ys-dropdown-li > div",function(){e.toggleDrop("close");var t=$(this).parent().index();if(!e.beforeClick(e.list[t])){if(e.activeIndex=t,e.hasReset&&0===e.activeIndex)return e.reset();e._itemClick()}}).on("click",".ys-sec-li",function(t){t.stopPropagation(),e.toggleDrop("close");var n=$(this).index(),i=$(this).parents("li").index();e.beforeClick(e.list[i].children[n])||(e.activeSecIndex=n,e.activeIndex=i,e.setData(e.activeIndex,e.activeSecIndex),e.onSelectChange(e.current,e.activeIndex,e.activeSecIndex))}).on("click",".fa-times",function(){e._resetSearch()}),t.autoShow&&t.obj.on("mouseenter",function(){e.toggleDrop("open")}).on("mouseleave",function(){e.toggleDrop("close")}),$(document).on("mousedown",function(t){0===$(t.target).closest(".ys-open").length&&e.toggleDrop("close")})},this._renderListHtml=function(){return t.list.map(function(e,n){var i=t.renderLi?t.renderLi(e,n):e;return t.itemDetail.push(i),'<li class="ys-dropdown-li"><div>'+i+"</div>"+(t.hasChildren?t._renderChildren(e.children,n):"")+"</li>"}).join("")},this._renderSearch=function(){return t.hasSearch?'<div class="ys-dropdown-search-outer"><i class="fa fa-search"></i><input pattern="^[\\s]{0,}$" placeholder="输入关键字" type="text" /><i class="fa fa-times"></i></div><div class="ys-dropdown-search-empty">没有匹配选项</div>':""},this._renderHtml=function(){var e=t.activeIndex>=t.hasReset?t.renderLi?t.renderLi(t.current,t.activeIndex):t.current:t.placeholder;t.obj.html('<div class="ys-dropdown-outer'+(t.dropup?" ys-dropdown-dropup":"")+'">\n<button class="btn ys-dropdown-btn" style="'+t.btnStyle+'" '+(t.disabled?"disabled":"")+'>\n<span class="ys-dropdown-value'+(t.activeIndex>=t.hasReset?" active":"")+'">'+e+'</span><i class="fa fa-caret-down"></i>\n</button>\n<div class="ys-dropdown-menu">'+t._renderSearch()+'\n<ul class="ys-dropdown-ul" style="'+t.menuStyle+'">'+t._renderListHtml()+"</ul>\n</div>\n</div>"),t.outer=t.obj.find(".ys-dropdown-outer"),t.drop=t.obj.find(".ys-dropdown-menu"),t.listC=t.obj.find(".ys-dropdown-ul"),t.valueC=t.obj.find(".ys-dropdown-value"),t.btn=t.obj.find(".ys-dropdown-btn"),t.hasSearch&&(t.autoSearch=new o.default({input:t.outer.find("input"),delay:0,fn:function(e){t._searchItem(e)}}),t.searchEmpty=t.outer.find(".ys-dropdown-search-empty")),t._bindEvent()}};e.default=s},"0iPh":function(t,e){t.exports=window.jQuery},"1TWF":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){try{if(void 0===t.forEach)return[]}catch(t){throw new Error("divideArr param arr must be an array")}if(e<1)return[];var n=[[]];return t.forEach(function(t){n[n.length-1].length<e?n[n.length-1].push(t):n.push([t])}),n}},"1WMk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";"string"==typeof t&&t.indexOf("+")>-1&&t.indexOf("T")>-1&&(t=t.substr(0,10));var n=new Date(t);if(!n.getTime())return"";var i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}},"1uvi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("Pmvp");var a=["","float-modal-top","float-modal-right","float-modal-bottom","float-modal-left"],r=function(){function t(e){var n=e.noInput;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.noInput=!!n,this.id="ysFloatModal"+Math.ceil(1e8*Math.random()),this.outer=null,this.confirmFn=function(){},this.errorMsg=null,this.input=null,this._init()}return i(t,[{key:"show",value:function(t){this.errorMsg.hide(),this.outer.find(".float-modal-title").html(t.title||"");var e=t.obj.offset(),n=t.obj[0].clientWidth,i=t.obj[0].clientHeight,r=this.outer.width()+10,o=this.outer.height()+10,s=void 0,c=void 0;switch(t.side-0){case 1:s=e.left+n/2-20,c=e.top-o-10;break;case 2:s=e.left+n+10,c=e.top-o/2+i/2;break;case 3:s=e.left-r+n/2+20,c=e.top+i+10;break;case 4:s=e.left-r-10,c=e.top-o/2+i/2;break;default:s=e.left+n/2-20,c=e.top-o-10}return this.outer.attr("class","float-modal-outer "+a[t.side-0||1]).css("transform","translate("+s+"px,"+c+"px)").fadeIn(200).data("open",!0),this.input.length&&this.input.val(t.data||"").attr("placeholder",t.placeholder||"").focus(),this.confirmFn=t.fn,this}},{key:"hide",value:function(){this.outer.fadeOut(200).data("open",!1)}},{key:"showMsg",value:function(t){this.errorMsg.text(t).show(),this.outer.find("input").val("").focus()}},{key:"_bindEvent",value:function(){var t=this,e=this;this.outer.on("click",".rel-close",function(){e.hide()}).on("click",".rel-confirm",function(){var t=e.outer.find("input").val();e.confirmFn(t)}),$(document).on("mousedown",function(e){1!==$(e.target).closest("#"+t.id).length&&t.hide()})}},{key:"_getHtml",value:function(){return'<div id="'+this.id+'" class="float-modal-outer">\n                    <div class="float-modal-title" style="font-size: 12px;margin: 5px 0">请输入</div>\n                    '+(this.noInput?"":'<input style="width: 100%;font-size: 12px;padding: 0 5px;height: 26px" type="text" class="form-control" placeholder="请输入" />')+'\n                    <div style="text-align: right;margin-top: 5px">\n                        <span class="error-msg text-danger" style="margin-right: 5px;font-size: 12px;display: none"></span>\n                        <button class="btn btn-default rel-close" style="padding: 2px 5px;font-size: 12px">取消</button>\n                        <button class="btn btn-ys rel-confirm" style="padding: 2px 5px;font-size: 12px">确认</button>\n                    </div>\n               </div>'}},{key:"_renderHtml",value:function(){$("#"+this.id).length||($("body").append(this._getHtml()),this.outer=$("#"+this.id),this.errorMsg=this.outer.find(".error-msg"),this.input=this.outer.find("input"),this._bindEvent())}},{key:"_init",value:function(){this._renderHtml()}}]),t}();e.default=r},"1x55":function(t,e){},"3CqZ":function(t,e){},"3NHQ":function(t,e){},"3bWo":function(t,e){t.exports="/images/logo.jpg"},"4RLy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=u(n("CWZd")),r=u(n("0iPh")),o=u(n("qiY8")),s=u(n("THgg")),c=u(n("gntN")),d=n("/1Qr"),l=u(n("rYvR"));function u(t){return t&&t.__esModule?t:{default:t}}var f="chooseProductModal",h=function(t){function e(t){var n=t.title,i=void 0===n?"导入类似商品":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(o._reset=function(){o.modal.find('input[type="text"],input[type="number"]').val(""),o.model.reset(),o.modal.find(".detail-c").hide(),o.modal.find(".confirm-btn").hide()},o.setData=function(t){var e=t.fn;return o.setConfirmFn(e),o._reset(),o},o._checkData=function(){return!0},o._getProduct=function(t){(0,s.default)({url:"product/getBasicByProductNo",type:"post",contentType:"application/json;charset=utf-8",data:t,success:function(t){t.success?(o.modal.find(".result-c").text(""),o.modal.find(".detail-c").show(),o.data=t.data,o.model.setData(t.data),o.modal.find(".confirm-btn").show(),o.modal.find(".img-c").html(o.data.imagePaths[0]?o.data.imagePaths[0].split(",").map(function(t,e){return'<img class="view-img" data-index="'+e+'" src="'+(d.imgPath+t)+'" style="width: 100px;height: 100px;margin-right: 10px" />'}):"")):(o.modal.find(".detail-c").hide(),o.modal.find(".result-c").text("未找到商品信息，请重新查询"))}})},o.title=i,o.id=f,o.confirmFn=r,"function"!=typeof o.confirmFn)throw new Error("AccountModal param confirmFn must be a function");return o.data={},o._init(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:50px;width: 500px;left:50px"})),this.modal=(0,r.default)("#"+this.id),this.model=new o.default({controller:"product"}),this.ac=new l.default({input:this.modal.find('[name="product-no"]'),getData:function(t){return(0,s.default)({url:"product/getProductNoHint",type:"post",contentType:"application/json;charset=utf-8",data:t})},formatList:function(t){return t.data||[]},keyTigger:!1,renderLi:function(t){return t},onSelect:function(e){t._getProduct(e)}})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="flexbox aic" style="margin-bottom: 20px;margin-top: 40px">\n        <div style="width: 5em;text-align: right;margin-right: 20px;color: #999">商品编码</div>\n        <div class="flex1"><input class="form-control" name="product-no" placeholder="输入商品编码" /></div>\n        <button style="margin-left: 20px" class="btn btn-ys-default search-btn"><i class="fa fa-search"></i>查询</button>\n    </div>\n    <div class="result-c" style="text-align: center;color: red"></div>\n    <div class="detail-c" style="margin-top: 20px" ys-controller="product">\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px; text-align: right;color: #999">商品名称</div><div ys-bind="name"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">品牌</div><div ys-bind="brand"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">款式编码</div><div ys-bind="styleCode"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">类目</div><div ys-bind="categoryName"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">规格型号</div><div ys-bind="specification"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">尺码</div><div ys-bind="size"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">年份</div><div ys-bind="productYear"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">季节</div><div ys-bind="season"></div>\n        </div>\n        <div class="flexbox aifs">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">图片</div><div class="img-c"></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)}).on("click",".search-btn",function(){var e=t.modal.find('input[name="product-no"]').val().trim();if(!e)return(0,c.default)({msg:"请输入商品编码后再搜索"});t._getProduct(e)}).on("click",".view-img",function(){var e=t.data.imagePaths[0].split(",");e.length&&d.imgViewer.show(e,(0,r.default)(this).data("index"))})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=h},"4b5O":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">角色管理</div>\n    </div>\n</div>\n<div ys-controller="user" class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="section-header" style="margin-bottom: 10px">账户信息</div>\n    <div class="flexbox">\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">用户名：</div>\n            <div class="c-i-d" ys-bind="username"></div>\n        </div>\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">密码：</div>\n            <div class="c-i-d">******<i style="margin-left: 10px;color: #0d71ff;cursor: pointer" class="fa fa-pencil-square-o changePsd"></i></div>\n        </div>\n    </div>\n    <div class="section-header" style="margin-bottom: 10px;margin-top: 20px">个人信息<span style="color: red;font-size: 12px;margin-left: 20px">注：个人信息如发生变更，请联系管理员进行信息修改</span></div>\n    <div class="flexbox">\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">真实姓名：</div>\n            <div class="c-i-d" ys-bind="name"></div>\n        </div>\n    </div>\n    <div class="flexbox">\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">联系电话：</div>\n            <div class="c-i-d" ys-bind="phone"></div>\n        </div>\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">电子邮箱：</div>\n            <div class="c-i-d" ys-bind="email"></div>\n        </div>\n    </div>\n    <div class="flexbox" style="margin-bottom: 50px">\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">微信：</div>\n            <div class="c-i-d" ys-bind="wechat"></div>\n        </div>\n        <div class="c-i-c" style="width: 300px">\n            <div class="c-i-t" style="width: 7em;text-align: right">QQ：</div>\n            <div class="c-i-d" ys-bind="qq"></div>\n        </div>\n    </div>\n</div>\n</div>'}},"5u1x":function(t,e,n){"use strict";n("ky39");var i=D(n("8RKn")),a=D(n("oD2C")),r=n("joKS"),o=D(n("yaTh")),s=D(n("tt8r")),c=D(n("THgg")),d=D(n("MAbf")),l=D(n("hik8")),u=D(n("EHAM")),f=D(n("aiI0")),h=D(n("wew/")),p=D(n("Wb1w")),m=D(n("ryJ0")),v=D(n("78EZ")),g=D(n("CxtD")),y=D(n("Tht/")),b=D(n("R7JK")),w=D(n("dzqJ")),_=D(n("RMiq")),x=D(n("hjx0")),k=n("/1Qr"),P=D(n("z+yy"));function D(t){return t&&t.__esModule?t:{default:t}}var C="login"===window.localStorage.getItem("islogin")||window.isLogin;new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init=function(){},this._renderHtml=function(){e.outer.html(i.default)},this._bindEvent=function(){var t=e;e.outer.on("click","#currentUserNameC",function(){t.router.replace({page:"userCenter"})})},this._init=function(){C?new window.Promise(function(t){var e=localStorage.getItem("privilege"),n=e?JSON.parse(e):[];e?t(n):(0,c.default)({url:"user/getPrivileges",type:"post",success:function(e){if(e.success){var n=e.data.privilegeCodeSet;localStorage.setItem("privilege",JSON.stringify(n)),t(n)}else t()}})}).then(function(t){P.default.privilege=t,k.emitter.emit("privilege",t),e.routerConfig=e.routerConfig.map(function(e){return e.code&&-1===t.indexOf(e.code)&&(e.reject=!0),e}),e.routerConfig.find(function(t){return!t.reject}).path=window.basePath,e.routerConfig=e.routerConfig.reduce(function(t,e){return e.reject?t.push(e):t.unshift(e),t},[]),e._renderHtml();var n=r.nav.map(function(e){return e.code&&-1===t.indexOf(e.code)&&(e.reject=!0),e});setTimeout(function(){e.pageOuter=$("#pageOuter"),n.find(function(t){return!t.reject}).url=window.basePath,(0,r.renderNav)(n),e.router=new o.default({router:e.routerConfig,outer:e.pageOuter}),new s.default({navs:$(".nav-list-c").find("a"),router:e.router}),e.router.initCurrent(),e._bindEvent()},0)}):(e.outer.html(a.default),setTimeout(function(){(new d.default).init()},0))},this.id="root",this.outer=$("#"+this.id),this.routerConfig=[{name:"product",code:"PRODUCT_QUERY",path:window.basePath+"index"+k.pageTail,page:new l.default},{name:"product-input",path:window.basePath+"product-input"+k.pageTail,page:new u.default,code:"PRODUCT_MANAGE"},{name:"product-info",path:window.basePath+"product-info"+k.pageTail,page:new p.default,parent:"product"},{name:"product-input-basic",path:window.basePath+"product-input-basic"+k.pageTail,page:new x.default,code:"PRODUCT_MANAGE",parent:"product-input"},{name:"product-price",path:window.basePath+"product-price"+k.pageTail,page:new f.default,code:"PRODUCT_MANAGE",parent:"product-input"},{name:"product-detail",path:window.basePath+"product-detail"+k.pageTail,page:new h.default,code:"PRODUCT_MANAGE",parent:"product-input"},{name:"channel",path:window.basePath+"channel"+k.pageTail,page:new m.default,code:"CHANNEL_MANAGE"},{name:"category",path:window.basePath+"category"+k.pageTail,page:new v.default,code:"CATEGORY_MANAGE"},{name:"label",path:window.basePath+"label"+k.pageTail,page:new g.default,code:"LABEL_MANAGE"},{name:"role",path:window.basePath+"users-role"+k.pageTail,page:new y.default,code:"USER_MANAGE"},{name:"users",path:window.basePath+"users-account"+k.pageTail,page:new b.default,code:"USER_MANAGE"},{name:"userCenter",path:window.basePath+"userCenter"+k.pageTail,page:new w.default},{name:"error",path:window.basePath+"error"+k.pageTail,page:new _.default}],this._init()}},"6pZz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="ys-back-btn"></div>\n<div class="content-container" style="padding: 20px">\n    <div class="section-title">价格信息录入</div>\n</div>\n<div class="content-container" style="padding: 20px 20px 50px;margin-top: 15px">\n    <div class="ys-step-o">\n        <div class="step-item current">\n            <div class="step-icon"><span class="step-num">1</span><i class="fa fa-check"></i></div>\n            <div class="step-content">选择商品</div>\n        </div>\n        <div class="step-bar"></div>\n        <div class="step-item">\n            <div class="step-icon"><span class="step-num">2</span><i class="fa fa-check"></i></div>\n            <div class="step-content">录入进货信息</div>\n        </div>\n        <div class="step-bar"></div>\n        <div class="step-item">\n            <div class="step-icon"><span class="step-num">3</span><i class="fa fa-check"></i></div>\n            <div class="step-content">录入销售信息</div>\n        </div>\n    </div>\n    <div class="step-section current">\n        <div class="section-header"><div class="section-title">选择商品</div></div>\n        <div class="step-section-c">\n            <button style="margin-bottom: 10px" class="btn btn-ys-default open-product-modal current-show"><i class="fa fa-mail-forward"></i>选择商品</button>\n            <div class="" ys-controller="basic">\n                <table class="no-body-table basic-table" style="width: 1000px;margin: 20px auto">\n                    <tbody>\n                        <tr>\n                            <th width="100">商品名称</th>\n                            <td width="400" ys-bind="name"></td>\n                            <th width="100">商品编码</th>\n                            <td width="400" ys-bind="productNo"></td>\n                        </tr>\n                        <tr>\n                            <th width="100">品牌</th>\n                            <td width="400" ys-bind="brand"></td>\n                            <th width="100">款式编码</th>\n                            <td width="400" ys-bind="styleCode"></td>\n                        </tr>\n                        <tr>\n                            <th width="100">类目</th>\n                            <td width="400" ys-bind="categoryName"></td>\n                            <th width="100">尺码</th>\n                            <td width="400" ys-bind="size"></td>\n                        </tr>\n                        <tr>\n                            <th width="100">规格型号</th>\n                            <td width="400" ys-bind="specification"></td>\n                            <th width="100">图片</th>\n                            <td width="400"><div class="basic-img-c"></div></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <div class="btn-group1" style="text-align: center">\n                    <button class="btn btn-main to-step2" style="margin-right: 20px">下一步</button><button class="btn btn-ys-default cancel-btn">取消</button>\n                </div>\n            </div>\n        </div>   \n    </div>\n    <div class="step-section">\n        <div class="section-header"><div class="section-title">录入进货信息</div></div> \n        <div class="step-section-c">\n            <button style="margin-bottom: 10px" class="btn btn-ys-default open-channel-modal current-show"><i class="fa fa-mail-forward"></i>选择渠道</button>\n            <div class="channel-c"></div>\n            <div class="btn-group2" style="text-align: center;margin: 20px  auto">\n                <button class="btn btn-main to-step3" style="margin-right: 20px;display: none">下一步</button><button class="btn btn-warning back-step1" style="margin-right: 20px">上一步</button><button class="btn btn-ys-default cancel-btn">取消</button>\n            </div>\n        </div>\n    </div>\n    <div class="step-section">\n        <div class="section-header"><div class="section-title">录入销售信息</div></div>   \n        <div class="step-section-c">\n            <table class="no-body-table sale-table v-m" style="width: 1000px;margin: 20px auto">\n                <tbody>\n                    <tr>\n                        <th width="100"><span class="is-must">建议售价</span></th>\n                        <td width="400"><input type="number" class="form-control" name="suggestPrice" placeholder="请输入商品建议售价" /></td>\n                        <th width="100">审批价格</th>\n                        <td width="400"><input type="number" class="form-control" name="auditPrice" placeholder="请输入商品审批价格" /></td>\n                    </tr>\n                </tbody>\n            </table>\n            <div class="channel-i-c">\n                <div class="flexbox aic channel-header">\n                    <div class="channel-name flex1">分段售价</div>\n                </div>\n                <div class="rank-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n                <table class="no-body-table v-m" style="width: 1000px;margin: 20px 0">\n                    <tbody>\n                        <tr>\n                            <th width="80">分段数量</th>\n                            <td width="350"><input type="number" class="form-control" name="rankAmount" placeholder="请输入本段内一次性购买上限" /></td>\n                            <th width="80">分段售价</th>\n                            <td width="350"><input type="number" class="form-control" name="rankPrice" placeholder="请输入当前分段售卖价格" /></td>\n                            <td width="100"><a class="btn btn-link add-new-rank">添加</a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class="channel-i-c">\n                <div class="flexbox aic channel-header">\n                    <div class="channel-name flex1">折扣售价</div>\n                </div>\n                <div class="discount-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n                <table class="no-body-table v-m" style="width: 1000px;margin: 20px 0">\n                    <tbody>\n                        <tr>\n                            <th width="80">入库日期</th>\n                            <td width="350"><input type="text" class="form-control" name="instoreDate" placeholder="请选择入库日期" /></td>\n                            <th width="80">商品折扣</th>\n                            <td width="350"><input type="number" class="form-control" name="discountRate" placeholder="如：9折请输入0.9" /></td>\n                            <td width="100"><a class="btn btn-link add-discount">添加</a></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class="btn-group3" style="text-align: center;margin: 20px 0">\n                <button class="btn btn-main save-all" style="margin-right: 20px">保存</button><button class="btn btn-warning back-step2" style="margin-right: 20px">上一步</button><button class="btn btn-ys-default cancel-btn">取消</button>\n            </div>\n        </div>\n    </div>\n</div>\n</div>'}},"78EZ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=v(n("uyis")),r=v(n("7D5N")),o=v(n("id4V")),s=v(n("hPQL")),c=v(n("RYhR")),d=v(n("1WMk")),l=v(n("THgg")),u=v(n("gntN")),f=v(n("J0Zk")),h=v(n("eI+r")),p=n("/1Qr"),m=v(n("z+yy"));function v(t){return t&&t.__esModule?t:{default:t}}n("FaX3");var g=10,y=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._getList(1)},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.pagination.getPaginationData().current),"delete"===n&&(e=t.pagination.getPaginationData().current,1===t.currentList.length&&e--,e=e||1),(0,l.default)({url:"category/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:e-1,pageSize:g},searchCategoryName:t.condition.keyword,ts:Date.now()}),success:function(n){n.success&&n.data&&n.data.searchPage?(t.currentList=n.data.searchPage.pageData||[],t._renderList(e,n.data.searchPage.totalRecord)):t._renderEmpty()}})},t._renderList=function(e,n){t.tableC.find("tbody").html(t.currentList.map(function(n,i){return t.condition.keyword&&(n.name=n.name.replace(new RegExp(t.condition.keyword,"g"),'<span style="color: red">'+t.condition.keyword+"</span>")),"<tr>\n    <td>"+((e-1)*g+(i+1))+"</td>\n    "+(0===n.parentCategoryId?'<td style="text-align: left;padding-left: 15px"><div class="category-name pointer" data-index="'+i+'"><i class="fa fa-fw fa-caret-down"></i><i class="fa fa-fw fa-caret-right"></i>'+(0,c.default)(n.name)+"</div></td>":'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(n.name)+"</td>")+'\n    <td style="text-align: left;padding-left: 15px">'+(0,c.default)(n.categoryNo)+'</td>\n    <td style="padding: 0 15px"><img data-index="'+i+'" class="category-icon view-img" src="'+(p.imgPath+n.image)+'" /></td>\n    <td>'+(0,d.default)(n.createTime)+"</td>\n    <td>"+(n.showOnApp?"是":"否")+'</td>\n    <td><a data-index="'+i+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-index="'+i+'" class="btn btn-link delete-btn delete-item"><i class="fa fa-trash-o"></i>删除</a></td>\n</tr>'})),t.pagination.setPageData({current:e,total:n}),t._renderLoading(!1)},t._bindEvent=function(){var e=t;t.pager.on("click",".category-name",function(){var t=$(this);t.toggleClass("active");var n=t.data("index"),i=e.currentList[n];new window.Promise(function(t){i.hasInit?t():(0,l.default)({url:"category/listChildren/"+i.id,data:{ts:Date.now()},success:function(e){e.success&&(i.children=e.data||[],i.hasInit=!0,t())}})}).then(function(){t.hasClass("active")?t.parents("tr").after(i.children.length?i.children.map(function(e,i){var a=t.parents("tr").find("td").eq(0).text();return'<tr data-parent="'+n+'">\n    <td>'+a+'</td>\n    <td style="text-align: left;padding-left: 35px">'+(0,c.default)(e.name)+'</td>\n    <td style="text-align: left;padding-left: 15px">'+(0,c.default)(e.categoryNo)+'</td>\n    <td style="padding: 0 15px"><img data-index="'+n+"-"+i+'" class="category-icon view-img" src="'+(p.imgPath+e.image)+'" /></td>\n    <td>'+(0,d.default)(e.createTime)+"</td>\n    <td>"+(e.showOnApp?"是":"否")+'</td>\n    <td><a data-parent="'+n+'" data-index="'+i+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-parent="'+n+'" data-index="'+i+'" class="btn btn-link delete-btn delete-item"><i class="fa fa-trash-o"></i>删除</a></td>\n</tr>'}):'<tr data-parent="'+n+'"><td colspan="7" style="color: #999">没有二级类目</td></tr>'):t.parents("tr").nextAll('[data-parent="'+n+'"]').remove()})}).on("click",".add-category",function(){e.modal.setData({fn:function(t){var n=t.name,i=t.categoryNo,a=t.parentCategoryId,r=t.image,o=t.showOnApp;e._addOrEdit({name:n,categoryNo:i,parentCategoryId:a,image:r,showOnApp:o})}}).modalShow()}).on("click",".delete-item",function(){var t=this,n=$(this).data("parent"),i=$(this).data("index"),a=void 0!==n?e.currentList[n].children[i]:e.currentList[i];p.floatModal.show({title:"是否删除该类目？",obj:$(this),side:3,fn:function(){e._deleteItem(a,void 0!==n?$(t):"",void 0!==n?e.currentList[n]:"")}})}).on("click",".edit-item",function(){var t=$(this).data("parent"),n=$(this).data("index"),i=void 0!==t?e.currentList[t].children[n]:e.currentList[n];e.modal.setData({fn:function(t){var n=t.name,a=t.categoryNo,r=t.parentCategoryId,o=t.image,s=t.showOnApp;e._addOrEdit({id:i.id,name:n,categoryNo:a,parentCategoryId:r,image:o,showOnApp:s})},data:i,type:"edit"}).modalShow()}).on("click",".view-img",function(){var t=($(this).data("index")+"").split("-"),n=i(t,2),a=n[0],r=n[1],o=[(void 0!==r?e.currentList[a].children[r]:e.currentList[a]).image];o.length&&p.imgViewer.show(o)})},t._addOrEdit=function(e){var n=e.id,i=e.name,a=e.categoryNo,r=e.parentCategoryId,o=e.image,s=e.showOnApp;(0,l.default)({url:"category/"+(n?"modify":"add"),type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({id:n,name:i,categoryNo:a,parentCategoryId:r,image:o,showOnApp:s,ts:Date.now()}),success:function(e){e.success?(t.modal.modalHide(),(0,h.default)({type:"success",title:(n?"编辑":"添加")+"类目成功",msg:"已成功"+(n?"编辑":"添加")+"类目："+i}),t._getList(1,"refresh"),m.default.getCategoryPromise=null):(0,u.default)({msg:e.errorMsg||"类目"+(n?"编辑":"添加")+"失败，请重试！"})}})},t._deleteItem=function(e,n,i){(0,l.default)({url:"category/delete/"+e.id,data:{ts:Date.now()},success:function(a){p.floatModal.hide(),a.success?((0,u.default)({msg:"删除类目成功",type:"success"}),0===e.parentCategoryId?t._getList(1,"delete"):(n.parents("tr").remove(),i.hasInit=!1),m.default.getCategoryPromise=null):(0,u.default)({msg:a.errorMsg||"删除类目失败"})}})},t._initComponent=function(){new s.default({input:t.pager.find(".keyword-c"),fn:function(e){t.condition.keyword=e,t._getList(1,"search")}}),t.tableC=t.pager.find(".category-table"),t.paginationC=t.pager.find(".pagination-c"),t.pagination=new o.default({outer:t.paginationC,current:1,pageSize:g,isJump:!0,loading:!0,onChange:function(e){var n=e.current;t.pagination.toggleLoading(),t._getList(n)}}),t.loadingC=t.pager.find(".loading-c"),t.emptyC=t.pager.find(".empty-c"),t.modal=new f.default({}),t._renderLoading(!0)},t._renderLoading=function(e){t.tableC.toggle(!e),t.paginationC.toggle(!e),t.loadingC.toggle(!!e),t.emptyC.hide()},t._renderEmpty=function(){t.emptyC.show(),t.tableC.toggle(!1),t.paginationC.toggle(!1),t.loadingC.toggle(!1)},t.id="categoryPage",t.docTitle="类目管理",t.html=a.default,t.currentList=[],t.condition={keyword:""},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=y},"7D5N":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init=function(t,n,i,a){e.state=t.state,e.router=n,e.hasInit||(e.outer=a,e.DidMount=e._renderHtml(),e.hasInit=!0),document.title=e.docTitle||"商品库",e.pager&&e.pager.show(),e.DidMount.then(function(){e._init()})},this._renderHtml=function(){return new window.Promise(function(t){e.outer.append(e.html({id:e.id})),setTimeout(function(){e.pager=$("#"+e.id).show(),e._initComponent(),e._bindEvent(),t()},0)})},this.hasInit=!1}},"7Qxa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=c(n("CWZd")),r=c(n("0iPh")),o=c(n("gntN")),s=c(n("o9gJ"));function c(t){return t&&t.__esModule?t:{default:t}}var d="addPriceModal",l=function(t){function e(t){var n=t.title,i=void 0===n?"添加进货记录":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.setData=function(t){var e=t.fn;return s.setConfirmFn(e),s._reset(),s},s._reset=function(){s.modal.find('[name="purchasePrice"]').val(""),s.purchaseDate.reset(),s.instoreDate.reset(),s.data={}},s._checkData=function(){return s.data.purchasePrice=s.modal.find('[name="purchasePrice"]').val(),s.data.purchasePrice<=0?((0,o.default)({msg:"进货价格必须为正数"}),!1):s.data.purchaseDate?!!s.data.instoreDate||((0,o.default)({msg:"请选择入库日期"}),!1):((0,o.default)({msg:"请选择进货日期"}),!1)},s.title=i,s.id=d,s.confirmFn=r,"function"!=typeof s.confirmFn)throw new Error("AccountModal param confirmFn must be a function");return s.data={},s._init(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 400px;left:100px"})),this.modal=(0,r.default)("#"+this.id),this.purchaseDate=new s.default({input:this.modal.find('[name="purchaseDate"]'),onDateChange:function(e){t.data.purchaseDate=e,t.instoreDate.setStartDate(e)}}),this.instoreDate=new s.default({input:this.modal.find('[name="instoreDate"]'),onDateChange:function(e){t.data.instoreDate=e,t.purchaseDate.setEndDate(e)},dropUp:!0})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">采购价格（元）：</div>\n            <div class="modal-c-i-c"><input class="form-control" name="purchasePrice" type="number" placeholder="采购价格" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">进货日期：</div>\n            <div class="modal-c-i-c"><input class="form-control" name="purchaseDate" type="text" placeholder="选择进货日期" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">入库日期：</div>\n            <div class="modal-c-i-c"><input class="form-control" name="instoreDate" type="text" placeholder="选择入库日期" /></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=l},"8RKn":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default='<div class="full-body-c"><div class="header-c flexbox">\n    <div class="flex1 flexbox aic header-logo">\n        <i class="fa fa-home"></i>\n        <div class="logo-text">商品库管理后台</div>\n    </div>\n    <div class="user-c">\n        <div class="user-icon"></div>\n        <div class="user-tool-c">\n            <div class="userNameC" id="currentUserNameC"></div>\n            <a href="/logout" class="logout-btn">退出</a>\n        </div>\n    </div>\n</div>\n<div class="slider-nav-c">\n    <div class="nav-list-c"></div>\n</div>\n<div class="main-content" id="pageOuter">\n    \n</div>\n</div>'},"93UV":function(t,e){},"9vu6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("Q18l");e.default=function(t){return"small"===t?'<svg viewBox="12 12 24 24" class="ys-circular-small"><circle cx="24" cy="24" r="10" fill="none" class="ys-circular-path-small"></circle></svg>':'<svg viewBox="25 25 50 50" class="ys-circular"><circle cx="50" cy="50" r="20" fill="none" class="ys-circular-path"></circle></svg>'}},CWZd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n("0iPh"),o=(i=r)&&i.__esModule?i:{default:i};n("gPJT"),o.default.fn.modal.Constructor.prototype.enforceFocus=function(){};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return a(t,[{key:"modalShow",value:function(){return this.resetMsg(),this.modal.modal("show").find("input[auto-focus]").focus(),this}},{key:"modalHide",value:function(){return this.modal.modal("hide"),this}},{key:"toggleloading",value:function(t){t?this.modal.find(".confirm-loading").show():this.modal.find(".confirm-loading").hide()}},{key:"showFail",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;this.modal.find(".modal-footer-fail").show().find(".msg").text(t),setTimeout(function(){e.modal.find(".modal-footer-fail").hide()},n)}},{key:"resetMsg",value:function(){this.modal.find(".modal-footer-fail").hide(),this.modal.find(".modal-footer.default").show()}},{key:"setTitle",value:function(t){this.modal.find(".modal-title").text(t)}},{key:"setConfirmFn",value:function(t){return"function"==typeof t&&(this.confirmFn=t),this}},{key:"getBasicHtml",value:function(t){var e=t.id,n=t.title,i=t.body,a=void 0===i?"":i,r=t.contentStyle,o=void 0===r?"":r,s=t.footer;return'<div class="modal modal2 fade modal-ys" id="'+e+'" tabindex="-1" role="dialog" aria-labelledby="'+e+'" data-keyboard="false" data-backdrop="static">\n    <div class="modal-dialog modal-md" role="document">\n        <div class="modal-content" style="overflow: visible;'+o+'">\n            <div class="modal-header">\n                <div class="close2" data-dismiss="modal" aria-label="Close">×</div>\n                <h4 class="modal-title">'+n+'</h4>\n            </div>\n            <div class="modal-body" style="min-height: 130px">\n                '+a+"\n            </div>\n            "+(void 0===s?this.getFooterHtml():s)+"\n        </div>\n    </div>\n</div>"}},{key:"getFooterHtml",value:function(){return'<div class="modal-footer default">\n                <div class="modal-footer-fail" style="display: none"><i class="fa fa-exclamation-circle fa-lg" style="color: #d42740;"></i><span class="msg"></span></div>\n                <button class="btn btn-cancel" data-dismiss="modal">取消</button>\n                <button class="btn btn-main confirm-btn" style="margin-left: 10px"><i style="display: none" class="fa fa-spin fa-spinner mr10 confirm-loading"></i>确认</button>\n            </div>'}}]),t}();e.default=s},CxtD:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=g(n("/Ejp")),r=g(n("7D5N")),o=g(n("RfmY")),s=g(n("hPQL")),c=g(n("RYhR")),d=g(n("1WMk")),l=g(n("THgg")),u=g(n("gntN")),f=g(n("/krT")),h=g(n("eI+r")),p=g(n("Z+K2")),m=n("/1Qr"),v=g(n("z+yy"));function g(t){return t&&t.__esModule?t:{default:t}}var y=10,b=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._getList(1)},t._addOrEdit=function(e){var n=e.id,i=e.name,a=e.labelNo,r=e.enable;(0,l.default)({url:"label/"+(n?"modify":"add"),type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({id:n,name:i,labelNo:a,enable:r,ts:Date.now()}),success:function(e){e.success?(t.modal.modalHide(),(0,h.default)({type:"success",title:(n?"编辑":"添加")+"标签成功",msg:"已成功"+(n?"编辑":"添加")+"标签："+i}),t._getList(1,"refresh"),v.default.getLabelPromise=null):(0,u.default)({msg:e.errorMsg||"标签"+(n?"编辑":"添加")+"失败，请重试！"})}})},t._deleteItem=function(e){(0,l.default)({url:"label/delete/"+e.id,data:{ts:Date.now()},success:function(e){m.floatModal.hide(),e.success?((0,u.default)({msg:"删除标签成功",type:"success"}),t._getList(1,"delete"),v.default.getLabelPromise=null):(0,u.default)({msg:e.errorMsg||"删除标签失败"})},error:function(){m.floatModal.hide(),(0,u.default)({msg:"删除标签失败"})}})},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.table.getPagination().current),"delete"===n&&(e=t.table.getPagination().current,1===t.table.getDataSource().length&&e--,e=e||1),"delete"!==n&&(t.condition.activeId=""),(0,l.default)({url:"label/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:e-1,pageSize:y},searchLabelName:t.condition.keyword,enableFilter:t.condition.status,ts:Date.now()}),success:function(i){if(i.success&&i.data&&i.data.searchPage){var a=i.data.searchPage.pageData||[];t.table.setData({dataSource:a.map(function(t,n){return t.index=n+1+e*y-y,t}),pagination:{current:e,total:i.data.searchPage.totalRecord},conditionChange:!!n})}else t.table.setData({dataSource:[]})}})},t._bindEvent=function(){var e=t;t.pager.on("click",".add-tag",function(){e.modal.setData({fn:function(t){e._addOrEdit(t)}}).modalShow()}).on("click",".delete-item",function(){var t=e.table.getRowData($(this).data("index"));m.floatModal.show({title:"是否删除该标签？",obj:$(this),side:3,fn:function(){e._deleteItem(t)}})}).on("click",".edit-item",function(){var t=e.table.getRowData($(this).data("index"));e.modal.setData({type:"edit",data:t,fn:function(n){e._addOrEdit(i({id:t.id},n))}}).modalShow()})},t._initComponent=function(){t.table=new o.default({outer:t.pager.find(".label-table"),headers:[{name:"序号",width:70},{name:"标签名称",width:180},{name:"标签编码",width:150},{name:"创建时间",width:110},{name:"标签状态",width:100},{name:"操作",width:110}],renderTrs:[function(t,e,n){return n.pageSize*(n.current-1)+(e+1)},function(t){return(0,c.default)(t.name)},function(t){return(0,c.default)(t.labelNo)},function(t){return(0,d.default)(t.createTime)},function(t){return'<span style="color: '+(t.enable?"green":"red")+'">'+(t.enable?"启用":"停用")+"</span>"},function(t,e){return'<a data-index="'+e+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-index="'+e+'" class="btn btn-link delete-btn delete-item"><i class="fa fa-trash-o"></i>删除</a>'}],placeholder:"暂无符合条件的标签信息",pagination:{pageSize:y,show:!0,current:1,onChange:function(e){var n=e.current;t._getList(n)},isJump:!0}}),new s.default({input:t.pager.find(".keyword-c"),fn:function(e){t.condition.keyword=e,t._getList(1,"search")}}),t.statusSelect=new f.default({obj:t.pager.find(".status-select"),list:m.labelStatusList,renderLi:function(t){return t.name},onSelectChange:function(e){t.condition.status=e.value,t._getList(1,"search")},activeIndex:0}),t.modal=new p.default({})},t.id="labelPage",t.docTitle="标签管理",t.html=a.default,t.condition={keyword:"",status:m.labelStatusList[0].id},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=b},D3zq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=m(n("CWZd")),o=m(n("0iPh")),s=m(n("gntN")),c=m(n("eUm7")),d=m(n("THgg")),l=m(n("/krT")),u=m(n("WU09")),f=n("/1Qr"),h=n("z+yy"),p=m(h);function m(t){return t&&t.__esModule?t:{default:t}}function v(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var g="accountModal",y=function(t){function e(t){var n=t.title,i=void 0===n?"添加用户":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(o.setData=function(t){var e=t.type,n=void 0===e?"add":e,i=t.fn,a=t.data,r=void 0===a?{}:a;return p.default.getCategoryPromise||(p.default.getCategoryPromise=(0,h.getCategoryDic)()),o.setTitle("add"===n?"新增用户":"编辑用户"),o.setConfirmFn(i),o._reset(),"add"===n||(0,d.default)({url:"admin/user/get/"+r.id,success:function(t){t.success&&(o.data=t.data,o.modal.find('input[name="username"]').val(o.data.username).attr("disabled",!0),o.modal.find('input[name="password"]').val("******"),o.modal.find('input[name="name"]').val(o.data.name),o.modal.find('input[name="phone"]').val(o.data.phone-0),o.modal.find('input[name="qq"]').val(o.data.qq-0),o.modal.find('input[name="email"]').val(o.data.email),o.modal.find('input[name="wechat"]').val(o.data.wechat),o.enableRadio.setChecked(o.data.enable?0:1),o.roleSelect.setValue(o.data.roleName),p.default.roleDicPromise.then(function(t){var e=t.find(function(t){return t.id===o.data.roleId}).privileges.filter(function(t){return t.code.indexOf("_CATEGORY")>-1})[0].code;"ALL_CATEGORY"===e?o.modal.find(".category-c").hide():o.modal.find(".category-c").show(),o.data.categoryType=e,p.default.getCategoryPromise.then(function(t){o.categoryCheckObj=o.data.categoryList.reduce(function(e,n){var i=n.parentCategoryId,a=t.find(function(t){return t.id===i});return e[i]||(e[i]={parent:a,items:[]}),e[i].items.push(n),e},{}),Object.keys(o.categoryCheckObj).forEach(function(t){o._updateCategory(o.categoryCheckObj[t].parent)})})}))}}),o},o._reset=function(){o.modal.find('input[type="text"],input[type="number"]').val(""),o.modal.find('input[name="username"]').attr("disabled",!1),o.modal.find('input[name="password"]').val("123456"),o.enableRadio.reset(),o.roleSelect.reset(),o.modal.find(".category-outer").empty(),o.modal.find(".category-c").hide(),o.categoryCheckObj={},o.data={}},o._updateCategory=function(t){var e=o.modal.find(".category-outer");e.find('[data-pid="'+t.id+'"]').length||e.prepend(o._getCategoryHtml(t)),e.find('[data-pid="'+t.id+'"]').find(".cate-c").html(o.categoryCheckObj[t.id].items.map(function(e,n){return'<div class="cate-i">'+e.name+'<i data-id="'+t.id+"-"+n+'" title="移除这个二级类目" class="fa fa-times remove-cate"></i></div>'}))},o._removeCategory=function(t){o.modal.find(".category-outer").find('[data-pid="'+t.id+'"]').remove()},o._getCategoryHtml=function(t){return'<div class="category-i-c" data-pid="'+t.id+'">\n    <div class="cate-i-t">'+t.name+'</div>\n    <div class="cate-close" data-id="'+t.id+'" title="移除这个一级类目"><i class="fa fa-times"></i></div>\n    <div class="cate-c"></div>\n</div>'},o._getCategoryChildren=function(t){(0,d.default)({url:"category/listChildren/"+t,data:{ts:Date.now()},success:function(t){if(t.success){var e=t.data||[];o.categoryChecks.renderList(e).reset()}}})},o._checkData=function(){if(o.data.username=o.modal.find('input[name="username"]').val().trim(),!o.data.username)return(0,s.default)({msg:"请输入用户名"}),!1;if(o.data.password="123456",o.data.name=o.modal.find('input[name="name"]').val().trim(),!o.data.name)return(0,s.default)({msg:"请输入用户姓名"}),!1;if(o.data.phone=o.modal.find('input[name="phone"]').val().trim(),!o.data.phone)return(0,s.default)({msg:"请输入用户姓名"}),!1;if(void 0===o.data.enable||""===o.data.enable)return(0,s.default)({msg:"请选择用户状态"}),!1;if(!o.data.roleId)return(0,s.default)({msg:"请选择用户角色"}),!1;if("ALL_CATEGORY"!==o.data.categoryType){if(o.data.categoryList=Object.keys(o.categoryCheckObj).reduce(function(t,e){return t=[].concat(v(t),v(o.categoryCheckObj[e].items))},[]).map(function(t){return{id:t.id}}),!o.data.categoryList.length)return(0,s.default)({msg:"请选择用户负责类目"}),!1}else o.data.categoryList=[];return o.data.email=o.modal.find('input[name="email"]').val().trim(),o.data.wechat=o.modal.find('input[name="wechat"]').val().trim(),o.data.qq=o.modal.find('input[name="qq"]').val().trim(),!0},o.title=i,o.id=g,o.confirmFn=r,"function"!=typeof o.confirmFn)throw new Error("AccountModal param confirmFn must be a function");return o.data={},o.categoryCheckObj={},o._init(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),a(e,[{key:"_renderHtml",value:function(){var t=this;(0,o.default)("#"+this.id).length||(0,o.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:20px;width: 600px;"})),this.modal=(0,o.default)("#"+this.id),this.enableRadio=new c.default({obj:this.modal.find(".enable-radio"),list:[{name:"启用",id:!0},{name:"禁用",id:!1}],onChange:function(e){t.data.enable=0===e}}),this.roleSelect=new l.default({obj:this.modal.find(".role-select"),renderLi:function(t){return t.name},list:p.default.roleDic||[],onSelectChange:function(e){if(t.data.roleId=e?e.id:"",e){var n=e.privileges.filter(function(t){return t.code.indexOf("_CATEGORY")>-1})[0].code;"ALL_CATEGORY"===n?t.modal.find(".category-c").hide():t.modal.find(".category-c").show(),t.data.categoryType=n}}}),f.emitter.on("roleDicChange",function(e){t.roleSelect.renderList(e)}),this.categorySelect=new l.default({obj:this.modal.find(".category-select"),renderLi:function(t){return t.name},list:p.default.categoryDic||[],onSelectChange:function(e){e&&t._getCategoryChildren(e.id)},hasSearch:!0}),f.emitter.on("categoryDicChange",function(e){t.categorySelect.renderList(e)}),this.categoryChecks=new u.default({obj:this.modal.find(".category-checks"),renderLi:function(t){return t.name},onSelectChange:function(e,n){var i=t.categorySelect.getData().current;i&&(n.length?(t.categoryCheckObj[i.id]={parent:i,items:n},t._updateCategory(i)):(delete t.categoryCheckObj[i.id],t._removeCategory(i)))},pickAll:!0})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">用户名：</div>\n            <div class="modal-c-i-c"><input name="username" type="text" placeholder="以英文字母开头，仅能包含字母和数字" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">初始密码：</div>\n            <div class="modal-c-i-c"><input name="password" type="text" readonly value="123456" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">姓名：</div>\n            <div class="modal-c-i-c"><input name="name" type="text" placeholder="输入用户真实姓名" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">手机号：</div>\n            <div class="modal-c-i-c"><input name="phone" type="number" placeholder="输入用户手机号" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">账号状态：</div>\n            <div class="modal-c-i-c enable-radio"></div>\n        </div>\n        <div class="modal-c-i" style="max-width: 265px">\n            <div class="modal-c-i-t is-must">用户角色：</div>\n            <div class="modal-c-i-c"><div class="role-select"></div></div>\n        </div>\n    </div>\n    <div class="category-c">\n        <div class="modal-c-i-o">\n            <div class="modal-c-i">\n                <div class="modal-c-i-t is-must">负责类目：</div>\n                <div class="modal-c-i-c flexbox aic">\n                    <div class="category-select flex1" style="margin-right: 30px"></div>\n                    <div class="category-checks flex1"></div>\n                </div>\n            </div>\n        </div>\n        <div class="modal-c-i-o">\n            <div class="modal-c-i">\n                <div class="modal-c-i-c category-outer"></div>\n            </div>\n        </div>\n    </div>\n    \n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">微信：</div>\n            <div class="modal-c-i-c"><input name="wechat" type="text" placeholder="输入用户微信号" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">QQ：</div>\n            <div class="modal-c-i-c"><input name="qq" type="number" placeholder="输入用户QQ号" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">邮箱：</div>\n            <div class="modal-c-i-c"><input name="email" type="text" placeholder="输入用户邮箱" /></div>\n        </div>\n        <div class="modal-c-i">\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)}).on("click",".cate-close",function(){var e=(0,o.default)(this).data("id");(0,o.default)(this).parents(".category-i-c").remove(),delete t.categoryCheckObj[e]}).on("click",".remove-cate",function(){var e=(0,o.default)(this).data("id").split("-"),n=i(e,2),a=n[0],r=n[1];(0,o.default)(this).parent().remove(),t.categoryCheckObj[a].items.splice(r,1),t.categoryCheckObj[a].items.length||(t.modal.find('[data-pid="'+a+'"]').remove(),delete t.categoryCheckObj[a])})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=y},E1Zh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(n("0iPh"));n("Swsl");var a=s(n("w4T/")),r=s(n("pT4b")),o=s(n("gntN"));function s(t){return t&&t.__esModule?t:{default:t}}var c=["png","jpg","jpeg"],d=function(){var t=this;this.setImgs=function(e){t.imgs=e,t._renderImgs()},this.getImgs=function(){return t.imgs},this._bindEvent=function(){var e=t;t.outer.on("click",".add-new-img-btn-c",function(){(0,i.default)(this).next().trigger("click")}).on("change",'input[type="file"]',function(){var t=this.files[0],n=t.name.split(".").pop();if(-1===c.indexOf(n))return(0,o.default)({msg:"仅允许上传"+c.join("、")+"类型的文件"});e._uploadImg(t,e.imgs.length),e._resetFile()}).on("click",".fa-search-plus",function(){var t=(0,i.default)(this).parents(".drag-upload-img-item-c").data("index");e.imgViewer.show(e.imgs,t)}).on("click",".fa-trash-o",function(){var t=(0,i.default)(this).parents(".drag-upload-img-item-c");e.imgs.splice(t.data("index"),1),t.remove(),e.imgs.length<e.maxImgs&&e.outer.find(".add-new-img-btn-c").show()})},this._uploadImg=function(e,n){var i=window.URL.createObjectURL(e);t._renderNewImgs(i);var r=new FormData;new window.Promise(function(n){t.compress?t.dealImage(i,{quality:.7,width:1920},function(i){var a=new FormData;a.append(t.fileName,t.convertBase64UrlToBlob(i),e.name),n(a)}):(r.append(t.fileName,e,e.name),n(r))}).then(function(e){var i,r,o;(0,a.default)({url:t.url,fd:e,onprogress:(i=t.outer.find(".drag-upload-img-item-c").eq(n).find(".drag-upload-progress"),r=i.find(".drag-upload-progress-bar"),o=i.find(".drag-upload-progress-text"),function(t){var e=Math.round(t.loaded/t.total*100);r.width(e+"%"),o.text(e+"%"),e>=100&&setTimeout(function(){i.remove()},100)}),success:function(e){t.imgs[n]=t.getImgPathByRequest(e)}})})},this._renderHtml=function(){t.outer.html('<div class="drag-upload-outer"></div>'),t._renderImgs()},this._renderImgs=function(){t.outer.html([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.imgs.map(function(e,n){return t._renderImg(e,n)})),[t._renderAddBtn()]).join(""))},this._renderAddBtn=function(){return'<div class="add-new-img-btn-c" style="display: '+(t.maxImgs>t.imgs.length?"inline-block":"none")+'">+</div><input type="file" style="display: none" />'},this._resetFile=function(){t.outer.find(".add-new-img-btn-c").next().remove().end().after('<input type="file" style="display: none" />')},this._renderImg=function(t,e,n){return'<div class="drag-upload-img-item-c'+(n?" drag-upload-img-in":"")+'" data-index="'+e+'"><img src="'+t+'" />\n<div class="drag-upload-tool-c"><i class="fa fa-search-plus" title="查看大图"></i><i class="fa fa-trash-o" title="移除图片"></i></div>\n'+(n?'<div class="drag-upload-progress"><div class="drag-upload-progress-bar" style="width: 0"></div><div class="drag-upload-progress-text">0%</div></div>':"")+"\n</div>"},this._renderNewImgs=function(e){t.imgs.push(e),t.imgs.length===t.maxImgs&&t.outer.find(".add-new-img-btn-c").hide(),t.outer.find(".add-new-img-btn-c").before(t._renderImg(e,t.imgs.length-1,!0)),setTimeout(function(){t.outer.find(".drag-upload-img-in").removeClass("drag-upload-img-in")},0)},this.dealImage=function(t,e,n){var i=new Image;i.src=t,i.onload=function(){var t=this.width,i=this.height,a=t/i;e.width=e.width>t?t:e.width,t=e.width||t,i=e.height||t/a;var r=.7,o=document.createElement("canvas"),s=o.getContext("2d"),c=document.createAttribute("width");c.nodeValue=t;var d=document.createAttribute("height");d.nodeValue=i,o.setAttributeNode(c),o.setAttributeNode(d),s.drawImage(this,0,0,t,i),e.quality&&e.quality<=1&&e.quality>0&&(r=e.quality);var l=o.toDataURL("image/jpeg",r);o=null,n(l)}},this.convertBase64UrlToBlob=function(t){for(var e=window.atob(t.split(",")[1]),n=new ArrayBuffer(e.length),i=new Uint8Array(n),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([n],{type:"image/png"})},this._init=function(){t.imgViewer=new r.default,t._renderHtml(),t._bindEvent()}};e.default=function t(e){var n=e.outer,a=e.maxImgs,r=void 0===a?3:a,o=e.imgs,s=void 0===o?[]:o,c=e.url,l=void 0===c?"buildingContract/uploadFile":c,u=e.fileName,f=void 0===u?"file":u,h=e.getImgPathByRequest,p=e.compress,m=void 0===p||p;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d.call(this),!(n instanceof i.default)||n instanceof i.default&&1!==n.length)throw new Error("Table param outer must be one length jqueryDom");this.imgs=s,this.maxImgs=r,this.outer=n,this.url=l,this.fileName=f,this.getImgPathByRequest=h||function(t){if(t.success)return t.data},this.compress=m,this._init()}},EHAM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=v(n("WmcS")),r=v(n("7D5N")),o=v(n("RfmY")),s=v(n("hPQL")),c=v(n("RYhR")),d=v(n("THgg")),l=v(n("gntN")),u=v(n("/krT")),f=v(n("eI+r")),h=v(n("Gjvm")),p=n("/1Qr"),m=v(n("w4T/"));function v(t){return t&&t.__esModule?t:{default:t}}n("dn1d");var g=10,y=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._getList(1)},t._bindEvent=function(){var e=t;t.pager.on("click",".jump-to-basic",function(){e.router.push({page:"product-input-basic"})}).on("click",".upload-excel",function(){(0,d.default)({url:"product/lastTaskStatus?t="+Date.now(),type:"post",success:function(t){t.success&&t.data.serviceEnable?e.uploadFileModal.setData({fn:function(t){var n=t.fd;(0,m.default)({url:"product/upload",fd:n,success:function(t){t.success?(e.uploadFileModal.modalHide(),(0,f.default)({title:"批量导入成功",msg:"基本价格信息批量导入成功"})):(0,l.default)({msg:t.errorMsg||"文件上传失败，请稍后重试！"})}})}}).modalShow():(0,l.default)({type:"warning",msg:"服务器当前正在处理一个批量文件，请耐心等待处理完成后再导入"})}})}).on("click",".price-btn",function(){e.router.push({page:"product-price"})}).on("click",".detail-btn",function(){e.router.push({page:"product-detail"})}).on("click",".edit-item",function(){var t=e.table.getRowData($(this).data("index"));e.router.push({page:"product-input-basic",state:{id:t.id}})}).on("click",".add-price",function(){var t=e.table.getRowData($(this).data("index"));e.router.push({page:"product-price",state:{id:t.id}})}).on("click",".add-detail",function(){var t=e.table.getRowData($(this).data("index"));e.router.push({page:"product-detail",state:{id:t.id}})}).on("click",".delete-item",function(){var t=e.table.getRowData($(this).data("index"));p.floatModal.show({obj:$(this),side:3,title:"确认删除该商品？",fn:function(){(0,d.default)({url:"product/deleteProduct/"+t.id,type:"post",success:function(e){e.success?(0,f.default)({title:"删除成功",msg:t.name+" 商品成功删除"}):(0,l.default)({msg:e.errorMsg||"商品删除失败"})}})}})}).on("click",".to-detail",function(){var t=e.table.getRowData($(this).data("index"));e.router.push({page:"product-info",state:{id:t.id}})}).on("click",".view-img",function(){var t=e.table.getRowData($(this).data("index")),n=t.imagePaths[0]?t.imagePaths[0].split(","):[];n.length&&p.imgViewer.show(n)})},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.table.getPagination().current),"delete"===n&&(e=t.table.getPagination().current,1===t.table.getDataSource().length&&e--,e=e||1),(0,d.default)({url:"product/listProductBasic",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i({searchPage:{pageIndex:e-1,pageSize:g}},t.condition,{ts:Date.now()})),success:function(i){if(i.success&&i.data&&i.data.searchPage){var a=i.data.searchPage.pageData||[];t.table.setData({dataSource:a,pagination:{current:e,total:i.data.searchPage.totalRecord},conditionChange:!!n})}else t.table.setData({dataSource:[]})}})},t._initComponent=function(){new s.default({input:t.pager.find(".keyword-c"),fn:function(e){t.condition.searchCode=e,t._getList(1,"search")}}),t.priceSelect=new u.default({obj:t.pager.find(".price-select"),renderLi:function(t){return t.name},list:[{name:"不限",id:"all"},{name:"已录入商品价格",id:"yes"},{name:"未录入商品价格",id:"no"}],onSelectChange:function(e){t.condition.hasPriceFilter=e?e.id:"all",t._getList(1,"search")},placeholder:"是否已录入商品价格",hasReset:!0}),t.detailSelect=new u.default({obj:t.pager.find(".detail-select"),renderLi:function(t){return t.name},list:[{name:"不限",id:"all"},{name:"已录入详细介绍",id:"yes"},{name:"未录入详细介绍",id:"no"}],onSelectChange:function(e){t.condition.hasDetailFilter=e?e.id:"all",t._getList(1,"search")},placeholder:"是否已录入详细介绍",hasReset:!0}),t.table=new o.default({outer:t.pager.find(".product-table2"),headers:[{name:"序号",width:55},{name:"商品编码",width:100},{name:"商品名称",width:190},{name:"商品图片",width:80},{name:"款式编码",width:80},{name:"品牌",width:110},{name:"类目",width:110},{name:"规格型号",width:80},{name:"尺寸",width:60},{name:"库存",width:60},{name:"季节",width:60},{name:"年份",width:60},{name:"是否录入价格",width:110},{name:"是否录入详情",width:110},{name:"操作",width:130}],renderTrs:[function(t,e,n){return n.pageSize*(n.current-1)+(e+1)},function(t){return(0,c.default)(t.productNo)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px"><a class="btn btn-link to-detail" data-index="'+e+'">'+(0,c.default)(t.name)+"</a></td>"}},{renderTd:function(t,e){return'<td style="padding: 0">'+(t.imagePaths.length?'<img class="view-img" data-index="'+e+'" style="width: 32px;height: 32px" src="'+(p.imgPath+t.imagePaths[0])+'" >':"")+"</td>"}},function(t){return(0,c.default)(t.styleCode)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.brand)+"</td>"}},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.categoryName)+"</td>"}},function(t){return(0,c.default)(t.specification)},function(t){return(0,c.default)(t.size)},{renderTd:function(t){return'<td style="padding-right: 10px;text-align: right">'+(0,c.default)(t.storageSize)+"</td>"}},function(t){return(0,c.default)(t.season)},function(t){return(0,c.default)(t.productYear)},function(t,e){return'<a data-index="'+e+'" class="btn btn-link add-price" style="color: '+(1===t.hasPrices?"#00b793":"#d42740")+'">'+(1===t.hasPrices?"已录入":"未录入")+"</a>"},function(t,e){return'<a data-index="'+e+'" class="btn btn-link add-detail" style="color: '+(1===t.hasDetail?"#00b793":"#d42740")+'">'+(1===t.hasDetail?"已录入":"未录入")+"</a>"},function(t,e){return'<a data-index="'+e+'" class="btn btn-link edit-item" style="margin-right: 5px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-index="'+e+'" class="btn btn-link delete-btn delete-item"><i class="fa fa-trash-o"></i>删除</a>'}],pagination:{pageSize:g,show:!0,current:1,onChange:function(e){var n=e.current;t._getList(n)},isJump:!0},emptyMsg:"没有符合条件的商品"}),t.uploadFileModal=new h.default({title:"基本信息批量导入",fileName:"upload"})},t.id="productInputPage",t.docTitle="价格录入",t.html=a.default,t.condition={searchCode:"",hasPriceFilter:"all",hasDetailFilter:"all"},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=y},FaX3:function(t,e){},Fgvl:function(t,e){},Gjvm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n("CWZd")),r=s(n("0iPh")),o=s(n("Z2H6"));function s(t){return t&&t.__esModule?t:{default:t}}n("Ibea");var c="uploadFileModal",d=function(t){function e(t){var n=t.title,i=void 0===n?"":n,a=t.confirmFn,r=void 0===a?function(){}:a,o=t.fileName,s=void 0===o?"file":o,d=t.postFix,l=void 0===d?["xls","xlsx"]:d;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(u.title=i,u.id=c+Math.ceil(1e7*Math.random()),u.confirmFn=r,u.fileName=s,"function"!=typeof u.confirmFn)throw new Error("uploadModal param confirmFn must be a function");return u.postFix=l,u.currentFile=null,u._init(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 400px;left: 150px"})),this.modal=(0,r.default)("#"+this.id),this.form=this.modal.find("form"),this.file=this.form.find("input"),this.fileNameC=this.modal.find(".file-name")}},{key:"_getBodyHtml",value:function(){return'<div style="width: 350px;margin: 0 auto;height: 100px" class="flexbox jcc aic">\n<div>文件：</div>\n<div class="flex1">\n<div class="input-group">\n    <input type="text" class="form-control file-name" placeholder="请选择'+this.postFix.join("、")+'类型的文件" readonly />\n    <span class="input-group-addon open-file"><i class="fa fa-folder-open"></i></span>\n</div>\n    <form style="display: none"><input type="file" name="'+this.fileName+'" /></form>\n</div>\n</div>'}},{key:"openFile",value:function(){return this.file.trigger("click"),this}},{key:"reset",value:function(){return this.fileNameC.val(""),this.form[0].reset(),this}},{key:"setData",value:function(t){var e=t.fn,n=t.title;return this.setConfirmFn(e),this.setTitle(n),this}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){if(!t.fileNameC.val())return(0,o.default)({msg:"请选择文件！",obj:t.fileNameC,side:3});var e=new FormData;e.append(t.fileName,t.currentFile),t.confirmFn({fd:e})}).on("click",".open-file,.file-name",function(){t.openFile()}).on("change",'input[type="file"]',function(){var e=this.files[0];return e?-1===t.postFix.indexOf(e.name.split(".").pop())?(t.reset(),(0,o.default)({msg:"仅允许上传"+t.postFix.join("、")+"类型的文件！",obj:t.fileNameC,side:3})):(t.currentFile=e,void t.fileNameC.val(e.name)):t.reset()})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=d},Hbxq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">用户管理</div>\n        <div class="c-i-c" style="width: 400px;margin-left: 20px">\n            <div class="c-i-t">用户名：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" placeholder="请输入用户名称" />\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t">用户角色：</div>\n            <div class="c-i-d role-select" style="width: 180px">\n            </div>\n        </div>\n        <div class="flex1"></div>\n        <button class="btn btn-ys-default add-account"><i class="fa fa-plus-circle"></i>添加用户</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer user-table"></div>\n</div>\n</div>'}},ILKP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="ys-back-btn"></div>\n<div class="content-container" style="padding: 20px">\n    <div class="section-title">基本信息录入</div>\n</div>\n<div class="content-container" style="padding: 20px">\n    <div style="width: 1000px;margin: 0 auto">\n        <div class="flexbox jcfe">\n            <button style="margin: 0 20px 20px 0" class="btn btn-ys-default open-product-modal"><i class="fa fa-mail-forward"></i>导入相似商品</button>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px" style="margin-bottom:10px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">商品名称：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="name" type="text" placeholder="输入商品名称" />\n                </div>\n            </div>\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">商品编码：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="productNo" type="text" placeholder="输入商品编码" />\n                </div>\n            </div>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">品牌：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="brand" type="text" placeholder="输入品牌" />\n                </div>\n            </div>\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t" style="width: 10em;text-align: right">款式编码：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="styleCode" type="text" placeholder="输入款式编码" />\n                </div>\n            </div>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">类目：</div>\n                <div class="c-i-d flexbox jcsb aic">\n                    <div class="category-select" style="width:160px"></div>\n                    <div class="category-select2" style="width:160px;display:none"></div>\n                </div>\n            </div>\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t" style="width: 10em;text-align: right">标签：</div>\n                <div class="c-i-d label-checks"></div>\n            </div>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">规格型号：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="specification" type="text" placeholder="输入规格型号" />\n                </div>\n            </div>\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t" style="width: 10em;text-align: right">尺码：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="size" type="text" placeholder="输入尺码" />\n                </div>\n            </div>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t" style="width: 10em;text-align: right">年份：</div>\n                <div class="c-i-d year-select"></div>\n            </div>\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t" style="width: 10em;text-align: right">季节：</div>\n                <div class="c-i-d season-select"></div>\n            </div>\n        </div>\n        <div class="flexbox aic jcsb" style="margin-bottom:20px">\n            <div class="c-i-c" style="width: 480px">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">库存：</div>\n                <div class="c-i-d">\n                    <input class="form-control" name="storageSize" type="number" placeholder="输入库存" />\n                </div>\n            </div>\n        </div>\n        <div class="flexbox aic">\n            <div class="c-i-c aifs">\n                <div class="c-i-t is-must" style="width: 10em;text-align: right">图片：</div>\n                <div class="c-i-d">\n                    <div style="margin-bottom: 10px;color: #666;line-height:32px">【注：默认第一张图片为封面图】</div>\n                    <div class="upload-imgs" style="height: 100px"></div>\n                </div>\n            </div>\n        </div>\n        <div class="flexbox aic jcc" style="margin-top: 20px">\n            <button class="btn btn-main save-btn">保 存</button>\n            <button class="btn btn-warning reset-btn" style="margin-left: 30px">重 置</button>\n            <button class="btn btn-ys-default cancel-btn" style="margin-left: 30px">取 消</button>\n        </div>\n    </div>\n</div>\n</div>'}},IZxf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return/[\u2E80-\u9FFF]/i.test(t)}},Ibea:function(t,e){},IdQS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getUrlParams=function(){var t={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search).substr(1).split("&").forEach(function(e){var n=e.split("=")[1]||"",i=e.split("=")[0];i&&(t[i]=decodeURI(n))}),t},e.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?decodeURI(n[2]):null},e.createSearch=function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];void 0!==t&&null!==t||(i=""),e.push(n+"="+i)}return e.length?"?"+e.join("&"):""},e.getSearchFromStr=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[1];return t?"?"+t:""}},J0Zk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=p(n("CWZd")),r=p(n("0iPh")),o=p(n("/krT")),s=p(n("gntN")),c=p(n("IZxf")),d=p(n("eUm7")),l=p(n("E1Zh")),u=n("/1Qr"),f=n("z+yy"),h=p(f);function p(t){return t&&t.__esModule?t:{default:t}}var m="categoryModal",v=function(t){function e(t){var n=t.title,i=void 0===n?"添加类目":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(o.setData=function(t){var e=t.type,n=void 0===e?"add":e,i=t.fn,a=t.data,r=void 0===a?{}:a;return o.setTitle("add"===n?"新增类目":"编辑类目"),o.setConfirmFn(i),h.default.getCategoryPromise||(h.default.getCategoryPromise=(0,f.getCategoryDic)()),"add"===n?o._reset():(o.data=r,o.modal.find('input[name="name"]').val(o.data.name),o.modal.find('input[name="categoryNo"]').val(o.data.categoryNo),o.modal.find(".parent-select-o").toggle(0!==o.data.parentCategoryId),h.default.getCategoryPromise().then(function(t){var e=t.findIndex(function(t){return t.id===o.data.parentCategoryId});e>-1?o.parentSelect.setData(e):o.parentSelect.reset(!1)}),o.radio.setChecked(0===o.data.parentCategoryId?0:1),o.radio2.setChecked(o.data.showOnApp?0:1),o.uploadImgs.setImgs([o.data.image])),o},o._reset=function(){o.modal.find('input[name="name"]').val(""),o.modal.find('input[name="categoryNo"]').val(""),o.parentSelect.reset(!1),o.radio.reset(),o.modal.find(".parent-select-o").hide(),o.radio2.reset(),o.uploadImgs.setImgs([]),o.data={parentCategoryId:0}},o._checkData=function(){if(o.data.name=o.modal.find('input[name="name"]').val().trim(),!o.data.name)return(0,s.default)({msg:"请输入类目名称"}),!1;if(o.data.categoryNo=o.modal.find('input[name="categoryNo"]').val().trim(),!o.data.categoryNo)return(0,s.default)({msg:"请输入类目编号"}),!1;if((0,c.default)(o.data.categoryNo))return(0,s.default)({msg:"类目编号不能包含汉字"}),!1;var t=o.radio.getChecked();if(-1===t)return(0,s.default)({msg:"请选择是否一级类目"}),!1;if(0===t)o.data.parentCategoryId=0;else if(o.data.parentCategoryId<=0)return(0,s.default)({msg:"请选择父级类目"}),!1;if(o.data.image=o.uploadImgs.getImgs()[0],!o.data.image)return(0,s.default)({msg:"请上传类目图片"}),!1;var e=o.radio2.getChecked();return-1===e?((0,s.default)({msg:"请选择是否APP首页显示"}),!1):(o.data.showOnApp=0===e,!0)},o.title=i,o.id=m,o.confirmFn=r,"function"!=typeof o.confirmFn)throw new Error("RoleModal param confirmFn must be a function");return o.data={},o._init(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 600px;"})),this.modal=(0,r.default)("#"+this.id),this.parentSelectOuter=this.modal.find(".parent-select-o"),this.parentSelect=new o.default({obj:this.modal.find(".parent-select"),renderLi:function(t){return t.name},list:h.default.categoryDic||[],onSelectChange:function(e){t.data.parentCategoryId=e.id||-1},hasSearch:!0,menuStyle:"max-height:200px;overflow-y:auto"}),u.emitter.on("categoryDicChange",function(e){t.parentSelect.renderList(e)}),this.radio=new d.default({obj:this.modal.find(".level-radio"),list:[{name:"是"},{name:"否"}],onChange:function(e){t.data.parentCategoryId=e?0:-1,t.parentSelectOuter.toggle(1===e)}}),this.uploadImgs=new l.default({outer:this.modal.find(".upload-imgs"),maxImgs:1,url:"image/category/upload",fileName:"uploadFile",getImgPathByRequest:function(t){if(t.success)return""+u.requestServer+t.data},compress:!1}),this.radio2=new d.default({obj:this.modal.find(".showonapp-radio"),list:[{name:"是"},{name:"否"}],onChange:function(e){t.data.showOnApp=e+1}})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">类目名称：</div>\n            <div class="modal-c-i-c"><input name="name" type="text" placeholder="输入类目名称" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">类目编码：</div>\n            <div class="modal-c-i-c"><input name="categoryNo" type="text" placeholder="输入类目编码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">是否是一级类目：</div>\n            <div class="modal-c-i-c level-radio"></div>\n        </div>\n        <div class="modal-c-i parent-select-o">\n            <div class="modal-c-i-t is-must">选择父类目：</div>\n            <div class="modal-c-i-c">\n                <div class="parent-select"></div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">上传类目图片：</div>\n            <div class="modal-c-i-c" style="height: 100px">\n                <div class="upload-imgs"></div>\n            </div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">是否在APP首页显示：</div>\n            <div class="modal-c-i-c showonapp-radio"></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=v},JMqE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="ys-back-btn"></div>\n<div class="content-container" style="padding: 20px">\n    <div class="section-title">商品预览</div>\n</div>\n<div class="content-container" style="padding: 20px 20px 40px;margin-top: 15px">\n    <div class="section-header"><div class="section-title">基本信息</div></div>\n    <div class="step-section-c">\n        <div ys-controller="basic2">\n            <table class="no-body-table basic-table" style="width: 1000px;margin: 20px auto">\n                <tbody>\n                    <tr>\n                        <th width="100">商品名称</th>\n                        <td width="400" ys-bind="name"></td>\n                        <th width="100">商品编码</th>\n                        <td width="400" ys-bind="productNo"></td>\n                    </tr>\n                    <tr>\n                        <th width="100">品牌</th>\n                        <td width="400" ys-bind="brand"></td>\n                        <th width="100">款式编码</th>\n                        <td width="400" ys-bind="styleCode"></td>\n                    </tr>\n                    <tr>\n                        <th width="100">类目</th>\n                        <td width="400" ys-bind="categoryName"></td>\n                        <th width="100">标签</th>\n                        <td width="400" class="label-c"></td>\n                    </tr>\n                    <tr>\n                        <th width="100">规格型号</th>\n                        <td width="400" ys-bind="specification"></td>\n                        <th width="100">尺码</th>\n                        <td width="400" ys-bind="size"></td>\n                    </tr>\n                    <tr>\n                        <th width="100">年份</th>\n                        <td width="400" ys-bind="productYear"></td>\n                        <th width="100">季节</th>\n                        <td width="400" ys-bind="season"></td>\n                    </tr>\n                    <tr>\n                        <th width="100">库存</th>\n                        <td width="400" ys-bind="storageSize"></td>\n                        <th width="100">图片</th>\n                        <td width="400"><div class="basic-img-c"></div></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div> \n     <div class="section-header"><div class="section-title">商品进货信息</div></div> \n    <div class="step-section-c">\n        <div class="channel-c"></div>\n    </div>\n    <div class="section-header"><div class="section-title">商品销售信息</div></div>   \n    <div class="step-section-c">\n        <table class="no-body-table sale-table v-m" style="width: 1000px;margin: 20px auto">\n            <tbody>\n                <tr>\n                    <th width="100">建议售价</th>\n                    <td width="400" data-name="suggestPrice"></td>\n                    <th width="100">审批价格</th>\n                    <td width="400" data-name="auditPrice"></td>\n                </tr>\n            </tbody>\n        </table>\n        <div class="channel-i-c">\n            <div class="flexbox aic channel-header">\n                <div class="channel-name flex1">分段售价</div>\n            </div>\n            <div class="rank-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n        </div>\n        <div class="channel-i-c">\n            <div class="flexbox aic channel-header">\n                <div class="channel-name flex1">折扣售价</div>\n            </div>\n            <div class="discount-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n        </div>\n    </div>\n    <div class="section-header"><div class="section-title">商品详细信息</div></div> \n    <div class="step-section-c">\n        <div class="product-detail" style="width: 1000px;margin: 20px auto"></div>\n    </div>\n</div>\n</div>'}},Jwaa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("0iPh"));n("3NHQ");var a=r(n("QiFc"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=this;this._bindEvent=function(){},this.setData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.checkIds=e?e.split(","):[],t.checkboxs.forEach(function(e,n){t.checkIds.indexOf(t.list[n].id+"")>-1?e.setChecked(!0,!0):e.setChecked(!1,!0)})},this.setIndexs=function(e){t.checkboxs.forEach(function(t,n){t.setChecked(e.indexOf(n)>-1)}),t.checkIds=t.list.reduce(function(t,n,i){return e.indexOf(i)>-1&&t.push(n.id),t},[])},this.reset=function(){return t.setData(),t},this.setList=function(e){t.list=e,t._renderList()},this._renderList=function(){t.outer.find(".checks-item-outer").html(t.list.map(function(e,n){return'<div class="checks-item-c flexbox aic"><div class="checks-item-check-box"></div><div class="checks-item-name">'+t.renderLi(e,n)+"</div></div>"}).join("")),t.checkboxs=[].map.call(t.outer.find(".checks-item-check-box"),function(e,n){return new a.default({obj:(0,i.default)(e),onChange:function(e){t.list[n].checked=e,t.onChange(t.list[n],n,t.list)},checked:t.list[n].checked})})},this.getData=function(){return t.checkIds=t.list.reduce(function(t,e){return e.checked&&t.push(e.id),t},[]),t.checkIds},this.getItems=function(){return t.checkItems=t.list.reduce(function(t,e){return e.checked&&t.push(e),t},[]),t.checkItems},this._renderHtml=function(){t.outer.html('<div class="checks-item-outer"><div>'),t._renderList()},this._init=function(){t._renderHtml(),t._bindEvent()}};e.default=function t(e){var n=this,i=e.obj,a=e.list,r=void 0===a?[]:a,s=e.renderLi,c=void 0===s?function(t){return t.name}:s,d=e.checkIds,l=void 0===d?"":d,u=e.onChange,f=void 0===u?function(){}:u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this),this.outer=i,this.list=r,this.renderLi=c,this.checkIds=l?l.split(","):[],this.list=this.list.map(function(t){return t.checked=n.checkIds.indexOf(t.id+"")>-1,t}),this.onChange=f,this._init()}},LJoD:function(t,e){},MAbf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("hwsv");var a=s(n("/krT")),r=s(n("THgg")),o=s(n("gntN"));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._getVerCode=function(){var t=window.basePath;$("#vercodeImg").attr("src",t+"verifycode/get?ts="+Date.now())},this._checkData=function(){if(!e.data.roleId)return(0,o.default)({msg:"请选择要登陆的角色"}),!1;var t=e.outer.find('input[name="username"]').val().trim();if(!t)return(0,o.default)({msg:"请输入用户名"}),!1;e.data.username=t;var n=e.outer.find('input[name="password"]').val().trim();if(!n)return(0,o.default)({msg:"请输入密码"}),!1;e.data.password=n;var i=e.outer.find('input[name="verifyCode"]').val().trim();return i?(e.data.verifyCode=i,!0):((0,o.default)({msg:"请输入验证码"}),!1)},this._doLogin=function(){(0,r.default)({url:"login",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(e.data),success:function(t){t.success?(window.localStorage.setItem("islogin","login"),window.location.href=""+window.basePath):(e._getVerCode(),(0,o.default)({msg:t.errorMsg||"登录失败！"}))}})},this._bindEvent=function(){var t=e;e.outer.on("click",".login-btn",function(){t._checkData()&&t._doLogin()}).on("click","#vercodeImg",function(){t._getVerCode()}).on("keydown",'input[name="verifyCode"]',function(e){13===e.keyCode&&t._checkData()&&t._doLogin()})},this._getRole=function(){(0,r.default)({url:"roleSelect",type:"post",contentType:"application/json;charset=utf-8",success:function(t){e.roleSelct.renderList(t.data)}})},this._initComponent=function(){document.title="商品库-登录",e.roleSelct=new a.default({obj:e.outer.find(".role-select"),onSelectChange:function(t){e.data.roleId=t.id},renderLi:function(t){return t.name},btnStyle:"border:none",placeholder:"请选择登陆角色",menuStyle:"max-height:300px;overflow-y:auto"})},this.id="loginPage",this.hasInit=!1,this.data={}}return i(t,[{key:"init",value:function(){this.hasInit||(this.outer=$("#"+this.id),this._initComponent(),this._bindEvent(),this._getRole()),this._getVerCode()}}]),t}();e.default=c},MQo1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=l(n("CWZd")),r=l(n("0iPh")),o=l(n("gntN")),s=l(n("eUm7")),c=l(n("Jwaa")),d=l(n("THgg"));function l(t){return t&&t.__esModule?t:{default:t}}var u="roleModal",f=function(t){function e(t){var n=t.title,i=void 0===n?"添加角色":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.setData=function(t){var e=t.type,n=void 0===e?"add":e,i=t.fn,a=t.data,r=void 0===a?{}:a;if(s.setTitle("add"===n?"新增角色":"编辑角色"),s.setConfirmFn(i),"add"===n)s._reset();else{s.data=r,s.modal.find('input[name="name"]').val(s.data.name);var o=s._getQX(r.privileges,"CATEGORY");s.data.goodsType=o[0]?o[0].id:"",s.data.goodsType&&s.goodsRadio.setChecked(s.dic["商品权限"].findIndex(function(t){return t.id===s.data.goodsType}));var c=s._getQX(r.privileges,"PRICE");s.data.priceType=c[0]?c[0].id:"",s.data.priceType&&s.priceRadio.setChecked(s.dic["价格权限"].findIndex(function(t){return t.id===s.data.priceType})),s.data.pageType=s._getQX(r.privileges,"MANAGE","QUERY"),s.pageCheck.setData(s.data.pageType.map(function(t){return t.id}).join(","))}return s},s._getQX=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:121212;return t.filter(function(t){return t.code.indexOf("_"+e)>-1||t.code.indexOf("_"+n)>-1})},s._reset=function(){s.modal.find('input[name="name"]').val(""),s.goodsRadio.reset(),s.priceRadio.reset(),s.pageCheck.reset(),s.data={}},s._checkData=function(){return s.data.name=s.modal.find('input[name="name"]').val().trim(),s.data.name?s.data.goodsType?s.data.priceType?(s.data.pageType=s.pageCheck.getItems().map(function(t){return t.id}).join(","),!!s.data.pageType||((0,o.default)({msg:"请至少选择一个功能权限"}),!1)):((0,o.default)({msg:"请选择价格权限"}),!1):((0,o.default)({msg:"请选择商品权限"}),!1):((0,o.default)({msg:"请输入角色名称"}),!1)},s._getDic=function(){(0,d.default)({url:"role/getAllPrivileges",data:{ts:Date.now()},success:function(t){t.success&&(s.dic=t.data.reduce(function(t,e){return t[e.privilegeCategory.name]=e.privileges.sort(function(t,e){return t.displayOrder-e.displayOrder}),t},{}),s.goodsRadio.setList(s.dic["商品权限"]),s.priceRadio.setList(s.dic["价格权限"]),s.pageCheck.setList(s.dic["功能权限"]))}})},s.title=i,s.id=u,s.confirmFn=r,"function"!=typeof s.confirmFn)throw new Error("RoleModal param confirmFn must be a function");return s.data={},s._init(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:50px;width: 600px;"})),this.modal=(0,r.default)("#"+this.id),this.goodsRadio=new s.default({obj:this.modal.find(".goods-radio"),onChange:function(e,n){t.data.goodsType=n.id},renderLi:function(t){return t.displayName}}),this.priceRadio=new s.default({obj:this.modal.find(".price-radio"),onChange:function(e,n){t.data.priceType=n.id},renderLi:function(t){return t.displayName}}),this.pageCheck=new c.default({obj:this.modal.find(".page-check"),renderLi:function(t){return t.displayName}}),this._getDic()}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">角色名称：</div>\n            <div class="modal-c-i-c"><input name="name" type="text" placeholder="输入角色名称" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">商品权限：</div>\n            <div class="modal-c-i-c goods-radio"></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">商品权限：</div>\n            <div class="modal-c-i-c price-radio"></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">功能权限：</div>\n            <div class="modal-c-i-c page-check"></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=f},"N/qI":function(t,e){},NJje:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer condition-toggle" style="min-width: 1250px">\n    <div class="flexbox aic">\n        <div class="section-title">商品查询</div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">商品名称：</div>\n            <div class="c-i-d" style="width: 250px">\n                <input class="form-control keyword-c" type="text" name="name" placeholder="请输入商品名称" />\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">商品编码：</div>\n            <div class="c-i-d" style="width: 250px">\n                <input class="form-control keyword-c" type="text" name="productNo" placeholder="请输入标签名称" />\n            </div>\n        </div>\n        <button class="btn btn-link show-more"><div class="close-item">展开高级查询<i class="fa fa-chevron-down"></i></div><div class="open-item">收起高级查询<i class="fa fa-chevron-up"></i></div></button>\n    </div>\n    <div class="more-condition-c flexbox aic" style="padding-left: 71px;margin-top: 18px">\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">款式编码：</div>\n            <div class="c-i-d" style="width: 250px">\n                <input class="form-control keyword-c" type="text" name="styleCode" placeholder="请输入款式编码" />\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">品牌：</div>\n            <div class="c-i-d" style="width: 250px">\n                <input class="form-control keyword-c" type="text" name="brandName" placeholder="请输入品牌" />\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">渠道：</div>\n            <div class="c-i-d" style="width: 250px">\n                <input class="form-control keyword-c" type="text" name="channelName" placeholder="请输入渠道" />\n            </div>\n        </div>\n    </div>\n    <div class="more-condition-c flexbox aic" style="padding-left: 71px;margin-top: 18px">\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">最新进价：</div>\n            <div class="c-i-d flexbox" style="width: 250px">\n                <div class="flex1"><input class="form-control" type="number" name="purchasePriceBegin" /></div><div style="margin: 0 5px;line-height: 30px">-</div>\n                <div class="flex1"><input class="form-control" type="number" name="purchasePriceEnd" /></div>\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">类目：</div>\n            <div class="c-i-d category-select" style="width: 250px">\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 20px">\n            <div class="c-i-t" style="width: 5em">商品标签：</div>\n            <div class="c-i-d label-check" style="width: 250px">\n            </div>\n        </div>\n    </div>\n    <div class="flexbox aic jcc" style="width: 1160px;margin-top: 20px">\n        <button class="btn btn-main search-btn" style="margin-right: 20px"><i class="fa fa-search"></i>查询</button>\n        <button class="btn btn-warning reset-btn"><i class="fa fa-refresh"></i>重置</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer product-table" style="min-height: 100px"></div>\n    <div class="pagination-outer" style="margin-top: 15px"></div>\n</div>\n</div>'}},PJgW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">角色管理</div>\n        <div class="c-i-c" style="width: 400px;margin-left: 20px">\n            <div class="c-i-t">角色名称：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" placeholder="请输入角色名称" />\n            </div>\n        </div>\n        <div class="flex1"></div>\n        <button class="btn btn-ys-default add-role"><i class="fa fa-plus-circle"></i>添加角色</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer role-table"></div>\n</div>\n</div>'}},Pmvp:function(t,e){},"Q+qa":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=l(n("CWZd")),r=l(n("0iPh")),o=l(n("qiY8")),s=l(n("THgg")),c=l(n("gntN")),d=l(n("rYvR"));function l(t){return t&&t.__esModule?t:{default:t}}var u="chooseChannelModal",f=function(t){function e(t){var n=t.title,i=void 0===n?"选择进货渠道":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(o._reset=function(){o.modal.find('input[type="text"],input[type="number"]').val(""),o.model.reset(),o.modal.find(".detail-c").hide(),o.modal.find(".confirm-btn").hide()},o.setData=function(t){var e=t.fn;return o.setConfirmFn(e),o._reset(),o},o._checkData=function(){return!0},o._getChannel=function(t){(0,s.default)({url:"channel/get",type:"post",contentType:"application/json;charset=utf-8",data:t,success:function(t){t.success?(o.modal.find(".result-c").text(""),o.modal.find(".detail-c").show(),o.data=t.data,o.model.setData(t.data),o.modal.find(".confirm-btn").show()):(o.modal.find(".detail-c").hide(),o.modal.find(".result-c").text("未找到商品信息，请重新查询"))}})},o.title=i,o.id=u,o.confirmFn=r,"function"!=typeof o.confirmFn)throw new Error("AccountModal param confirmFn must be a function");return o.data={},o._init(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:50px;width: 500px;left:50px"})),this.modal=(0,r.default)("#"+this.id),this.model=new o.default({controller:"channel"}),this.ac=new d.default({input:this.modal.find('[name="channel-no"]'),getData:function(t){return(0,s.default)({url:"channel/getChannelNoHint",type:"post",contentType:"application/json;charset=utf-8",data:t})},formatList:function(t){return t.data||[]},keyTigger:!1,renderLi:function(t){return t},onSelect:function(e){t._getChannel(e)}})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="flexbox aic" style="margin-bottom: 20px;margin-top: 40px">\n        <div style="width: 5em;text-align: right;margin-right: 20px;color: #999">渠道编码</div>\n        <div class="flex1"><input class="form-control" name="channel-no" placeholder="输入渠道编码" /></div>\n        <button style="margin-left: 20px" class="btn btn-ys-default search-btn"><i class="fa fa-search"></i>查询</button>\n    </div>\n    <div class="result-c" style="text-align: center;color: red"></div>\n    <div class="detail-c" style="margin-top: 20px" ys-controller="channel">\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px; text-align: right;color: #999">渠道名称</div><div ys-bind="name"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">联络人</div><div ys-bind="contactorName"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">手机</div><div ys-bind="contactorPhone"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">微信</div><div ys-bind="contactorWechat"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">QQ</div><div ys-bind="contactorQq"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">邮箱</div><div ys-bind="contactorEmail"></div>\n        </div>\n        <div class="flexbox aic" style="margin-bottom: 15px">\n            <div style="width: 5em;margin-right: 20px;text-align: right;color: #999">地址</div><div ys-bind="contactorAddress"></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)}).on("click",".search-btn",function(){var e=t.modal.find('input[name="channel-no"]').val().trim();if(!e)return(0,c.default)({msg:"请输入渠道编码后再搜索"});t._getChannel(e)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=f},"Q0Q/":function(t,e){},Q18l:function(t,e){},QiFc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n("0iPh"),o=(i=r)&&i.__esModule?i:{default:i};n("3CqZ");var s=function(){function t(e){var n=e.obj,i=e.onChange,a=void 0===i?function(){}:i,r=e.checked,s=void 0!==r&&r,c=e.color,d=void 0===c?"inherit":c;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.obj=n,!(n instanceof o.default)||n instanceof o.default&&1!==n.length)throw new Error("CheckBox params obj must be an one length jqueryDom");if("function"!=typeof a)throw new Error("CheckBox params onChange must be an Function");this.onChange=a,this.checked=s,this.color=d,this.checkbox=null,this.name="checkbox"+Math.round(1e8*Math.random()),this._render()}return a(t,[{key:"_getHtmlStr",value:function(){return'<div class="ys-checkbox"><input type="checkbox" '+(this.checked?"checked":"")+' id="'+this.name+'"><label style="border-color: '+this.color+";color: "+this.color+'" for="'+this.name+'"></label></div>'}},{key:"_render",value:function(){this.obj.html(this._getHtmlStr()),this._bindEvent()}},{key:"setChecked",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.checked=t,this.checkbox&&this.checkbox.prop("checked",t),e&&this.onChange(this.checked),this}},{key:"getChecked",value:function(){return this.checked}},{key:"_bindEvent",value:function(){var t=this;this.obj.on("change",'input[type="checkbox"]',function(){var e=(0,o.default)(this).prop("checked");t.checked=e,t.onChange(e)}),this.checkbox=this.obj.find('input[type="checkbox"]')}}]),t}();e.default=s},R7JK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=g(n("Hbxq")),a=g(n("7D5N")),r=g(n("RfmY")),o=g(n("hPQL")),s=g(n("RYhR")),c=g(n("THgg")),d=g(n("gntN")),l=g(n("eI+r")),u=g(n("/krT")),f=g(n("D3zq")),h=g(n("sH5r")),p=n("/1Qr"),m=n("z+yy"),v=g(m);function g(t){return t&&t.__esModule?t:{default:t}}function y(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n("LJoD");var b=10,w=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){v.default.roleDicPromise||(v.default.roleDicPromise=(0,m.getRoleList)()),t._getList(1)},t._addOrEdit=function(e){var n=e.id,i=e.name,a=e.username,r=e.password,o=e.phone,s=e.enable,u=e.roleId,f=e.qq,h=e.email,p=e.wechat,m=e.categoryList;(0,c.default)({url:"admin/user/"+(n?"update":"add"),type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({name:i,username:a,password:r,phone:o,enable:s,roleId:u,qq:f,email:h,wechat:p,id:n,categoryList:m,ts:Date.now()}),success:function(e){e.success?(t.modal.modalHide(),(0,l.default)({type:"success",title:(n?"编辑":"添加")+"用户成功",msg:"已成功"+(n?"编辑":"添加")+"用户："+i}),t._getList(1,"refresh"),v.default.getChannelManagerPromise=null):(0,d.default)({msg:e.errorMsg||"用户"+(n?"编辑":"添加")+"失败，请重试！"})}})},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.table.getPagination().current),"delete"===n&&(e=t.table.getPagination().current,1===t.table.getDataSource().length&&e--,e=e||1),"delete"!==n&&(t.condition.activeId=""),(0,c.default)({url:"admin/user/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:e-1,pageSize:b},username:t.condition.keyword,roleIdFilter:t.condition.roleId,ts:Date.now()}),success:function(i){if(i.success){var a=i.data.searchPage.pageData||[];t.table.setData({dataSource:a,pagination:{current:e,total:i.data.searchPage.totalRecord},conditionChange:!!n})}else t.table.setData({dataSource:[]})}})},t._restPsd=function(e){var n=e.username,i=e.roleId,a=e.password;(0,c.default)({url:"admin/user/changePassword",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({username:n,roleId:i,password:a}),success:function(e){e.success?(t.modal2.modalHide(),(0,d.default)({type:"success",msg:"密码重置成功！"})):(0,d.default)({msg:e.errorMsg||"密码重置失败！"})}})},t._bindEvent=function(){var e=t;t.pager.on("click",".add-account",function(){e.modal.setData({fn:function(t){var n=t.name,i=t.username,a=t.password,r=t.phone,o=t.enable,s=t.roleId,c=t.qq,d=t.email,l=t.wechat,u=t.categoryList;e._addOrEdit({name:n,username:i,phone:r,password:a,enable:o,roleId:s,qq:c,email:d,wechat:l,categoryList:u})}}).modalShow()}).on("click",".edit-item",function(){var t=e.table.getRowData($(this).data("index"));e.modal.setData({fn:function(n){var i=n.name,a=n.username,r=n.password,o=n.phone,s=n.enable,c=n.roleId,d=n.qq,l=n.email,u=n.wechat,f=n.categoryList;e._addOrEdit({id:t.id,name:i,username:a,password:r,phone:o,enable:s,roleId:c,qq:d,email:l,wechat:u,categoryList:f})},data:t,type:"edit"}).modalShow()}).on("click",".reset-password",function(){var t=e.table.getRowData($(this).data("index"));e.modal2.setData({fn:function(n){var i=n.password;e._restPsd({username:t.username,roleId:t.roleId,password:i})}}).modalShow()})},t._initComponent=function(){t.table=new r.default({outer:t.pager.find(".user-table"),headers:[{name:"序号",width:60},{name:"用户名称",width:120},{name:"姓名",width:100},{name:"手机号",width:100},{name:"角色",width:110},{name:"状态",width:100},{name:"操作",width:120}],renderTrs:[function(t,e,n){return n.pageSize*(n.current-1)+(e+1)},{renderTd:function(t){return'<td style="padding-left: 35px;text-align: left">'+(0,s.default)(t.username)+"</td>"}},{renderTd:function(t){return'<td style="padding-left: 35px;text-align: left">'+(0,s.default)(t.name)+"</td>"}},function(t){return(0,s.default)(t.phone)},function(t){return(0,s.default)(t.roleName)},function(t){return'<span style="color: '+(t.enable?"green":"red")+'">'+(t.enable?"启用":"禁用")+"</span>"},function(t,e){return'<a data-index="'+e+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-index="'+e+'" class="btn btn-link delete-btn reset-password"><i class="fa fa-unlock-alt"></i>重置密码</a>'}],pagination:{pageSize:b,show:!0,current:1,onChange:function(e){var n=e.current;t._getList(n)},isJump:!0},storage:!0}),new o.default({input:t.pager.find(".keyword-c"),fn:function(e){t.condition.keyword=e,t._getList(1,"search")}}),t.roleSelect=new u.default({obj:t.pager.find(".role-select"),renderLi:function(t){return t.name},list:[{name:"不限",id:""}].concat(y(v.default.roleDic||[])),onSelectChange:function(e){t.condition.roleId=e?e.id:"",t._getList(1,"search")},hasReset:!0}),p.emitter.on("roleDicChange",function(e){t.roleSelect.renderList([{name:"不限",id:""}].concat(y(e)))}),t.modal=new f.default({}),t.modal2=new h.default({})},t.id="usersPage",t.docTitle="账户管理",t.html=i.default,t.condition={keyword:"",roleId:""},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=w},RMiq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("akKl")),a=r(n("7D5N"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._showPage(t.state.code)},t._showPage=function(e){t.outer.find(".error-page-sc").hide().filter(".page"+e).show()},t._bindEvent=function(){var e=t;t.pager.on("click",".btn-main",function(){e.router.replace({url:window.basePath})})},t._initComponent=function(){},t.id="pageErrorPage",t.docTitle="错误提示",t.html=i.default,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=o},RYhR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return void 0===t||null===t?e:t}},RfmY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("WhZ1");var r=s(n("id4V")),o=s(n("9vu6"));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){var n=this,i=e.outer,a=e.headers,r=void 0===a?[]:a,o=e.renderHeader,s=e.dataSource,c=e.renderTr,d=void 0===c?function(){}:c,l=e.renderTrs,u=e.pagination,f=void 0===u?{show:!1}:u,h=e.storage,p=void 0!==h&&h,m=e.loading,v=void 0===m||m,g=e.singleTr,y=void 0===g||g,b=e.emptyMsg,w=void 0===b?"暂无数据":b,_=e.afterRender,x=void 0===_?function(){}:_,k=e.sorter,P=void 0===k?function(){}:k,D=e.renderEmpty;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.removeItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";return new window.Promise(function(i){var a=n.table.find("tbody tr").eq(t);a.addClass("tr-removing-"+e),setTimeout(function(){a.addClass("tr-removed-"+e)},10),setTimeout(i,400,"yes")})},this.updateItem=function(t){var e=n.table.find("tbody tr").eq(t);setTimeout(function(){e.addClass("tr-updated")},10),setTimeout(function(){e.removeClass("tr-updated")},3e3)},this.outer=i,this.headers=r,this.renderHeader=o,this.dataSource=s,this.renderTr=d,this.renderTrs=l,this.loading=v,this.pagination=this._formatPagination(f),this.storage=p,this.singleTr=!!y,this.emptyMsg=w,this.afterRender=x,this.sorter=P,this.renderEmpty=D,!(i instanceof $)||i instanceof $&&1!==i.length)throw new Error("Table param outer must be one length jqueryDom");if(!this.renderHeader&&!this.headers.length)throw new Error("Table param header must be an Array");if("function"!=typeof this.renderTr)throw new Error("Table param renderTr must be a function");if("function"!=typeof this.afterRender)throw new Error("Table param afterRender must be a function");if("function"!=typeof this.sorter)throw new Error("Table param sorter must be a function");this.outer.addClass("rel").css("overflow-x","hidden"),this.table=null,this.paginarC=null,this.paginar=null,this.noMsgC=null,this.loadingC=null,this.dataSourceMap={},this._init()}return a(t,[{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}},{key:"_formatPagination",value:function(t){var e=t.show,n=t.pageSize,i=t.current,a=t.total,r=t.isJump,o=t.position,s=t.onChange;return e?(i=i||1,{show:e,pageSize:n=n||this.dataSource.length,current:i,total:a,isJump:r=r||!1,position:o=o||"right",loading:this.loading,onChange:s}):t}},{key:"setData",value:function(t){var e=t.dataSource,n=t.pagination,i=void 0===n?this.pagination:n,a=t.conditionChange,r=void 0!==a&&a;if(this.dataSource=e,this.paginar){var o=i.show,s=void 0===o||o,c=i.current,d=i.pageSize,l=i.total,u=this.pagination,f=u.show,h=u.current,p=u.pageSize,m=u.total;(!c||c<1)&&(c=1),(!d||d<1)&&(d=p),l<0&&(l=m),s===f&&c===h&&d===p&&l===m||(this.pagination=$.extend(this.pagination,{show:Boolean(s),current:Number(c),pageSize:Number(d),total:Number(l)}),this.paginar.setPageData(this.pagination)),(l===m||1===c||r)&&this.storage&&(r&&(this.dataSourceMap={}),this.dataSourceMap["current"+c]=this.dataSource)}return this._renderTable(),this.loading&&this.paginar&&this.paginar.toggleLoading(),new window.Promise(function(t){t()})}},{key:"resetSort",value:function(){this.outer.find(".table-sorter").removeClass("up down")}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"getRowData",value:function(t){return this.dataSource[t]}},{key:"getPagination",value:function(){return this.pagination}},{key:"_getHtml",value:function(t){return'<div class="ys-table-scroll-c"><table class="ys-table'+(this.singleTr?" single-tr":"")+'">\n    <thead>\n    '+t+'\n    </thead>\n    <tbody>\n    </tbody>\n</table></div><div class="ys-table-no-msg-c">'+this._getNomsgHtml()+"</div>"+this._getLoadingHtml()+(this.pagination.show?'<div class="ys-paginar"></div>':"")}},{key:"_getNomsgHtml",value:function(){return"function"==typeof this.renderEmpty?this.renderEmpty():'<div class="ys-table-no-msg">'+this.emptyMsg+"</div>"}},{key:"_getLoadingHtml",value:function(){return'<div class="ys-table-loading"><span class="ys-table-loading-span">'+(0,o.default)("small")+"</span>数据加载中...</div>"}},{key:"_getThead",value:function(){var t=this;return"function"==typeof this.renderHeader?this.renderHeader():"<tr>\n    "+this.headers.map(function(e,n){return'<th width="'+e.width+'" '+(e.colspan?'colspan="'+e.colspan+'"':"")+">"+e.name+t._renderSorter(e.sorter,n)+"</th>"}).join("")+"\n</tr>"}},{key:"_renderSorter",value:function(t,e){return t?'<div class="table-sorter" data-index="'+e+'"><i class="fa fa-sort-up"></i><i class="fa fa-sort-down"></i></div>':""}},{key:"_getTbody",value:function(){var t=this;return this.dataSource.map(function(e,n){return t.renderTrs&&t.renderTrs.length?"<tr>"+t.renderTrs.map(function(i,a){var r=void 0;if("function"==typeof i)r=i(e,n,t.pagination,a);else if("function"==typeof i.renderTd)return i.renderTd(e,n,t.pagination,a);return"<td>"+r+"</td>"})+"</tr>":t.renderTr(e,n,t.pagination)}).join("")}},{key:"_renderTable",value:function(){if(!this.dataSource)return this.table.hide(),this.noMsgC.hide(),this.paginarC.hide(),void this.loadingC.show();this.loadingC.hide(),this.noMsgC.toggle(!this.dataSource.length),this.paginarC.toggle(!!this.dataSource.length&&this.pagination.show),this.table.toggle(!!this.dataSource.length),this.dataSource.length&&(this.table.find("tbody").html(this._getTbody()),this.afterRender())}},{key:"_renderHtml",value:function(){var t=this;this.outer.html(this._getHtml(this._getThead())),this.table=this.outer.find(".ys-table"),this.noMsgC=this.outer.find(".ys-table-no-msg-c"),this.paginarC=this.outer.find(".ys-paginar"),this.loadingC=this.outer.find(".ys-table-loading"),this._renderTable(),this.pagination.show&&(this.paginar=new r.default(i({outer:this.paginarC},this.pagination,{onChange:function(e){var n=e.current,i=e.pageSize,a=e.total;t.pagination.current=n,t.storage&&t.dataSourceMap["current"+n]?(t.dataSource=t.dataSourceMap["current"+n],t._renderTable(),t.loading&&t.paginar.toggleLoading()):t.pagination.onChange({current:n,pageSize:i,total:a})}})))}},{key:"_bindEvent",value:function(){var t=this;this.outer.on("click",".table-sorter",function(){var e=t.outer.find(".table-sorter"),n=$(this),i=n.data("index"),a="";n.hasClass("down")?(e.removeClass("up down"),n.addClass("up"),a=1):n.hasClass("up")?(e.removeClass("up down"),a=0):(e.removeClass("up down"),n.addClass("down"),a=-1),t.sorter({sortName:t.headers[i].sorter.type,type:a})})}}]),t}();e.default=c},Swsl:function(t,e){},THgg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=n("0iPh"),o=(i=r)&&i.__esModule?i:{default:i};e.default=function(t){return t.url&&"/"!==t.url[0]&&t.url.indexOf("http")&&(t.url=window.basePath+t.url),o.default.ajax(a({},t,{success:function(e){10002002===e.errorCode?(localStorage.removeItem("islogin"),localStorage.getItem("relogin")||(window.location.href=window.basePath,localStorage.setItem("relogin",1))):(localStorage.removeItem("relogin"),window.localStorage.removeItem("privilege")),"function"==typeof t.success&&t.success(e)}}))}},"Tht/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=p(n("PJgW")),a=p(n("7D5N")),r=n("/1Qr"),o=p(n("z+yy")),s=p(n("RfmY")),c=p(n("hPQL")),d=p(n("RYhR")),l=p(n("THgg")),u=p(n("gntN")),f=p(n("eI+r")),h=p(n("MQo1"));function p(t){return t&&t.__esModule?t:{default:t}}var m=10,v=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._getList(1)},t._addOrEdit=function(e){var n=e.id,i=e.name,a=e.goodsType,r=e.priceType,s=e.pageType,c={name:i,privileges:[a,r].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(s.split(","))).map(function(t){return{id:t}})};n&&(c.id=n),(0,l.default)({url:"role/"+(n?"modify":"add"),type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(c),success:function(e){e.success?(t.modal.modalHide(),(0,f.default)({type:"success",title:(n?"编辑":"添加")+"角色成功",msg:"已成功"+(n?"编辑":"添加")+"角色："+i}),t._getList(1,"search"),o.default.roleDicPromise=null):(0,u.default)({msg:e.errorMsg||"角色"+(n?"编辑":"添加")+"失败，请重试！"})}})},t._deleteRole=function(e){(0,l.default)({url:"role/delete/"+e.id,success:function(n){r.floatModal.hide(),n.success?((0,f.default)({type:"success",title:"删除角色成功",msg:"已成功删除角色："+e.name}),t._getList(1,"delete"),o.default.roleDicPromise=null):(0,u.default)({msg:n.errorMsg||"角色删除失败，请重试！"})}})},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.table.getPagination().current),"delete"===n&&(e=t.table.getPagination().current,1===t.table.getDataSource().length&&e--,e=e||1),"delete"!==n&&(t.condition.activeId=""),(0,l.default)({url:"role/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({roleName:t.condition.keyword,searchPage:{pageIndex:e-1,pageSize:m},ts:Date.now()}),success:function(i){if(i.success&&i.data&&i.data.searchPage){var a=i.data.searchPage.pageData||[];t.table.setData({dataSource:a,pagination:{current:e,total:i.data.totalRecord},conditionChange:!!n})}else t.table.setData({dataSource:[]})}})},t._getQX=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1212212;return t.filter(function(t){return t.code.indexOf("_"+e)>-1||t.code.indexOf("_"+n)>-1}).map(function(t){return t.displayName}).join(",")},t._bindEvent=function(){var e=t;t.pager.on("click",".add-role",function(){e.modal.setData({fn:function(t){e._addOrEdit(t)}}).modalShow()}).on("click",".edit-item",function(){var t=e.table.getRowData($(this).data("index"));e.modal.setData({fn:function(t){e._addOrEdit(t)},data:t,type:"edit"}).modalShow()}).on("click",".delete-item",function(){var t=e.table.getRowData($(this).data("index"));r.floatModal.show({obj:$(this),side:3,title:"确认删除本角色？",fn:function(){e._deleteRole(t)}})})},t._initComponent=function(){t.table=new s.default({outer:t.pager.find(".role-table"),headers:[{name:"序号",width:60},{name:"角色名称",width:120},{name:"查看商品权限",width:100},{name:"查看价格权限",width:100},{name:"功能权限",width:250},{name:"操作",width:120}],renderTrs:[function(t,e,n){return n.pageSize*(n.current-1)+(e+1)},function(t){return(0,d.default)(t.name)},function(e){return t._getQX(e.privileges,"CATEGORY")},function(e){return t._getQX(e.privileges,"PRICE")},{renderTd:function(e){return'<td style="padding-left: 35px;text-align: left">'+t._getQX(e.privileges,"MANAGE","QUERY")+"</td>"}},function(t,e){return'<a data-index="'+e+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a><a data-index="'+e+'" class="btn btn-link delete-btn delete-item"><i class="fa fa-trash-o"></i>删除</a>'}],pagination:{pageSize:m,show:!0,current:1,onChange:function(e){var n=e.current;t._getList(n)},isJump:!0},storage:!0}),new c.default({input:t.pager.find(".keyword-c"),fn:function(e){t.condition.keyword=e,t._getList(1,"search")}}),t.modal=new h.default({})},t.id="rolePage",t.docTitle="角色管理",t.html=i.default,t.condition={keyword:""},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=v},WU09:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("Q0Q/");var i,a=n("0iPh"),r=(i=a)&&i.__esModule?i:{default:i};var o=function(){var t=this;this._renderHtml=function(){t.obj.html('<div class="ys-check-drop-c">\n<div class="ys-check-drop-btn"><span class="ys-check-drop-value">'+t.placeholder+'</span><i class="fa fa-caret-down"></i></div>\n<div class="ys-check-drop-list-o">\n<div class="ys-check-drop-list-c" style="max-height: 260px;overflow-y:auto"></div>\n<div class="flexbox aic">\n    <div class="ys-check-drop-cbtn">确认选择</div><div class="ys-check-drop-abtn">全选</div>\n</div>\n</div>\n</div>'),t.outer=t.obj.find(".ys-check-drop-c"),t.drop=t.outer.find(".ys-check-drop-list-o"),t.valueC=t.outer.find(".ys-check-drop-value"),t.renderList()},this.renderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.list;return t.list=e,t.drop.find(".ys-check-drop-list-c").html(['<div class="ys-check-drop-i '+(t.checkIds.length?"":"checked")+'" data-index="-1">不限</div>'].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e.map(function(e,n){return'<div class="ys-check-drop-i '+(t.checkIds.indexOf(n)>-1?"checked":"")+'" data-index="'+n+'">'+t.renderLi(e,n)+"</div>"})))),t.checkItems=t.drop.find(".ys-check-drop-i"),t.checkDic=t.list.map(function(e,n){return t.checkIds.indexOf(n)>-1}),t},this.reset=function(){[].forEach.call(t.checkItems,function(e,n){t.checkItems.eq(n).removeClass("checked"),t.checkDic[n]=!1}),t.checkItems.eq(0).addClass("checked"),t.valueC.text(t.placeholder).removeClass("has-value")},this.toggleDrop=function(e){if("open"===e){if(t.isOpen)return;t.outer.addClass("ys-open")}else if("close"===e){if(!t.isOpen)return;t.outer.removeClass("ys-open")}else t.outer.toggleClass("ys-open");t.isOpen=!t.isOpen,t.outer.hasClass("ys-open")?t._openDrop():t._closeDrop()},this._openDrop=function(){t.drop.addClass("open-start"),setTimeout(function(){t.drop.addClass("opening"),setTimeout(function(){t.drop.removeClass("open-start").addClass("open-end")},0)},0)},this._closeDrop=function(){t.drop.removeClass("open-end").addClass("open-start"),setTimeout(function(){t.drop.removeClass("opening"),setTimeout(function(){t.drop.removeClass("open-start")},0)},100)},this.getChecked=function(){var e=t.list.reduce(function(e,n,i){return t.checkDic[i]&&e.push(i),e},[]);return t.valueC.text(e.length?t.renderLi(t.list[e[0]],e[0])+"等"+e.length+"项":t.placeholder).toggleClass("has-value",e.length>0),e},this.getCheckedItem=function(){return t.list.filter(function(e,n){return!!t.checkDic[n]})},this.setIndex=function(e){t.valueC.text(e.length?t.renderLi(t.list[e[0]],e[0])+"等"+e.length+"项":t.placeholder).toggleClass("has-value",e.length>0),t.checkDic=t.checkDic.map(function(t,n){return e.indexOf(n)>-1}),[].forEach.call(t.checkItems,function(e,n){t.checkItems.eq(n).toggleClass("checked",t.checkDic[n-1])}),t.checkItems.eq(0).toggleClass("checked",!e.length)},this._bindEvent=function(){var e=t;t.outer.on("click",".ys-check-drop-btn",function(){e.toggleDrop()}).on("click",".ys-check-drop-i",function(){var t=(0,r.default)(this).data("index");-1===t?([].forEach.call(e.checkItems,function(t,n){e.checkItems.eq(n).removeClass("checked"),e.checkDic[n]=!1}),e.checkItems.eq(0).addClass("checked")):(e.checkItems.eq(t+1).toggleClass("checked"),e.checkDic[t]=e.checkItems.eq(t+1).hasClass("checked"),e.checkItems.eq(0).toggleClass("checked",!e.checkDic.some(function(t){return t})))}).on("click",".ys-check-drop-cbtn",function(){e.onSelectChange(e.getChecked(),e.getCheckedItem()),e.toggleDrop("close")}).on("click",".ys-check-drop-abtn",function(){[].forEach.call(e.checkItems,function(t,n){e.checkItems.eq(n).addClass("checked"),e.checkDic[n]=!0}),e.checkItems.eq(0).removeClass("checked"),e.onSelectChange(e.getChecked(),e.getCheckedItem()),e.toggleDrop("close")}),(0,r.default)(document).on("mousedown",function(t){0===(0,r.default)(t.target).closest(".ys-open").length&&e.isOpen&&(e.onSelectChange(e.getChecked(),e.getCheckedItem()),e.toggleDrop("close"))})},this._init=function(){t._renderHtml(),t._bindEvent()}};e.default=function t(e){var n=this,i=e.obj,a=e.renderLi,s=void 0===a?function(t){return t}:a,c=e.list,d=void 0===c?[]:c,l=e.placeholder,u=void 0===l?"不限":l,f=e.checkIds,h=void 0===f?"":f,p=e.onSelectChange,m=void 0===p?function(){}:p;e.pickAll;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this),!(i instanceof r.default)||i instanceof r.default&&1!==i.length)throw new Error("CheckDrop params obj must be an one length jqueryDom");this.obj=i,this.renderLi=s,this.placeholder=u,this.list=d,this.checkIds=h?h.split(","):[],this.checkDic=this.list.map(function(t,e){return n.checkIds.indexOf(e)>-1}),this.onSelectChange=m,this._init()}},Wb1w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n("JMqE")),a=l(n("7D5N")),r=l(n("RfmY")),o=l(n("1WMk")),s=l(n("THgg")),c=l(n("qiY8")),d=n("/1Qr");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._reset(),t._getDetail()},t._reset=function(){t.model.reset(),t.data={},t.pager.find(".label-c").html(""),t.pager.find(".basic-img-c").html(""),t.pager.find(".channel-c").empty(),t.rankTable.setData({dataSource:[]}),t.discountTable.setData({dataSource:[]}),t.pager.find('td[data-name="suggestPrice"]').text(""),t.pager.find('td[data-name="auditPrice"]').text("")},t._getDetail=function(){(0,s.default)({url:"product/getAllInfo/"+t.state.id,type:"post",success:function(e){if(e.success){t.data.productPurchasePriceList=e.data.latestPurchasePriceList,t.model.setData(e.data.productBasicInfo),t.data.productBasicInfo=e.data.productBasicInfo,t.pager.find(".label-c").html(e.data.productBasicInfo.labels?e.data.productBasicInfo.labels.split(",").map(function(t){return'<div class="label-tag">'+t+"</div>"}):""),t.pager.find(".basic-img-c").html(e.data.productBasicInfo.images?e.data.productBasicInfo.images.split(",").map(function(t,e){return'<img class="view-img" data-index="'+e+'" src="'+(d.imgPath+t)+'" />'}):"");var n=e.data.latestPurchasePriceList.reduce(function(t,e){var n={id:e.channelId,name:e.channelName};return t[n.id]||(t[n.id]={channel:n,list:[]}),t[n.id].list.push(e),t},{});Object.keys(n).length?Object.keys(n).forEach(function(e){t._addChannel(n[e].channel,n[e].list)}):t.pager.find(".channel-c").html('<div class="flexbox aic jcc" style="color:#999">还未录入进货价格</div>'),t.data.productDiscountPriceList=e.data.discountPriceList||[],t.data.productSalePrice=e.data.suggestSalePrice||{},t.data.productRankPriceList=e.data.rankPriceList||[],t.rankTable.setData({dataSource:t.data.productRankPriceList}),t.discountTable.setData({dataSource:t.data.productDiscountPriceList}),t.pager.find('td[data-name="suggestPrice"]').text(t.data.productSalePrice.suggestPrice),t.pager.find('td[data-name="auditPrice"]').text(t.data.productSalePrice.auditPrice)}}}),(0,s.default)({url:"product/detail/getByProductId/"+t.state.id,type:"post",success:function(e){e.success?(t.data.detail=e.data.detailInfo,t.pager.find(".product-detail").html(e.data.detailInfo)):t.pager.find(".product-detail").html('<div class="flexbox aic jcc" style="color:#999">还未录入商品详细信息</div>')}})},t._addChannel=function(e,n){t.data.productPurchasePriceObj||(t.data.productPurchasePriceObj={}),new window.Promise(function(t){e.name?t():(0,s.default)({url:"channel/get/"+e.id,type:"post",success:function(n){n.success&&(e=n.data,t())}})}).then(function(){t.data.productPurchasePriceObj[e.id]={channel:e,list:n},t.pager.find(".channel-c").append(t._getChannelHtml(e)),t.data.productPurchasePriceObj[e.id].table=new r.default({outer:t.pager.find('[data-cid="'+e.id+'"] .channel-price-table'),headers:[{name:"序号",width:100},{name:"采购价格（元）",width:200},{name:"进货日期",width:200},{name:"入库日期",width:200}],dataSource:t.data.productPurchasePriceObj[e.id].list,renderEmpty:function(){return""},renderTrs:[function(t,e){return e+1},function(t){return t.purchasePrice},function(t){return(0,o.default)(t.purchaseDate)},function(t){return(0,o.default)(t.instoreDate)}]}),setTimeout(function(){t.data.productPurchasePriceObj[e.id].table.setData({dataSource:t.data.productPurchasePriceObj[e.id].list})},0)})},t._getChannelHtml=function(e){return'<div class="channel-i-c" data-cid="'+e.id+'">\n    <div class="flexbox aic channel-header">\n        <div class="channel-index">'+Object.keys(t.data.productPurchasePriceObj).length+'</div>\n        <div class="channel-name flex1">'+e.name+'</div>\n    </div>\n    <div class="flexbox aic channel-d-c">\n        <div class="channel-item"><div class="channel-t">联络人:</div><div class="channel-v">'+e.contactorName+'</div></div>\n        <div class="channel-item"><div class="channel-t">手机:</div><div class="channel-v">'+e.contactorPhone+'</div></div>\n        <div class="channel-item"><div class="channel-t">QQ</div><div class="channel-v">'+e.contactorQq+'</div></div>\n    </div>\n    <div class="flexbox aic channel-d-c">\n        <div class="channel-item"><div class="channel-t">微信:</div><div class="channel-v">'+e.contactorWechat+'</div></div>\n        <div class="channel-item"><div class="channel-t">邮箱:</div><div class="channel-v">'+e.contactorEmail+'</div></div>\n        <div class="channel-item"><div class="channel-t">地址:</div><div class="channel-v">'+e.contactorAddress+'</div></div>\n    </div>\n    <div class="channel-price-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n</div>'},t._bindEvent=function(){var e=t;t.pager.on("click",".jump-to-basic",function(){e.router.push({page:"product-input-basic"})}).on("click",".ys-back-btn, cancel-btn",function(){e.router.pop()}).on("click",".view-img",function(){var t=e.data.productBasicInfo.images?e.data.productBasicInfo.images.split(","):[];t.length&&d.imgViewer.show(t,$(this).data("index"))})},t._initComponent=function(){t.model=new c.default({controller:"basic2"}),t.rankTable=new r.default({outer:t.pager.find(".rank-table"),headers:[{name:"序号",width:100},{name:"分段数量",width:300},{name:"分段售价（元）",width:300}],dataSource:t.data.productRankPriceList||[],renderEmpty:function(){return'<div class="flexbox aic jcc" style="color:#999">还未录入分段价格</div>'},renderTrs:[function(t,e){return e+1},function(t){return t.rankAmount},function(t){return t.rankPrice}]}),t.discountTable=new r.default({outer:t.pager.find(".discount-table"),headers:[{name:"序号",width:100},{name:"入库时间",width:300},{name:"折扣",width:300}],dataSource:t.data.productDiscountPriceList||[],renderEmpty:function(){return'<div class="flexbox aic jcc" style="color:#999">还未录入折扣价格</div>'},renderTrs:[function(t,e){return e+1},function(t){return(0,o.default)(t.instoreDate)},function(t){return t.discountRate}]})},t.id="productInfoPage",t.docTitle="商品预览",t.html=i.default,t.data={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},WhZ1:function(t,e){},WmcS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">商品录入</div>\n        <div class="c-i-c" style="width: 300px;margin-left: 20px">\n            <div class="c-i-t">商品编码：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" placeholder="请输入商品编码" />\n            </div>\n        </div>\n        <div class="c-i-c" style="width: 160px;">\n            <div class="c-i-d price-select">\n            </div>\n        </div>\n        <div class="c-i-c" style="width: 160px">\n            <div class="c-i-d detail-select">\n            </div>\n        </div>\n        <div class="flex1"></div>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="flexbox jcfe" style="margin-bottom: 10px">\n        <button class="btn btn-ys-default jump-to-basic" style="margin-right: 20px"><i class="fa fa-plus-circle"></i>基本信息录入</button>\n        <button class="btn btn-ys-default upload-excel" style="margin-right: 20px"><i class="fa fa-file-excel-o"></i>基本信息批量导入</button>\n        <button class="btn btn-ys-default price-btn"><i class="fa fa-cny"></i>价格录入</button>\n        <button style="margin-left: 20px" class="btn btn-ys-default detail-btn"><i class="fa fa-list-ol"></i>详情录入</button>\n    </div>\n    <div class="common-table-outer product-table2 product-table"></div>\n</div>\n</div>'}},X0eP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chooseModal=void 0;var i,a=n("4RLy"),r=(i=a)&&i.__esModule?i:{default:i};e.chooseModal=new r.default({})},X4PT:function(t,e){},"YUB/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">渠道管理</div>\n        <div class="c-i-c" style="width: 300px;margin-left: 20px">\n            <div class="c-i-t">渠道名称：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" name="channelName" placeholder="请输入渠道名称" />\n            </div>\n        </div>\n        <div class="c-i-c" style="width: 300px;margin-left: 10px">\n            <div class="c-i-t">联系人：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" name="contactorName" placeholder="请输入联系人名称" />\n            </div>\n        </div>\n        <div class="c-i-c" style="margin-left: 10px">\n            <div class="c-i-t">渠道经理：</div>\n            <div class="c-i-d jl-select" style="width: 130px">\n            </div>\n        </div>\n        <div class="flex1"></div>\n        <button class="btn btn-ys-default add-channel"><i class="fa fa-plus-circle"></i>添加渠道</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer channel-table"></div>\n</div>\n</div>'}},"Z+K2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=l(n("CWZd")),r=l(n("0iPh")),o=l(n("gntN")),s=l(n("IZxf")),c=l(n("eUm7")),d=(l(n("awqy")),n("/1Qr"));function l(t){return t&&t.__esModule?t:{default:t}}var u="tagModal",f=function(t){function e(t){var n=t.title,i=void 0===n?"添加标签":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(c.setData=function(t){var e=t.type,n=void 0===e?"add":e,i=t.fn,a=t.data,r=void 0===a?{}:a;return c.setTitle("add"===n?"新增标签":"编辑标签"),c.setConfirmFn(i),"add"===n?c._reset():(c.data=r,c.modal.find('input[name="name"]').val(c.data.name),c.modal.find('input[name="tagNo"]').val(c.data.labelNo),c.radio.setChecked(d.labelStatusList.findIndex(function(t){return t.id===c.data.enable})-1)),c},c.init=function(t){c.type=t,c.tplList=[],c._getTplData(!0),c._getTplList()},c._reset=function(){c.modal.find('input[name="name"]').val(""),c.modal.find('input[name="tagNo"]').val(""),c.radio.reset(),c.data={}},c._checkData=function(){return c.data.name=c.modal.find('input[name="name"]').val().trim(),c.data.name?(c.data.labelNo=c.modal.find('input[name="tagNo"]').val().trim(),c.data.labelNo?(0,s.default)(c.data.labelNo)?((0,o.default)({msg:"标签编号不能包含汉字"}),!1):!(c.data.enable<0)||((0,o.default)({msg:"请选择标签状态"}),!1):((0,o.default)({msg:"请输入标签编号"}),!1)):((0,o.default)({msg:"请输入标签名称"}),!1)},c.title=i,c.id=u,c.confirmFn=r,"function"!=typeof c.confirmFn)throw new Error("TagModal param confirmFn must be a function");return c.data={},c._init(),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 600px;"})),this.modal=(0,r.default)("#"+this.id),this.radio=new c.default({obj:this.modal.find(".status-radio"),list:d.labelStatusList.slice(1),onChange:function(e,n){t.data.enable=n.id}})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">标签名称：</div>\n            <div class="modal-c-i-c"><input name="name" type="text" placeholder="输入4～6个汉字" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">标签编码：</div>\n            <div class="modal-c-i-c"><input name="tagNo" type="text" placeholder="输入标签编码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">标签状态：</div>\n            <div class="modal-c-i-c status-radio"></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=f},Z2H6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("tU91");var i,a=n("0iPh"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.msg&&1===t.obj.length){t.side=t.side||3,"INPUT"===t.obj[0].tagName&&t.obj.focus();var e="myTips"+Math.round(1e7*Math.random()),n=function(t,e,n){return'<div id="'+e+'" class="ys-tips-outer side'+n+'">'+t+"</div>"}(t.msg,e,t.side);(0,r.default)("body").append(n);var i=(0,r.default)("#"+e),a=void 0,o=void 0,s=t.obj[0].clientWidth,c=t.obj[0].clientHeight,d=t.obj.offset(),l=d.left,u=d.top,f=i.width()+20,h=i.height()+10;switch(t.side-0){case 1:a=l,o=u-h-10;break;case 2:a=l+s+10,o=u+c/2-h/2;break;case 3:a=l,o=u+c+10;break;case 4:a=l-f-10,o=u+c/2-h/2;break;default:a=l,o=u-h-10}i.css({left:a,top:o}).fadeIn(300).delay(t.time||2e3).fadeOut(300),setTimeout(function(){i.remove()},t.time+1e3||3e3)}}},ZTeE:function(t,e){},aDY6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.percentToFixed=e.toPercent=e.toFixed=void 0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("tMb8"));var a=e.toFixed=function(t,e){return i.isPosInteger(e)||(e=parseInt(e)||2),i.isNumber(t)?(t-0).toFixed(e):""};e.toPercent=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return i.isPosInteger(e)||(e=parseInt(e)||2),i.isNumber(t)?(100*t).toFixed(e)+"%":n},e.percentToFixed=function(t,e){return i.isPosInteger(e)||(e=parseInt(e)||2),i.isNumber(parseFloat(t))&&t!==1/0&&t!==-1/0?a(parseFloat(t),e)+"%":""}},aiI0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=y(n("6pZz")),o=y(n("7D5N")),s=y(n("THgg")),c=y(n("1WMk")),d=y(n("gntN")),l=y(n("o9gJ")),u=y(n("RfmY")),f=y(n("eI+r")),h=y(n("qiY8")),p=n("/1Qr"),m=y(n("Q+qa")),v=y(n("7Qxa")),g=n("X0eP");function y(t){return t&&t.__esModule?t:{default:t}}function b(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var w=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._reset(),t.state.id?(t.data.productId=t.state.id,t.pager.find(".open-product-modal").hide(),t._changeSection(1),t._getDetail()):t._changeSection(1)},t._changeSection=function(e){t.pager.find(".step-item").removeClass("current").eq(e-1).addClass("current"),t.pager.find(".step-section").removeClass("current").eq(e-1).addClass("current")},t._reset=function(){t.pager.find(".open-product-modal").show(),t.pager.find(".basic-table").hide(),t.pager.find(".btn-group1").hide(),t.pager.find(".basic-img-c").empty(),t.pager.find(".channel-c").empty(),t.data={}},t._checkData=function(){return!0},t._getDetail=function(){(0,s.default)({url:"product/getAllInfo/"+t.data.productId,type:"post",success:function(e){if(e.success){t.data.productPurchasePriceList=e.data.latestPurchasePriceList,t.state.id&&(t.currentImgs=e.data.productBasicInfo.images?e.data.productBasicInfo.images.split(","):[],t.model.setData(e.data.productBasicInfo),t.pager.find(".basic-img-c").html(e.data.productBasicInfo.images.split(",").map(function(t,e){return'<img class="view-img" data-index="'+e+'" src="'+(p.imgPath+t)+'" />'})),t.pager.find(".basic-table").show(),t.pager.find(".btn-group1").show());var n=e.data.latestPurchasePriceList.reduce(function(t,e){var n={id:e.channelId,name:e.channelName};return t[n.id]||(t[n.id]={channel:n,list:[]}),t[n.id].list.push(e),t},{});Object.keys(n).forEach(function(e){t._addChannel(n[e].channel,n[e].list,!0)}),t.data.productDiscountPriceList=e.data.discountPriceList,t.data.productSalePrice=e.data.suggestSalePrice,t.data.productRankPriceList=e.data.rankPriceList}}})},t._addChannel=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2];if(t.data.productPurchasePriceObj||(t.data.productPurchasePriceObj={}),t.data.productPurchasePriceObj[e.id])return(0,d.default)({msg:"重复添加相同渠道"});new window.Promise(function(t){e.name?t():(0,s.default)({url:"channel/get/"+e.id,type:"post",success:function(n){n.success&&(e=n.data,t())}})}).then(function(){t.data.productPurchasePriceObj[e.id]={channel:e,list:n},t.pager.find(".channel-c").append(t._getChannelHtml(e)),t.data.productPurchasePriceObj[e.id].table=new u.default({outer:t.pager.find('[data-cid="'+e.id+'"] .channel-price-table'),headers:[{name:"序号",width:100},{name:"采购价格（元）",width:200},{name:"进货日期",width:200},{name:"入库日期",width:200},{name:"操作",width:200}],dataSource:t.data.productPurchasePriceObj[e.id].list,renderEmpty:function(){return""},renderTrs:[function(t,e){return e+1},function(t){return(0,p.formatPrice)(t.purchasePrice)},function(t){return(0,c.default)(t.purchaseDate)},function(t){return(0,c.default)(t.instoreDate)},function(t,n){return'<a class="btn btn-link remove-price" data-id="'+e.id+"-"+n+'">移除此条价格</a>'}]}),t.pager.find(".to-step3").toggle(!!Object.keys(t.data.productPurchasePriceObj).length),i&&setTimeout(function(){t.data.productPurchasePriceObj[e.id].list=n,t.data.productPurchasePriceObj[e.id].table.setData({dataSource:t.data.productPurchasePriceObj[e.id].list})},0)})},t._getChannelHtml=function(e){return'<div class="channel-i-c" data-cid="'+e.id+'">\n    <div class="flexbox aic channel-header">\n        <div class="channel-index">'+Object.keys(t.data.productPurchasePriceObj).length+'</div>\n        <div class="channel-name flex1">'+e.name+'</div>\n        <button class="btn btn-link remove-channel">移除该渠道</button>\n    </div>\n    <div class="flexbox aic channel-d-c">\n        <div class="channel-item"><div class="channel-t">联络人:</div><div class="channel-v">'+e.contactorName+'</div></div>\n        <div class="channel-item"><div class="channel-t">手机:</div><div class="channel-v">'+e.contactorPhone+'</div></div>\n        <div class="channel-item"><div class="channel-t">QQ</div><div class="channel-v">'+e.contactorQq+'</div></div>\n    </div>\n    <div class="flexbox aic channel-d-c">\n        <div class="channel-item"><div class="channel-t">微信:</div><div class="channel-v">'+e.contactorWechat+'</div></div>\n        <div class="channel-item"><div class="channel-t">邮箱:</div><div class="channel-v">'+e.contactorEmail+'</div></div>\n        <div class="channel-item"><div class="channel-t">地址:</div><div class="channel-v">'+e.contactorAddress+'</div></div>\n    </div>\n    <div class="channel-price-table" style="padding: 0 20px;margin: 20px 0 10px"></div>\n    <button class="btn btn-ys-default add-new-price">添加一条采购记录</button>\n</div>'},t._bindEvent=function(){var e=t;t.pager.on("click",".ys-back-btn,.cancel-btn",function(){e.data.productPurchasePriceObj?p.confirmModal.setData({title:"确认返回",msg:"你有填写的信息未保存，是否返回？",confirmFn:function(){p.confirmModal.modalHide(),e.router.pop()}}).modalShow():e.router.pop()}).on("click",".back-step1",function(){e.data.productPurchasePriceObj?p.confirmModal.setData({title:"返回上一步",msg:"你有填写的信息未保存，是否返回上一步？",confirmFn:function(){p.confirmModal.modalHide(),e._changeSection(1),delete e.data.productPurchasePriceList,delete e.data.productPurchasePriceObj,e.pager.find(".open-product-modal").toggle(!e.state.id),e.pager.find(".btn-group1").show(),e.pager.find(".channel-c").empty()}}).modalShow():(delete e.data.productPurchasePriceList,delete e.data.productPurchasePriceObj,e.pager.find(".open-product-modal").show(),e.pager.find(".btn-group1").show(),e.pager.find(".channel-c").empty(),e._changeSection(1))}).on("click",".to-step2",function(){e._changeSection(2),e.pager.find(".open-product-modal").hide(),e.pager.find(".btn-group1").hide(),!e.state.id&&e._getDetail()}).on("click",".open-product-modal",function(){g.chooseModal.setData({fn:function(t){g.chooseModal.modalHide(),e.data.productId=t.id,e.model.setData(t),e.currentImgs=t.imagePaths[0]?t.imagePaths[0].split(","):[],e.pager.find(".basic-img-c").html(t.imagePaths[0]?t.imagePaths[0].split(",").map(function(t,e){return'<img class="view-img" data-index="'+e+'" src="'+(p.imgPath+t)+'" />'}):""),e.pager.find(".basic-table").show(),e.pager.find(".btn-group1").show()}}).modalShow()}).on("click",".open-channel-modal",function(){e.chooseChannel.setData({fn:function(t){e.chooseChannel.modalHide(),e._addChannel(t)}}).modalShow()}).on("click",".remove-price",function(){var t=$(this).data("id").split("-"),n=a(t,2),i=n[0],r=n[1];e.data.productPurchasePriceObj[i].list.splice(r,1),e.data.productPurchasePriceObj[i].table.setData({dataSource:e.data.productPurchasePriceObj[i].list})}).on("click",".add-new-price",function(){var t=$(this).parents(".channel-i-c").data("cid");e.addPriceModal.setData({fn:function(n){e.addPriceModal.modalHide(),e.data.productPurchasePriceObj[t].list.push(i({},n)),e.data.productPurchasePriceObj[t].table.setData({dataSource:e.data.productPurchasePriceObj[t].list})}}).modalShow()}).on("click",".to-step3",function(){var t=JSON.parse(JSON.stringify(e.data.productPurchasePriceObj));if(e.data.productPurchasePriceList=Object.keys(t).reduce(function(n,i){return t[i].list=t[i].list.map(function(n){return n.channelId=t[i].channel.id,n.productId=e.data.productId,n}),[].concat(b(n),b(t[i].list))},[]),!e.data.productPurchasePriceList.length)return(0,d.default)({msg:"请至少添加一条进货记录"});e._changeSection(3),e.data.productSalePrice&&(e.pager.find('[name="auditPrice"]').val(e.data.productSalePrice.auditPrice),e.pager.find('[name="suggestPrice"]').val(e.data.productSalePrice.suggestPrice)),e.rankTable.setData({dataSource:e.data.productRankPriceList}),e.discountTable.setData({dataSource:e.data.productDiscountPriceList})}).on("click",".remove-channel",function(){var t=$(this).parents(".channel-i-c"),n=t.data("cid");p.floatModal.show({obj:$(this),side:3,title:"确认移除该渠道信息？",fn:function(){t.remove(),delete e.data.productPurchasePriceObj[n],p.floatModal.hide(),e.pager.find(".to-step3").toggle(!!Object.keys(e.data.productPurchasePriceObj).length)}})}).on("click",".get-detail",function(){e._getDetail()}).on("click",".add-new-rank",function(){var t=e.pager.find('[name="rankAmount"]'),n=e.pager.find('[name="rankPrice"]'),i=parseInt(t.val().trim()),a=n.val().trim();return i<=0?(0,d.default)({msg:"分段数量必须为正整数"}):a<=0?(0,d.default)({msg:"分段售价必须为正数"}):(e.data.productRankPriceList||(e.data.productRankPriceList=[]),e.data.productRankPriceList.some(function(t){return t.rankAmount===i})?(0,d.default)({msg:"已有此数量的分段价格"}):(e.data.productRankPriceList.push({rankAmount:i,rankPrice:a,productId:e.data.productId}),e.data.productRankPriceList=e.data.productRankPriceList.sort(function(t,e){return t.rankAmount-e.rankAmount}),e.rankTable.setData({dataSource:e.data.productRankPriceList}),t.val(""),void n.val("")))}).on("click",".remove-rank",function(){var t=$(this).data("index");e.data.productRankPriceList.splice(t,1),e.rankTable.setData({dataSource:e.data.productRankPriceList})}).on("click",".add-discount",function(){var t=e.pager.find('[name="discountRate"]'),n=t.val().trim();return e.data.discountInstoreDate?n<=0||n>1?(0,d.default)({msg:"折扣必须为0-1之间的小数"}):(e.data.productDiscountPriceList||(e.data.productDiscountPriceList=[]),e.data.productDiscountPriceList.some(function(t){return t.instoreDate===e.data.discountInstoreDate})?(0,d.default)({msg:"已有该日期段的折扣价格"}):(e.data.productDiscountPriceList.push({instoreDate:e.data.discountInstoreDate,discountRate:n,productId:e.data.productId}),e.data.productDiscountPriceList=e.data.productDiscountPriceList.sort(function(t,e){return new Date(t.instoreDate).getTime()-new Date(e.instoreDate).getTime()}),e.discountTable.setData({dataSource:e.data.productDiscountPriceList}),t.val(""),void e.instoreDatePicker.reset())):(0,d.default)({msg:"请选择入库时间"})}).on("click",".remove-discount",function(){var t=$(this).data("index");e.data.productDiscountPriceList.splice(t,1),e.discountTable.setData({dataSource:e.data.productDiscountPriceList})}).on("click",".back-step2",function(){e.data.productSalePrice={auditPrice:e.pager.find('[name="auditPrice"]').val(),productId:e.data.productId,suggestPrice:e.pager.find('[name="suggestPrice"]').val()},e.data.productSalePrice.auditPrice||e.data.productSalePrice.suggestPrice||e.data.productDiscountPriceList||e.data.productRankPriceList?p.confirmModal.setData({title:"返回上一步",msg:"你有填写的信息未保存，是否返回上一步？",confirmFn:function(){p.confirmModal.modalHide(),e._changeSection(2),delete e.data.productSalePrice,delete e.data.productDiscountPriceList,delete e.data.productRankPriceList}}).modalShow():(e._changeSection(2),delete e.data.productSalePrice,delete e.data.productDiscountPriceList,delete e.data.productRankPriceList)}).on("click",".save-all",function(){if(e.data.productSalePrice={auditPrice:e.pager.find('[name="auditPrice"]').val(),productId:e.data.productId,suggestPrice:e.pager.find('[name="suggestPrice"]').val()},e.data.productSalePrice.suggestPrice<=0)return(0,d.default)({msg:"建议售价不能为空"});var t={productId:e.data.productId,productDiscountPriceList:e.data.productDiscountPriceList||[],productPurchasePriceList:e.data.productPurchasePriceList,productRankPriceList:e.data.productRankPriceList||[],productSalePrice:e.data.productSalePrice};(0,s.default)({url:"product/price/add",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(t),success:function(t){t.success?((0,f.default)({title:"录入成功",msg:"商品价格信息录入成功"}),e.router.pop()):(0,d.default)({msg:t.errorMsg||"商品价格信息录入失败"})}})}).on("click",".view-img",function(){var t=e.currentImgs;t.length&&p.imgViewer.show(t,$(this).data("index"))})},t._initComponent=function(){t.model=new h.default({controller:"basic"}),t.chooseChannel=new m.default({}),t.addPriceModal=new v.default({}),t.rankTable=new u.default({outer:t.pager.find(".rank-table"),headers:[{name:"序号",width:100},{name:"分段数量",width:300},{name:"分段售价（元）",width:300},{name:"操作",width:200}],dataSource:t.data.productRankPriceList||[],renderEmpty:function(){return""},renderTrs:[function(t,e){return e+1},function(t){return t.rankAmount},function(t){return(0,p.formatPrice)(t.rankPrice)},function(t,e){return'<a class="btn btn-link remove-rank" data-id="'+e+'">移除此条分段价格</a>'}]}),t.discountTable=new u.default({outer:t.pager.find(".discount-table"),headers:[{name:"序号",width:100},{name:"入库时间",width:300},{name:"折扣",width:300},{name:"操作",width:200}],dataSource:t.data.productDiscountPriceList||[],renderEmpty:function(){return""},renderTrs:[function(t,e){return e+1},function(t){return(0,c.default)(t.instoreDate)},function(t){return t.discountRate},function(t,e){return'<a class="btn btn-link remove-discount" data-id="'+e+'">移除此条折扣</a>'}]}),t.instoreDatePicker=new l.default({input:t.pager.find('[name="instoreDate"]'),dropUp:!0,onDateChange:function(e){t.data.discountInstoreDate=e}})},t.id="productPricePage",t.docTitle="基本信息录入",t.html=r.default,t.data={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),e}();e.default=w},ajXE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n("CWZd")),r=s(n("0iPh")),o=s(n("gntN"));function s(t){return t&&t.__esModule?t:{default:t}}var c="changePsdModal",d=function(t){function e(t){var n=t.title,i=void 0===n?"修改密码":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.setData=function(t){var e=t.fn;return s.setConfirmFn(e),s._reset(),s},s._reset=function(){s.modal.find('input[name="originalPassword"]').val(""),s.modal.find('input[name="password"]').val(""),s.modal.find('input[name="password2"]').val(""),s.data={}},s._checkData=function(){return s.data.originalPassword=s.modal.find('input[name="originalPassword"]').val().trim(),s.data.originalPassword?(s.data.password=s.modal.find('input[name="password"]').val().trim(),s.data.password?(s.data.password2=s.modal.find('input[name="password2"]').val().trim(),s.data.password2?s.data.password===s.data.password2||((0,o.default)({msg:"两次输入密码不一致"}),!1):((0,o.default)({msg:"请再次输入新密码"}),!1)):((0,o.default)({msg:"请输入新密码"}),!1)):((0,o.default)({msg:"请输入旧密码"}),!1)},s.title=i,s.id=c,s.confirmFn=r,"function"!=typeof s.confirmFn)throw new Error("ChangePsdModal param confirmFn must be a function");return s.data={},s._init(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 400px;left:100px"})),this.modal=(0,r.default)("#"+this.id)}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">输入旧密码：</div>\n            <div class="modal-c-i-c"><input name="originalPassword" type="password" placeholder="旧密码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">输入新密码：</div>\n            <div class="modal-c-i-c"><input name="password" type="password" placeholder="新密码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">确认新密码：</div>\n            <div class="modal-c-i-c"><input name="password2" type="password" placeholder="确认新密码" /></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=d},akKl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("iqis")),a=r(n("al4X"));function r(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){return'<div id="'+t.id+'" class="page-outer" style="height: 100%">\n    <div class="flexbox aic jcc error-page-sc page403" style="height: 500px;display: none">\n        <div style="width: 400px;height: 360px;background: url('+i.default+') no-repeat scroll center / auto 100%"></div>\n        <div style="margin-left: 120px">\n            <div style="font-size: 72px;line-height: 1;margin-bottom: 24px">403</div>\n            <div style="font-size: 20px;line-height: 1;margin-bottom: 16px;color: #999">抱歉，你无权访问该页面</div>\n            <button class="btn btn-main">返回首页</button>\n        </div>\n    </div>\n    <div class="flexbox aic jcc error-page-sc page404" style="height: 500px;display: none">\n        <div style="width: 400px;height: 360px;background: url('+a.default+') no-repeat scroll center / auto 100%"></div>\n        <div style="margin-left: 120px">\n            <div style="font-size: 72px;line-height: 1;margin-bottom: 24px">404</div>\n            <div style="font-size: 20px;line-height: 1;margin-bottom: 16px;color: #999">抱歉，你访问的页面不存在</div>\n            <button class="btn btn-main">返回首页</button>\n        </div>\n    </div>\n</div>'}},al4X:function(t,e){t.exports="/font/404.svg"},alhc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=f(n("CWZd")),r=f(n("0iPh")),o=f(n("gntN")),s=f(n("/krT")),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("tMb8")),d=n("/1Qr"),l=n("z+yy"),u=f(l);function f(t){return t&&t.__esModule?t:{default:t}}var h="channelModal",p=function(t){function e(t){var n=t.title,i=void 0===n?"添加渠道":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.setData=function(t){var e=t.type,n=void 0===e?"add":e,i=t.fn,a=t.data,r=void 0===a?{}:a;if(u.default.getChannelManagerPromise||(u.default.getChannelManagerPromise=(0,l.getChannelManagerList)()),s.setTitle("add"===n?"新增渠道":"编辑渠道"),s.setConfirmFn(i),"add"===n)s._reset();else{s.modal.find('input[name="name"]').val(r.name),s.modal.find('input[name="channelNo"]').val(r.channelNo),s.modal.find('input[name="contactorName"]').val(r.contactorName),s.modal.find('input[name="contactorPhone"]').val(r.contactorPhone),s.modal.find('input[name="contactorAddress"]').val(r.contactorAddress),s.modal.find('input[name="contactorQq"]').val(r.contactorQq),s.modal.find('input[name="contactorWechat"]').val(r.contactorWechat),s.modal.find('input[name="contactorEmail"]').val(r.contactorEmail);var o=s.jlSelect.getList().findIndex(function(t){return t.id===r.channelManagerId});s.data=r,s.jlSelect.setData(o)}return s},s._reset=function(){s.modal.find('input[type="text"],input[type="number"]').val(""),s.jlSelect.reset(),s.data={}},s._checkData=function(){return s.data.name=s.modal.find('input[name="name"]').val().trim(),s.data.name?(s.data.channelNo=s.modal.find('input[name="channelNo"]').val().trim(),s.data.channelNo?(s.data.contactorName=s.modal.find('input[name="contactorName"]').val().trim(),s.data.contactorName?(s.data.contactorPhone=s.modal.find('input[name="contactorPhone"]').val().trim(),s.data.contactorPhone?c.checkPhone(s.data.contactorPhone)||c.checkTelPhone(s.data.contactorPhone)?(s.data.contactorAddress=s.modal.find('input[name="contactorAddress"]').val().trim(),s.data.contactorAddress?s.data.channelManagerId?(s.data.contactorQq=s.modal.find('input[name="contactorQq"]').val().trim(),s.data.contactorWechat=s.modal.find('input[name="contactorWechat"]').val().trim(),s.data.contactorEmail=s.modal.find('input[name="contactorEmail"]').val().trim(),!0):((0,o.default)({msg:"请选择渠道经理"}),!1):((0,o.default)({msg:"联络人地址不能为空"}),!1)):((0,o.default)({msg:"请输入正确的手机号或电话"}),!1):((0,o.default)({msg:"联络人电话不能为空"}),!1)):((0,o.default)({msg:"联络人名称不能为空"}),!1)):((0,o.default)({msg:"渠道编码不能为空"}),!1)):((0,o.default)({msg:"渠道名称不能为空"}),!1)},s.title=i,s.id=h,s.confirmFn=r,"function"!=typeof s.confirmFn)throw new Error("ChannelModal param confirmFn must be a function");return s.data={},s._init(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){var t=this;(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:20px;width: 600px;"})),this.modal=(0,r.default)("#"+this.id),this.jlSelect=new s.default({obj:this.modal.find(".jl-select"),renderLi:function(t){return t.name},onSelectChange:function(e){t.data.channelManagerId=e?e.id:""},list:u.default.channelManagerDic||[],placeholder:"不限",dropup:!0}),d.emitter.on("channelManagerChange",function(e){t.jlSelect.renderList(e.slice(1))})}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">渠道名称：</div>\n            <div class="modal-c-i-c"><input name="name" type="text" placeholder="请输入渠道名称" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">渠道编码：</div>\n            <div class="modal-c-i-c"><input name="channelNo" type="text" placeholder="请输入渠道编码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">联络人：</div>\n            <div class="modal-c-i-c"><input name="contactorName" type="text" placeholder="输入联络人姓名" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">电话：</div>\n            <div class="modal-c-i-c"><input name="contactorPhone" type="number" placeholder="输入联络人电话" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">地址：</div>\n            <div class="modal-c-i-c"><input name="contactorAddress" type="text" placeholder="输入联络人地址" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">QQ：</div>\n            <div class="modal-c-i-c"><input name="contactorQq" type="number" placeholder="输入联络人QQ" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">邮箱：</div>\n            <div class="modal-c-i-c"><input name="contactorEmail" type="email" placeholder="输入联络人微信" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t">微信：</div>\n            <div class="modal-c-i-c"><input name="contactorWechat" type="text" placeholder="输入联络人微信" /></div>\n        </div>\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">渠道经理：</div>\n            <div class="modal-c-i-c jl-select" style="max-width: 250px"></div>\n        </div>\n    </div>\n    \n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=p},awqy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return/^[(\u4e00-\u9fa5)]+$/.test(t)}},cKoO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=o(n("CWZd")),r=o(n("0iPh"));function o(t){return t&&t.__esModule?t:{default:t}}var s="confirmModal",c=function(t){function e(t){var n=t.title,i=void 0===n?"":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(d.call(o),o.title=i,o.id=s+Math.ceil(1e7*Math.random()),o.confirmFn=r,"function"!=typeof o.confirmFn)throw new Error("confirmModal param confirmFn must be a function");return o._init(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 450px;left: 75px"})),this.modal=(0,r.default)("#"+this.id)}},{key:"_getBodyHtml",value:function(){return'<div class="msg" style="padding: 50px 20px 0"></div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t.toggleloading(!0),t.confirmFn()})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}(),d=function(){var t=this;this.setData=function(e){var n=e.title,i=e.confirmFn,a=e.msg;return t.setTitle(n),t.setConfirmFn(i),t.modal.find(".msg").text(a),t.resetMsg(),t.toggleloading(),t}};e.default=c},cvsP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){if(0==e?(e=12,t--):13==e&&(e=1,t++),e<1||e>12)throw new Error("getMonthLength param month must between 1-12");var n=new Date(t+"/"+e+"/1");return n.setMonth(e),n.setDate(0),n.getDate()}},dd7e:function(t,e){},dn1d:function(t,e){},dzqJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=l(n("4b5O")),r=l(n("7D5N")),o=l(n("qiY8")),s=l(n("THgg")),c=l(n("ajXE")),d=l(n("gntN"));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._getInfo()},t._getInfo=function(){(0,s.default)({url:"admin/user/get",type:"post",contentType:"application/json;charset=utf-8",data:window.currentUser,success:function(e){e.success?(t.data=e.data,t.model.setData(e.data)):(0,d.default)({msg:"获取个人信息失败"})}})},t._bindEvent=function(){var e=t;t.pager.on("click",".changePsd",function(){e.modal.setData({fn:function(t){(0,s.default)({url:"user/changePassword",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i({username:e.data.username},t)),success:function(t){t.success?((0,d.default)({type:"success",msg:t.errorMsg}),e.modal.modalHide()):(0,d.default)({msg:t.errorMsg||"密码修改失败，请联系管理员"})}})}}).modalShow()})},t._initComponent=function(){t.model=new o.default({controller:"user"}),t.modal=new c.default({})},t.id="userCenterPage",t.docTitle="个人中心",t.html=a.default,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=u},"eI+r":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("N/qI");var i=["ys-notification-topRight","ys-notification-bottomRight"],a=function(t){return'<div class="ys-notification '+t+'"></div>'},r=function(t,e,n,i,a){return'<div class="ys-notification-info-c"><div class="ys-notification-close"><i class="fa fa-times"></i></div><div class="ys-notification-icon"><i class="fa '+{success:{className:"fa-check-circle-o"},info:{className:"fa-info-circle"},warning:{className:"fa-exclamation-circle"},error:{className:"fa-times-circle-o"}}[t].className+'"></i></div><div class="ys-notification-info-content">\n    <div class="ys-notification-info-title">'+e+'</div><div class="ys-notification-info-msg">'+n+'</div>\n    <div class="ys-notification-tool-btn-c">\n    '+(i.show?'<a href="javascript:;" class="ys-notification-confirm">'+(i.text||"确认")+"</a>":"")+(a.show?'<a href="javascript:;" class="ys-notification-close-btn">'+(a.text||"关闭")+"</a>":"")+"\n</div>\n</div></div>"};e.default=function(t){var e=t.type,n=void 0===e?"success":e,o=t.title,s=t.msg,c=t.time,d=void 0===c?5:c,l=t.confirmBtn,u=void 0===l?{show:!1}:l,f=t.closeBtn,h=void 0===f?{show:!1}:f,p=$("."+i[0]);p.length||($("body").append(a(i[0])),(p=$("."+i[0])).on("click",".ys-notification-close",function(){var t=$(this).parent();t.css({marginTop:-(t[0].clientHeight+18)+"px",opacity:.3}),setTimeout(function(){t.remove()},300)})),p.append(r(n,o,s,u,h));var m=p.children(":last");u.show&&m.one("click",".ys-notification-confirm",function(){"function"==typeof u.onClick&&u.onClick(function(){m.css({marginTop:-(m[0].clientHeight+18)+"px",opacity:.3}),setTimeout(function(){m.remove()},300)})}),h.show&&m.one("click",".ys-notification-close-btn",function(){m.css({marginTop:-(m[0].clientHeight+18)+"px",opacity:.3}),setTimeout(function(){m.remove()},300)}),setTimeout(function(){m.addClass("active")},50),d>0&&setTimeout(function(){m.css({marginTop:-(m[0].clientHeight+18)+"px",opacity:.3}),setTimeout(function(){m.remove()},300)},1e3*d)}},eKCT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n=[],i={yy:"(\\d{2})",yyyy:"(\\d{4})",M:"([1-9]|1[012])",MM:"([1-9]|0[1-9]|1[0-2])",MMM:"(\\S+)",MMMM:"(\\S+)",d:"([1-9]|[12][0-9]|3[01])",dd:"(0[1-9]|[12][0-9]|3[01])"},a=e.replace(/yy(?:yy)?|M{1,4}|d{1,2}|E{1,4}|([Hhms])\1?|S(?:SS)?|[azZG]/g,function(t){return n.push(t),"string"==typeof i[t]?i[t]:t}),r=t.match(new RegExp(a));if(!r)return"";for(var o=new Date,s=0;s<n.length;s++)switch(n[s]){case"yyyy":o.setFullYear(r[s+1]);break;case"MM":o.setMonth(r[s+1]-1);break;case"dd":o.setDate(r[s+1]);break;case"hh":o.setHours(r[s+1]);break;case"mm":o.setMinutes(r[s+1]);break;case"ss":o.setSeconds(r[s+1])}return o}},eUm7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("1x55");var i=function(){var t=this;this._bindEvents=function(){var e=t;t.outer.on("click",".ys-com-radio-item",function(){var t=$(this).data("index");e.activeIndex!==t&&(e.activeIndex=t),$(this).addClass("active").siblings().removeClass("active"),e.onChange(e.activeIndex,e.list[e.activeIndex])})},this.getChecked=function(){return t.activeIndex},this.setChecked=function(e){t.activeIndex=e,t.outer.find(".ys-com-radio-item").removeClass("active").eq(e).addClass("active")},this.setList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.list=e,t._randerRadio()},this.reset=function(){t.outer.find(".ys-com-radio-item").removeClass("active"),t.activeIndex=-1},this._randerRadio=function(){t.outer.html(t.list.map(function(e,n){return'<div class="ys-com-radio-item'+(t.activeIndex===n?" active":"")+'" data-index="'+n+'">\n    <div class="ys-com-radio-i"></div>\n    <div class="ys-com-radio-name">'+t.renderLi(e,n)+"</div>\n</div>"}))},this._renderHtml=function(){t.obj.html('<div class="ys-com-radio-outer"></div>'),t.outer=t.obj.find(".ys-com-radio-outer"),t._randerRadio()},this._init=function(){t._renderHtml(),t._bindEvents()}};e.default=function t(e){var n=e.obj,a=e.list,r=void 0===a?[]:a,o=e.renderLi,s=void 0===o?function(t){return t.name}:o,c=e.activeIndex,d=void 0===c?-1:c,l=e.onChange,u=void 0===l?function(){}:l;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.call(this),!(n instanceof $)||n instanceof $&&1!==n.length)throw new Error("Radio param obj must be one length jqueryDom");this.obj=n,this.list=r,this.renderLi=s,this.activeIndex=d,this.onChange=u,this._init()}},g3J4:function(t,e){},gPJT:function(t,e){},gntN:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n("g3J4");var i=function(){return'<div class="ys-message-c"></div>'},a=function(t,e){return'<div class="ys-message-item-c">\n<div class="ys-message-item ys-message-item-'+t+'"><i class="fa '+{success:{className:"fa-check-circle-o"},info:{className:"fa-info-circle"},warning:{className:"fa-exclamation-circle"},error:{className:"fa-times-circle-o"}}[t].className+'"></i>'+e+"</div>\n</div>"};e.default=function(t){var e=t.type,n=void 0===e?"error":e,r=t.msg,o=t.time,s=void 0===o?3:o,c=$(".ys-message-c");c.length||($("body").append(i()),c=$(".ys-message-c")),c.append(a(n,r));var d=c.children(":last");setTimeout(function(){d.addClass("active")},10),setTimeout(function(){d.removeClass("active")},1e3*s+310),setTimeout(function(){d.remove()},1e3*s+610)}},hPQL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n("tMb8"),o=n("0iPh"),s=(i=o)&&i.__esModule?i:{default:i};var c=function(){function t(e){var n=e.input,i=e.delay,a=void 0===i?500:i,o=e.fn,c=e.keyboard,d=void 0===c?"pc":c;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(n instanceof s.default)||n instanceof s.default&&1!==n.length||"INPUT"!==n[0].tagName)throw new Error("AutoSearch param input must be a input dom");if("function"!=typeof o)throw new Error("AutoSearch param fn must be a function");if(0!==a&&!(0,r.isPosInteger)(a))throw new Error("AutoSearch param delay must be a 0或正整数");this.input=n,this.fn=o,this.delay=a,this.keyboard=d,this.timer=null,this.oldVal="",this._init()}return a(t,[{key:"_bindEvent",value:function(){var t=this;"pc"===this.keyboard?this.input.on("keyup",function(e){t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){var n=s.default.trim(t.input.val());t.oldVal!==n&&-1===[13,38,40].indexOf(e.which)&&(t.fn(n),t.oldVal=n)},t.delay)}):this.input.on("keyup",function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){var e=s.default.trim(t.input.val());t.oldVal!==e&&(t.fn(e),t.oldVal=e)},t.delay)})}},{key:"triggerSearch",value:function(){this.timer&&clearTimeout(this.timer),this.fn(s.default.trim(this.input.val()))}},{key:"reset",value:function(){this.oldVal="",this.input.val("")}},{key:"_init",value:function(){this._bindEvent()}}]),t}();e.default=c},hik8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=y(n("NJje")),r=y(n("7D5N")),o=n("z+yy"),s=y(o),c=y(n("THgg")),d=y(n("RfmY")),l=y(n("hPQL")),u=y(n("/krT")),f=y(n("gntN")),h=y(n("WU09")),p=y(n("RYhR")),m=y(n("1WMk")),v=n("/1Qr"),g=y(n("id4V"));function y(t){return t&&t.__esModule?t:{default:t}}function b(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n("93UV");var w=["#ffa9a570","#4a8afa54","#77cb5254"],_=10,x=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._reset=function(){t.condition={productName:"",productCode:"",styleCode:"",purchasePriceBegin:"",purchasePriceEnd:"",channelName:"",brandName:"",categoryId:"",labelFilters:[]}},t._init=function(){t.privilegePromise.then(function(){t._getList(1)}),s.default.getCategoryPromise||(s.default.getCategoryPromise=(0,o.getCategoryDic)()),s.default.getLabelPromise||(s.default.getLabelPromise=(0,o.getLabelDic)())},t._bindEvent=function(){var e=t;t.pager.on("click",".show-more",function(){$(this).toggleClass("open");var t=$(this).hasClass("open"),n=e.pager.find(".condition-toggle").toggleClass("open",t);t?setTimeout(function(){n.addClass("not-hidden")},300):n.removeClass("not-hidden")}).on("click",".search-btn",function(){e.condition.styleCode=e.pager.find('input[name="styleCode"]').val().trim(),e.condition.purchasePriceBegin=e.pager.find('input[name="purchasePriceBegin"]').val().trim(),e.condition.purchasePriceEnd=e.pager.find('input[name="purchasePriceEnd"]').val().trim(),e.condition.channelName=e.pager.find('input[name="channelName"]').val().trim(),e.condition.brandName=e.pager.find('input[name="brandName"]').val().trim(),e._getList(1,"reset")}).on("blur",'input[name="purchasePriceBegin"]',function(){var t=$(this).val(),n=e.pager.find('input[name="purchasePriceEnd"]').val();t&&t<0&&((0,f.default)({msg:"起始价格不能小于0"}),$(this).val("").focus()),n&&t&&t-0>n-0&&((0,f.default)({msg:"起始价格不能大于结束价格"}),$(this).val("").focus())}).on("blur",'input[name="purchasePriceEnd"]',function(){var t=$(this).val(),n=e.pager.find('input[name="purchasePriceBegin"]').val();t&&t<0&&((0,f.default)({msg:"结束价格不能小于0"}),$(this).val("").focus()),n&&t&&t-0<n-0&&((0,f.default)({msg:"结束价格不能小于其实价格"}),$(this).val("").focus())}).on("click",".reset-btn",function(){e._reset(),e.categorySelect.reset(!1),e.labelCheck.reset(),e.pager.find("input").val(""),e._getList(1,"reset")}).on("click",".to-detail",function(){var t=e.table.getRowData($(this).data("index"));e.router.push({page:"product-info",state:{id:t.productBasicInfo.id}})}).on("click",".view-img",function(){var t=e.table.getRowData($(this).data("index")),n=t.productBasicInfo.images?t.productBasicInfo.images.split(","):[];n.length&&v.imgViewer.show(n)})},t._getList=function(e){(0,c.default)({url:"product/listAllInfo",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i({},t.condition,{searchPage:{pageIndex:e-1,pageSize:_},ts:Date.now()})),success:function(n){if(n.success){var i=(n.data.searchPage.pageData||[]).map(function(t){return t.suggestSalePrice=t.suggestSalePrice||{},t.rankPriceList=t.rankPriceList.sort(function(t,e){return t.rankAmount-e.rankAmount}),t});t.table.setData({dataSource:i}),t.pagination.setPageData({current:e,total:n.data.searchPage.totalRecord})}else t.table.setData({dataSource:[]})}})},t._initComponent=function(){new l.default({input:t.pager.find('input[name="name"]'),fn:function(e){t.condition.productName=e,t._getList(1,"reset")}}),new l.default({input:t.pager.find('input[name="productNo"]'),fn:function(e){t.condition.productCode=e,t._getList(1,"reset")}}),t.categorySelect=new u.default({obj:t.pager.find(".category-select"),renderLi:function(t){return t.name},placeholder:"选择类目",list:s.default.categoryDic?[{name:"不限",id:""}].concat(b(s.default.categoryDic)):[],onSelectChange:function(e){t.condition.categoryId=e?e.id:""},hasSearch:!0,hasReset:!0}),v.emitter.on("categoryDicChange",function(e){t.categorySelect.renderList([{name:"不限",id:""}].concat(b(e)))}),t.labelCheck=new h.default({obj:t.pager.find(".label-check"),renderLi:function(t){return t.name},placeholder:"选择标签",list:s.default.labelDic?s.default.labelDic:[],onSelectChange:function(e){t.condition.labelFilters=e.map(function(t){return s.default.labelDic[t].name})}}),v.emitter.on("labelDicChange",function(e){t.labelCheck.renderList(e)}),t.privilegePromise=new window.Promise(function(t){s.default.privilege?t():v.emitter.on("privilege",function(){t()})}),t.privilegePromise.then(function(){var e=s.default.privilege;t.priceType=e.indexOf("ALL_PRICE")>-1?"ALL_PRICE":e.indexOf("SALE_PRICE")>-1?"SALE_PRICE":"PURCHASE_PRICE",t.table=new d.default({outer:t.pager.find(".product-table"),renderHeader:function(){return'<tr><th rowspan="2" width="55">序号</th><th rowspan="2" width="150">类目</th><th rowspan="2" width="60">图片</th><th rowspan="2" width="110">商品编码</th><th rowspan="2" width="220">商品名称</th>\n<th rowspan="2" width="80">款式编码</th><th rowspan="2" width="80">规格型号</th><th rowspan="2" width="70">尺寸</th><th rowspan="2" width="140">品牌</th>\n'+("SALE_PRICE"!==t.priceType?'<th width="880" colspan="9" style="text-align: center">最近三次采购价格</th>':"")+"\n"+("PURCHASE_PRICE"!==t.priceType?'<th rowspan="2" width="80">建议售价</th>':"")+"\n"+("PURCHASE_PRICE"!==t.priceType?'<th width="560" colspan="6" style="text-align: center">售货区间及建议销售价格</th>':"")+"\n"+("PURCHASE_PRICE"!==t.priceType?'<th width="880" colspan="9" style="text-align: center">入库时间及折扣价格</th>':"")+'\n<th rowspan="2" width="80">审批价格</th><th rowspan="2" width="80">库存</th>\n</tr>\n<tr>'+("SALE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(t,e){return'<th style="background-color:'+w[e]+'">采购时间</th><th style="background-color:'+w[e]+'">采购价</th><th style="background-color:'+w[e]+'">入库日期</th>'}).join(""):"")+"\n"+("PURCHASE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(t,e){return'<th style="background-color:'+w[e]+'">售货区间</th><th style="background-color:'+w[e]+'">售价</th>'}).join(""):"")+"\n"+("PURCHASE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(t,e){return'<th style="background-color:'+w[e]+'">入库日期</th><th style="background-color:'+w[e]+'">折扣</th><th style="background-color:'+w[e]+'">折扣价</th>'}).join(""):"")+"</tr>"},renderTrs:[function(e,n){return _*(t.pageNum-1)+(n+1)},{renderTd:function(t){return'<td style="text-align: left;padding-left: 15px">'+(0,p.default)(t.productBasicInfo.categoryName)+"</td>"}},{renderTd:function(t,e){var n=t.productBasicInfo.images?t.productBasicInfo.images.split(","):[];return'<td style="padding: 2px 5px 2px 15px">'+(n[0]?'<img class="view-img" data-index="'+e+'" style="width: 30px;height: 30px" src="'+(v.imgPath+n[0])+'" >':"")+"</td>"}},function(t){return(0,p.default)(t.productBasicInfo.productNo)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px"><a class="btn btn-link to-detail" data-index="'+e+'">'+(0,p.default)(t.productBasicInfo.name)+"</a></td>"}},function(t){return(0,p.default)(t.productBasicInfo.styleCode)},function(t){return(0,p.default)(t.productBasicInfo.specification)},function(t){return(0,p.default)(t.productBasicInfo.size)},{renderTd:function(t){return'<td style="text-align: left;padding-left: 15px">'+(0,p.default)(t.productBasicInfo.brand)+"</td>"}}].concat(b("SALE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(t,e){return[function(t){var n=(t.latestPurchasePriceList||[])[e]||{};return(0,m.default)(n.purchaseDate)},{renderTd:function(t){var n=(t.latestPurchasePriceList||[])[e]||{};return'<td style="text-align: right;padding-right: 10px">'+(0,v.formatPrice)(n.purchasePrice)+"</td>"}},function(t){var n=(t.latestPurchasePriceList||[])[e]||{};return(0,m.default)(n.instoreDate)}]}).reduce(function(t,e){return t=[].concat(b(t),b(e))},[]):[]),b("PURCHASE_PRICE"!==t.priceType?[{renderTd:function(t){return'<td style="text-align: right;padding-right: 10px">'+(0,v.formatPrice)(t.suggestSalePrice.suggestPrice)+"</td>"}}]:[]),b("PURCHASE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(e,n){return[{renderTd:function(e){var i=e.rankPriceList||[];return i[n],'<td style="text-align: right;padding-right: 10px">'+t._getRank(i,n)+"</td>"}},{renderTd:function(t){var e=(t.rankPriceList||[])[n]||{};return'<td style="text-align: right;padding-right: 10px">'+(0,v.formatPrice)(e.rankPrice)+"</td>"}}]}).reduce(function(t,e){return t=[].concat(b(t),b(e))},[]):[]),b("PURCHASE_PRICE"!==t.priceType?new Array(3).fill(1).map(function(e,n){return[function(t){var e=(t.discountPriceList||[])[n]||{};return(0,m.default)(e.instoreDate)},{renderTd:function(e){var i=(e.discountPriceList||[])[n]||{};return'<td style="text-align: right;padding-right: 10px">'+t._getDiscount(i.discountRate)+"</td>"}},{renderTd:function(t){var e=(t.discountPriceList||[])[n]||{},i=t.suggestSalePrice.suggestPrice*e.discountRate;return'<td style="text-align: right;padding-right: 10px">'+(0,v.formatPrice)(i)+"</td>"}}]}).reduce(function(t,e){return t=[].concat(b(t),b(e))},[]):[]),[{renderTd:function(t){return'<td style="text-align: right;padding-right: 10px">'+(0,v.formatPrice)(t.suggestSalePrice.auditPrice)+"</td>"}},{renderTd:function(t){return'<td style="text-align: right;padding-right: 10px">'+(0,p.default)(t.productBasicInfo.storageSize)+"</td>"}}]),storage:!0})}),t.pagination=new g.default({outer:t.pager.find(".pagination-outer"),current:t.pageNum,pageSize:_,isJump:!0,loading:!0,onChange:function(e){var n=e.current;t.pagination.toggleLoading(),t.pageNum=n,t._getList(n)}})},t._getRank=function(t,e){var n=t[e-1],i=t[e];return i?0===e?i.rankAmount+"以下":e===t.length?i.rankAmount+"以上":n.rankAmount+"-"+i.rankAmount:""},t._getDiscount=function(t){if(void 0===t||null===t||""===t)return"";var e=Math.round(1e3*t)/100;return isNaN(e)?"":e+"折"},t.id="ProductPage",t.docTitle="商品管理",t.html=a.default,t.condition={productName:"",productCode:"",styleCode:"",purchasePriceBegin:"",purchasePriceEnd:"",channelName:"",brandName:"",categoryId:"",labelFilters:[]},t.pageNum=1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=x},hjx0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=m(n("ILKP")),a=m(n("7D5N")),r=m(n("THgg")),o=m(n("gntN")),s=m(n("/krT")),c=m(n("eI+r")),d=m(n("WU09")),l=m(n("E1Zh")),u=n("z+yy"),f=m(u),h=n("/1Qr"),p=n("X0eP");function m(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._reset(),f.default.getLabelPromise||(f.default.getLabelPromise=(0,u.getLabelDic)()),f.default.getCategoryPromise||(f.default.getCategoryPromise=(0,u.getCategoryDic)()),t.state.id&&(0,r.default)({url:"product/getBasic/"+t.state.id,type:"post",success:function(e){e.success&&t._setData(e.data)}}),t.pager.find(".open-product-modal,.reset-btn").toggle(!t.state.id)},t._reset=function(){t.data={},t.pager.find('input[type="text"],input[type="number"]').val(""),t.categorySelect.reset(!1),t.pager.find(".category-select2").hide(),t.labelCheck.reset(),t.yearSelect.reset(!1),t.seasonSelect.reset(!1),t.uploadImgs.setImgs([])},t._setData=function(e){t.data=e,t.pager.find('input[name="name"]').val(e.name),t.pager.find('input[name="productNo"]').val(e.productNo),t.pager.find('input[name="brand"]').val(e.brand),t.pager.find('input[name="styleCode"]').val(e.styleCode),t.pager.find('input[name="specification"]').val(e.specification),t.pager.find('input[name="size"]').val(e.size),t.pager.find('input[name="storageSize"]').val(e.storageSize),t.yearSelect.setValue(e.productYear+"年"),t.seasonSelect.setData(t.seasonList.findIndex(function(t){return t.name===e.season})),e.imagePaths=e.imagePaths[0]?e.imagePaths[0].split(","):[],t.uploadImgs.setImgs(e.imagePaths),t.categorySelect.setValue(e.categoryName.split(">")[0]),t.categorySelect2.setValue(e.categoryName.split(">")[1]),t.pager.find(".category-select2").show(),f.default.getLabelPromise.then(function(n){t.labels=e.labels[0].split(",");var i=t.labels.map(function(t){return n.findIndex(function(e){return e.name===t})}).filter(function(t){return-1!==t});t.labelCheck.setIndex(i)})},t._modifyProduct=function(){(0,r.default)({url:"product/modifyBasic",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(t.data),success:function(e){e.success?((0,c.default)({title:"编辑成功",msg:t.data.name+" 商品基本信息编辑成功"}),t.router.pop()):(0,o.default)({msg:e.errorMsg})}})},t._addProduct=function(){(0,r.default)({url:"product/addBasic",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(t.data),success:function(e){e.success?((0,c.default)({title:"录入成功",msg:t.data.name+" 商品基本信息录入成功"}),t.router.pop()):(0,o.default)({msg:e.errorMsg})}})},t._checkData=function(){return t.data.name=t.pager.find('input[name="name"]').val().trim(),t.data.name?(t.data.productNo=t.pager.find('input[name="productNo"]').val().trim(),t.data.productNo?(t.data.size=t.pager.find('input[name="size"]').val().trim(),t.data.brand=t.pager.find('input[name="brand"]').val().trim(),t.data.brand?(t.data.styleCode=t.pager.find('input[name="styleCode"]').val().trim(),t.data.id||t.data.parentCategoryId?t.data.categoryId?(t.data.specification=t.pager.find('input[name="specification"]').val().trim(),t.data.specification?(t.data.storageSize=parseInt(t.pager.find('input[name="storageSize"]').val().trim()),0===t.data.storageSize||t.data.storageSize>0?(t.data.imagePaths=t.uploadImgs.getImgs(),!!t.data.imagePaths.length||((0,o.default)({msg:"请上传图片"}),!1)):((0,o.default)({msg:"库存必须为非负整数"}),!1)):((0,o.default)({msg:"规格型号不能为空"}),!1)):((0,o.default)({msg:"请选择二级类目"}),!1):((0,o.default)({msg:"请选择一级类目"}),!1)):((0,o.default)({msg:"商品品牌不能为空"}),!1)):((0,o.default)({msg:"商品编号不能为空"}),!1)):((0,o.default)({msg:"商品名称不能为空"}),!1)},t._bindEvent=function(){var e=t;t.pager.on("click",".ys-back-btn,.cancel-btn",function(){e.router.pop()}).on("click",".save-btn",function(){e._checkData()&&(e.state.id?e._modifyProduct():e._addProduct())}).on("click",".open-product-modal",function(){p.chooseModal.setData({fn:function(t){p.chooseModal.modalHide(),e._setData(t)}}).modalShow()}).on("click",".reset-btn",function(){e._reset()})},t._getCategory=function(){!f.default.categoryDic&&(0,r.default)({url:"category/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:0,pageSize:-1},ts:Date.now()}),success:function(e){e.success&&(f.default.categoryDic=e.data.searchPage.pageData,t.categorySelect.renderList(f.default.categoryDic))}})},t._getCategoryChildren=function(){(0,r.default)({url:"category/listChildren/"+t.data.parentCategoryId,data:{ts:Date.now()},success:function(e){if(e.success){var n=e.data||[];t.pager.find(".category-select2").toggle(!!n.length),t.categorySelect2.renderList(n).reset()}}})},t._initComponent=function(){t.categorySelect=new s.default({obj:t.pager.find(".category-select"),renderLi:function(t){return t.name},placeholder:"选择类目",list:f.default.categoryDic||[],onSelectChange:function(e){t.data.parentCategoryId=e.id,t._getCategoryChildren()},hasSearch:!0}),h.emitter.on("categoryDicChange",function(e){t.categorySelect.renderList(e)}),t.categorySelect2=new s.default({obj:t.pager.find(".category-select2"),renderLi:function(t){return t.name},placeholder:"选择子类目",onSelectChange:function(e){t.data.categoryId=e?e.id:""},hasSearch:!0}),t.labelCheck=new d.default({obj:t.pager.find(".label-checks"),renderLi:function(t){return t.name},placeholder:"选择标签",list:f.default.labelDic||[],onSelectChange:function(e){t.data.labels=e.map(function(t){return f.default.labelDic[t].name})}}),h.emitter.on("labelDicChange",function(e){t.labelCheck.renderList(e)}),t.yearSelect=new s.default({obj:t.pager.find(".year-select"),renderLi:function(t){return t.name},placeholder:"选择年份",list:h.yearList,onSelectChange:function(e){t.data.productYear=e.year}}),t.seasonSelect=new s.default({obj:t.pager.find(".season-select"),renderLi:function(t){return t.name},placeholder:"选择季节",list:t.seasonList,onSelectChange:function(e){t.data.season=e?e.name:""}}),t.uploadImgs=new l.default({outer:t.pager.find(".upload-imgs"),url:"image/category/upload",fileName:"uploadFile",getImgPathByRequest:function(t){if(t.success)return""+h.requestServer+t.data},maxImgs:5,compress:!1})},t.id="basicInfoPage",t.docTitle="基本信息录入",t.html=i.default,t.seasonList=[{name:"春",id:1},{name:"夏",id:2},{name:"秋",id:3},{name:"冬",id:4}],t.data={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=v},hwsv:function(t,e){},id4V:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("dd7e");var a=function(){function t(e){var n=e.outer,i=e.current,a=void 0===i?1:i,r=e.total,o=void 0===r?1:r,s=e.pageSize,c=void 0===s?10:s,d=e.position,l=void 0===d?"right":d,u=e.onChange,f=void 0===u?function(){}:u,h=e.isJump,p=void 0!==h&&h,m=e.loading,v=void 0!==m&&m;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.outer=n,this.current=a,this.total=o,this.pageSize=c,this.position=l,this.onChange=f,this.isJump=p,this.pageTotal=Math.ceil(this.total/this.pageSize),this.loading=v,this.isLoading=!1,!(n instanceof $)||n instanceof $&&1!==n.length)throw new Error("Pagination param outer must be one length jqueryDom");this._init()}return i(t,[{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}},{key:"_getHtml",value:function(){return'<div class="ys-page-pagination ys-page-pos-'+this.position+" "+this.total+'">'+("right"===this.position?this._getLoadingHtml():"")+'<span class="ys-page-prev'+(1===this.current?" disabled":"")+'"><i class="fa fa-angle-left"></i></span>'+this._getPagesHtml()+'<span class="ys-page-next'+(this.current===this.pageTotal?" disabled":"")+'"><i class="fa fa-angle-right"></i></span>'+(this.isJump?this._getJumpInput():"")+("right"!==this.position?this._getLoadingHtml():"")+"</div>"}},{key:"_getLoadingHtml",value:function(){return'<span class="ys-page-loading"><i class="fa fa-pulse fa-spinner"></i></span>'}},{key:"_getJumpInput",value:function(){return'<input class="ys-page-go-input form-control" type="text" /><span class="ys-page-go">GO</span>'}},{key:"_getPagesHtml",value:function(){var t=this;if(this.pageTotal<6)return""+new Array(this.pageTotal).join(",").split(",").map(function(e,n){return t._getPageHtml(n+1)}).join("");var e=this.current-2>1?this.current-2:2,n=this.current+2<this.pageTotal?this.current+2:this.pageTotal-1;return this.current<3&&(n=4),this.current>this.pageTotal-2&&(e=this.pageTotal-3),this._getPageHtml(1)+(this.current>4?"<span>...</span>":"")+new Array(n-e+1).join(",").split(",").map(function(n,i){return t._getPageHtml(e+i)}).join("")+(this.current<this.pageTotal-3?"<span>...</span>":"")+this._getPageHtml(this.pageTotal)}},{key:"_getPageHtml",value:function(t){return'<span class="ys-page-pager'+(t===this.current?" current":"")+'">'+t+"</span>"}},{key:"_renderHtml",value:function(){this.outer.html(this._getHtml())}},{key:"_pageChange",value:function(){this._renderHtml(),this.loading&&this.toggleLoading(!0),this.onChange({current:this.current,total:this.total,pageSize:this.pageSize})}},{key:"_bindEvent",value:function(){var t=this;this.outer.on("click",".ys-page-prev:not(.disabled)",function(){t.isLoading||(t.current--,t._pageChange())}).on("click",".ys-page-next:not(.disabled)",function(){t.isLoading||(t.current++,t._pageChange())}).on("click",".ys-page-pager:not(.current)",function(){t.isLoading||(t.current=$(this).text()-0,t._pageChange())}).on("click",".ys-page-go",function(){if(!t.isLoading){var e=Number(t.outer.find(".ys-page-go-input").val());e&&e!=t.current&&(t.current=e,t._pageChange())}}).on("keydown",".ys-page-go-input",function(e){if(!t.isLoading&&13==e.which){var n=Number($(this).val());if(!n||n==t.current)return;t.current=n,t._pageChange()}})}},{key:"setPageData",value:function(t){var e=t.current,n=void 0===e?this.current:e,i=t.pageSize,a=void 0===i?this.pageSize:i,r=t.total,o=void 0===r?this.total:r;this.current=Number(n)>0?Number(n):this.current,this.pageSize=Number(a)>0?Number(a):this.pageSize,this.total=Number(o)>=0?Number(o):this.total,this.pageTotal=Math.ceil(this.total/this.pageSize),0===this.pageTotal&&(this.pageTotal=1),this.current>this.pageTotal&&(this.current=this.pageTotal),this._renderHtml()}},{key:"getPaginationData",value:function(){return{current:this.current,pageSize:this.pageSize,total:this.total}}},{key:"toggleLoading",value:function(t){this.isLoading=!!t,t?this.outer.find(".ys-page-loading").show():this.outer.find(".ys-page-loading").hide()}}]),t}();e.default=a},iqis:function(t,e){t.exports="/font/403.svg"},iu2K:function(t,e){},jDxm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return/^[1][3,4,5,7,8][0-9]{9}$/.test(t)}},joKS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderNav=e.nav=void 0;var i,a=n("THgg"),r=(i=a)&&i.__esModule?i:{default:i},o=n("/1Qr");var s=window.location.pathname,c=e.nav=[{name:"商品查询",icon:"fa-shopping-bag",url:window.basePath+"index"+o.pageTail,active:window.basePath+"index"+o.pageTail===s||s===window.basePath,code:"PRODUCT_QUERY"},{name:"商品录入",icon:"fa-share-square",url:window.basePath+"product-input"+o.pageTail,active:s.indexOf("product-input")>-1,code:"PRODUCT_MANAGE"},{name:"渠道管理",icon:"fa-shopping-cart",url:window.basePath+"channel"+o.pageTail,active:window.basePath+"channel"+o.pageTail===s,code:"CHANNEL_MANAGE"},{name:"类目管理",icon:"fa-sitemap",url:window.basePath+"category"+o.pageTail,active:s.indexOf("category")>-1,code:"CATEGORY_MANAGE"},{name:"标签管理",icon:"fa-tags",url:window.basePath+"label"+o.pageTail,active:s.indexOf("label")>-1,code:"LABEL_MANAGE"},{name:"用户权限",icon:"fa-user-secret",active:s.indexOf("users")>-1,code:"USER_MANAGE",children:[{name:"用户管理",icon:"fa-users",url:window.basePath+"users-account"+o.pageTail,active:window.basePath+"users-account"+o.pageTail===s},{name:"角色管理",icon:"fa-user",url:window.basePath+"users-role"+o.pageTail,active:window.basePath+"users-role"+o.pageTail===s}]},{name:"个人中心",icon:"fa-user-circle-o",url:window.basePath+"userCenter"+o.pageTail,active:window.basePath+"userCenter"+o.pageTail===s}];$("body").on("click",".l-t-logo",function(){window.location.href=window.basePath+c[0].url}).on("click","a.has-sec",function(){return $(this).toggleClass("show-sec").siblings().removeClass("show-sec"),!1}).on("click",".logout-btn",function(){return(0,r.default)({url:"logout",type:"post",success:function(t){t.success&&(window.localStorage.removeItem("islogin"),window.localStorage.removeItem("privilege"),window.location.href=window.basePath)}}),!1});e.renderNav=function(t){$(".nav-list-c").html(t.map(function(t){return t.reject?"":'<a class="'+(t.active?"active show-sec":"")+(t.children&&t.children.length?" has-sec":"")+'" '+(t.url?'href="'+t.url+'"':"")+'><div class="nav-icon-c"><i class="fa fa-fw '+t.icon+'"></i></div>'+t.name+"</a>"+function(t){var e=t.children||[];return e.length?'<div class="sec-nav-c">'+e.map(function(t){return'<a class="sec-nav-a'+(t.active?" active":"")+'" href="'+t.url+'"><i class="fa fa-fw '+t.icon+'"></i>'+t.name+"</a>"}).join("")+"</div>":""}(t)})),$("#currentUserNameC").text(window.currentNickUser)}},ky39:function(t,e){},o9gJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=d(n("1WMk")),r=d(n("eKCT")),o=d(n("cvsP")),s=d(n("/W9z")),c=d(n("1TWF"));function d(t){return t&&t.__esModule?t:{default:t}}n("ZTeE");var l=["一","二","三","四","五","六","日"],u=["","今年","本月","今天","本周"],f=function(){function t(e){var n=e.input,i=e.type,o=void 0===i?"day":i,s=e.currentDate,c=e.startDate,d=e.endDate,l=e.defaultFormat,u=e.onDateChange,f=void 0===u?function(){}:u,h=e.canClose,p=void 0===h||h,m=e.dropUp;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(n instanceof $)||n instanceof $&&1!==n.length)throw new Error("DatePicker param input must be an one length jqueryDom");if(this.input=n,this.type={year:1,month:2,day:3,week:4}[o]||3,this.startDate=new Date(c),this.endDate=new Date(d),this.startDate.getTime()||(this.startDate=new Date("1970/1/1")),this.endDate.getTime()||(this.endDate=null),this.startDate&&this.endDate&&this.startDate.getTime()>this.endDate.getTime()&&(this.startDate=new Date("1970/1/1")),this.todayDisabled=this.startDate&&this.startDate.getTime()>Date.now()||this.endDate&&this.endDate.getTime()<Date.now(),this.defaultFormat=l||["","yyyy","yyyy-MM","yyyy-MM-dd","yyyy-MM"][this.type],this.onDateChange=f,this.canClose=p,"INPUT"!==this.input[0].tagName)throw new Error("DatePicker param input must be input tag");this.id="datePicker"+Math.round(1e5*Math.random()),s?new Date(s).getTime()?(this.input.val((0,a.default)(s,this.defaultFormat)),this.currentDate=new Date(s)):(this.input.val(s),this.currentDate=(0,r.default)(s,this.defaultFormat)):this.currentDate=new Date(s||this.input.val()).getTime()?new Date(s||this.input.val()):new Date,this.endDate&&this.endDate.getTime()<this.currentDate.getTime()?this.currentDate=new Date(this.endDate):this.startDate&&this.startDate.getTime()>this.currentDate.getTime()&&(this.currentDate=new Date(this.startDate)),this.currentYear=this.currentDate.getFullYear(),this.currentMonth=this.currentDate.getMonth()+1,this.currentDay=this.currentDate.getDate(),this.dropUp=m,this.outer=null,this._init()}return i(t,[{key:"_getDays",value:function(t,e){var n=(0,s.default)(t,e)||7,i=(0,o.default)(t,e),r=(0,o.default)(t,e-1),d=this.defaultDate.getDate(),l=void 0,u=void 0;this.startDate&&(0,a.default)(this.startDate,"yyyy/MM")===(0,a.default)(t+"/"+e,"yyyy/MM")&&(l=!0),this.endDate&&(0,a.default)(this.endDate,"yyyy/MM")===(0,a.default)(t+"/"+e,"yyyy/MM")&&(u=!0);for(var f=[],h=0;h<n-1;h++)f.unshift({day:r-h,type:"prev",disabled:l});for(var p=0;p<i;p++){var m=void 0;m=!(!l&&!u)&&(l&&!u?p+1<this.startDate.getDate():!l&&u?p+1>this.endDate.getDate():p+1<this.startDate.getDate()||p+1>this.endDate.getDate()),f.push({day:p+1,type:"now",disabled:m})}for(var v=0;v<42-n-i+1;v++)f.push({day:v+1,type:"next",disabled:u});var g=(0,c.default)(f,7),y=g.findIndex(function(t){return"now"===t[0].type&&t[0].day<=d&&t[0].day+7>d});return y>-1&&this.defaultDate.getFullYear()===this.currentYear&&this.defaultDate.getMonth()+1===this.currentMonth&&(g[y][0].currentWeek=!0),{days:g,startF:l,endF:u}}},{key:"_init",value:function(){this._renderHtml()}},{key:"setData",value:function(t){new Date((0,r.default)(t,this.defaultFormat)).getTime()&&(this.currentDate=new Date((0,r.default)(t,this.defaultFormat)),this.currentYear=this.currentDate.getFullYear(),this.currentMonth=this.currentDate.getMonth()+1,this.currentDay=this.currentDate.getDate()),this.input.val(t),this.onDateChange(t)}},{key:"_getYearTable",value:function(t){var e=t.yearArr,n=t.sy,i=t.ey;return'<table class="data-picker-table">\n                    <thead>\n                    <tr>\n                        <th class="go-btn go-prev-10year'+(this.startDate&&this.startDate.getFullYear()>n+1?" disabled":"")+'"><i class="fa fa-arrow-left"></i></th>\n                        <th colSpan="5" style="cursor: default" class="switch">'+(n+1)+"-"+(i-1)+'</th>\n                        <th class="go-btn go-next-10year'+(this.endDate&&this.endDate.getFullYear()<i-1?" disabled":"")+'"><i class="fa fa-arrow-right"></i></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr><td colspan="7">'+e.map(function(t){return'<span class="year'+(t.active?" active":"")+(t.disabled?" disabled":"")+'">'+t.year+"</span>"}).join("")+'</td></tr>\n                    </tbody>\n                    <tfoot>\n                    <tr><th colSpan="7" class="today-btn'+(this.todayDisabled?" disabled":"")+'">'+u[this.type]+"</th></tr>\n                    </tfoot>\n                </table>"}},{key:"reset",value:function(){this.input.val(""),this.onDateChange("")}},{key:"_renderYearTable",value:function(t){var e=this,n=10*(Math.ceil(t/10)-1)-1,i=n+11,a=new Array(12).join(",").split(",").map(function(t,i){return{year:n+i,active:n+i===e.currentYear,disabled:e.startDate&&n+i<e.startDate.getFullYear()||e.endDate&&n+i>e.endDate.getFullYear()}});this.picker.find(".year-table-c").html(this._getYearTable({yearArr:a,sy:n,ey:i}))}},{key:"_getMonthTable",value:function(){var t=this;return'<table class="data-picker-table">\n                    <thead>\n                    <tr>\n                        <th class="go-btn go-prev-year"><i class="fa fa-arrow-left"></i></th>\n                        <th colSpan="5" class="switch">'+this.currentYear+'年</th>\n                        <th class="go-btn go-next-year"><i class="fa fa-arrow-right"></i></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr><td colspan="7">\n                    '+new Array(12).join(",").split(",").map(function(e,n){return'<span class="month'+(t.currentMonth===n+1?" active":"")+'">'+(n+1)+"月</span>"}).join("")+'\n                    </td></tr>\n                    </tbody>\n                    <tfoot>\n                    <tr><th colSpan="7" class="today-btn'+(this.todayDisabled?" disabled":"")+'">'+u[this.type]+"</th></tr>\n                    </tfoot>\n                </table>"}},{key:"_getDayTable",value:function(){var t=this,e=this._getDays(this.currentYear,this.currentMonth),n=e.days,i=e.startF,a=e.endF;return'<table class="data-picker-table'+(4===this.type?" week":"")+'">\n                    <thead>\n                    <tr>\n                        <th class="go-btn go-prev-month'+(i?" disabled":"")+'"><i class="fa fa-arrow-left"></i></th>\n                        <th colSpan="5" class="switch">'+this.currentYear+"年"+this.currentMonth+'月</th>\n                        <th class="go-btn go-next-month'+(a?" disabled":"")+'"><i class="fa fa-arrow-right"></i></th>\n                    </tr>\n                    <tr>\n                    '+l.map(function(t){return"<th>"+t+"</th>"}).join("")+"\n                    </tr>\n                    </thead>\n                    <tbody>\n                    "+n.map(function(e){return'<tr class="'+(e.some(function(t){return!t.disabled})?"":"disabled")+(e[0].currentWeek?"current-week":"")+'">'+e.map(function(e){return'<td class="day '+e.type+(e.day===t.currentDay?" today":"")+(e.disabled?" disabled":"")+'">'+e.day+"</td>"}).join("")+"</tr>"}).join("")+'\n                    </tbody>\n                    <tfoot>\n                    <tr><th colSpan="7" class="today-btn'+(this.todayDisabled?" disabled":"")+'">'+u[this.type]+"</th></tr>\n                    </tfoot>\n                </table>"}},{key:"_renderDayTable",value:function(t){var e=this.currentDate;switch(t){case"prev":e.setMonth(this.currentMonth-2);break;case"next":e.setMonth(this.currentMonth)}this.currentDate=e,this.currentYear=this.currentDate.getFullYear(),this.currentMonth=this.currentDate.getMonth()+1,this.currentDay=this.currentDate.getDate(),this.picker.find(".day-table-c").html(this._getDayTable())}},{key:"_getHtml",value:function(){return'<div id="'+this.id+'" class="data-picker-container'+(this.dropUp?" drop-up":"")+'">\n                    <div class="data-picker-days year-table-c '+(1===this.type?"table-show":"")+'"></div>\n                    <div class="data-picker-days month-table-c '+(2===this.type?"table-show":"")+'">'+this._getMonthTable()+'</div>\n                    <div class="data-picker-days day-table-c '+(this.type>2?"table-show":"")+'"></div>\n                </div>'}},{key:"_renderHtml",value:function(){0===$("#"+this.id).length&&($("body").append(this._getHtml()),this.input.closest(".datepicker-input-c").length||this.input.wrap('<div id="'+this.id+'Input" class="datepicker-input-c"></div>').after('<i class="fa fa-calendar"></i><i class="fa fa-times"></i>'),this.picker=$("#"+this.id),this.outer=$("#"+this.id+"Input"),this._bindEvent())}},{key:"pickerShow",value:function(){if(this.defaultDate=new Date(this.currentDate),this._switchTable(this.type-1),this.dropUp){var t=this.input.offset(),e=t.left,n=t.top-this.picker.height()-20;this.picker.css({left:e,top:n}).fadeIn(200)}else{var i=this.input.offset(),a=i.left,r=i.top+this.input[0].clientHeight;this.picker.css({left:a,top:r}).fadeIn(200)}this.outer.find(".fa-calendar").hide(),this.outer.find(".fa-times").toggle(this.canClose)}},{key:"pickerHide",value:function(){this.picker.fadeOut(200),this.outer.find(".fa-calendar").show(),this.outer.find(".fa-times").hide()}},{key:"_setFinDate",value:function(t,e,n,i){var r=new Date(t+"/"+e+"/"+n);switch(i){case"prev":r.setMonth(e-2);break;case"next":r.setMonth(e)}this.currentDate=r,this.currentYear=this.currentDate.getFullYear(),this.currentMonth=this.currentDate.getMonth()+1,this.currentDay=this.currentDate.getDate();var o=(0,a.default)(r,this.defaultFormat);if(4===this.type){var c=7-((0,s.default)(this.currentYear,this.currentMonth)||7)+2,d=Math.floor((this.currentDay-c)/7)+1;this.input.val(o+" 第"+d+"周"),this.onDateChange({start:this.currentDate,end:new Date(this.currentDate).setDate(this.currentDay+6),weekNumber:d})}else this.input.val(o),this.onDateChange(o);this.pickerHide()}},{key:"_switchTable",value:function(t){switch(t){case 0:this._renderYearTable(this.currentYear);break;case 1:var e=!!this.startDate&&this.startDate.getFullYear()==this.currentYear,n=!!this.endDate&&this.endDate.getFullYear()==this.currentYear,i=this;this.picker.find(".month").each(function(){$(this).toggleClass("disabled",e&&$(this).index()<i.startDate.getMonth()||n&&$(this).index()>i.endDate.getMonth())}).eq(this.currentMonth-1).addClass("active").siblings().removeClass("active"),this.picker.find(".month-table-c .switch").text(this.currentYear+"年"),this.picker.find(".go-prev-year").toggleClass("disabled",e),this.picker.find(".go-next-year").toggleClass("disabled",n);break;case 2:case 3:this._renderDayTable()}this.picker.find(".data-picker-days").eq(t).addClass("table-show").siblings().removeClass("table-show")}},{key:"_formatADate",value:function(t){var e=new Date(t);e=e.getTime()?e:new Date;return(!this.startDate||this.startDate.getTime()<e.getTime())&&(!this.endDate||this.endDate.getTime()>e.getTime())?new Date(e):!this.startDate||this.startDate.getTime()<e.getTime()?new Date(this.endDate):new Date(this.startDate)}},{key:"setStartDate",value:function(t){return this.startDate=t?new Date(t):null,this.todayDisabled=this.startDate&&this.startDate.getTime()>Date.now()||this.endDate&&this.endDate.getTime()+864e5<Date.now(),this.startDate&&this.currentDate<this.startDate&&(this.currentDate=new Date(this.startDate)),this}},{key:"setEndDate",value:function(t){this.endDate=t?new Date(t):null,this.todayDisabled=this.startDate&&this.startDate.getTime()>Date.now()||this.endDate&&this.endDate.getTime()+864e5<Date.now(),this.endDate&&this.currentDate>this.endDate&&(this.currentDate=new Date(this.endDate))}},{key:"_bindEvent",value:function(){var t=this,e=this;this.outer.on("click",function(){t.input[0].disabled||t.pickerShow()}).on("keyup",function(){t.currentDate=t._formatADate(t.input.val()),t._switchTable(t.type-1)}).on("keydown",function(){t.keyPress=!0}).on("click",".fa-calendar",function(){t.input[0].disabled||t.input.focus()}).on("click",".fa-times",function(t){t.stopPropagation(),e.reset(),e.pickerHide()}),this.picker.on("click",".data-picker-table:not(.week) .day:not(.disabled)",function(){var t=$(this),n=t.text();t.hasClass("prev")?e._setFinDate(e.currentYear,e.currentMonth,n,"prev"):t.hasClass("next")?e._setFinDate(e.currentYear,e.currentMonth,n,"next"):e._setFinDate(e.currentYear,e.currentMonth,n,"now")}).on("click",".go-prev-month:not(.disabled)",function(){e._renderDayTable("prev")}).on("click",".go-next-month:not(.disabled)",function(){e._renderDayTable("next")}).on("click",".today-btn:not(.disabled)",function(){var t=new Date;if(4===e.type){var n=t.getDay()||7;t.setDate(t.getDate()-n+1)}e._setFinDate(t.getFullYear(),t.getMonth()+1,t.getDate(),"now")}).on("click",".day-table-c .switch",function(){e._switchTable(1)}).on("click",".month:not(.disabled)",function(){if(e.currentDate.setMonth($(this).index()),2===e.type)return e.currentMonth=e.currentDate.getMonth()+1,e._setFinDate(e.currentYear,e.currentMonth,1,"now");e._switchTable(2)}).on("click",".go-prev-year:not(.disabled)",function(){e.currentYear--,e.currentDate=new Date(e.currentYear+"/"+e.currentMonth+"/"+e.currentDay),e._switchTable(1)}).on("click",".go-next-year:not(.disabled)",function(){e.currentYear++,e.currentDate=new Date(e.currentYear+"/"+e.currentMonth+"/"+e.currentDay),e._switchTable(1)}).on("click",".month-table-c .switch",function(){e._switchTable(0)}).on("click",".go-prev-10year:not(.disabled)",function(){var t=$(this).next().text().split("-")[0];e._renderYearTable(t)}).on("click",".go-next-10year:not(.disabled)",function(){var t=$(this).prev().text().split("-")[1]-0+10;e._renderYearTable(t)}).on("click",".year:not(.disabled)",function(){var t=$(this).text();if(e.currentDate.setFullYear(t),e.currentYear=t,1===e.type)return e._setFinDate(e.currentYear,1,1,"now");e._switchTable(1)}).on("click",".week tbody tr:not(.disabled)",function(){var t="now",n=$(this).find("td").eq(0);t=n.hasClass("now")?"now":n.hasClass("prev")?"prev":"next",e._setFinDate(e.currentYear,e.currentMonth,n.text(),t)}),$(document).on("mousedown",function(t){if(1!==$(t.target).closest("#"+e.id).length&&1!==$(t.target).closest("#"+e.id+"Input").length){if(e.keyPress&&e.input.val()){var n=(0,a.default)(e.currentDate,e.defaultFormat);e.input.val(n),e.onDateChange(n)}e.pickerHide(),e.keyPress=!1}})}}]),t}();e.default=f},oD2C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("3bWo"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(){return'<div class="login-outer" id="loginPage">\n    <div class="login-section">\n        <div class="login-logo flexbox aic jcc">\n            <img src="'+r.default+'" /><div class="logo-text">商品库管理后台</div>\n        </div>\n        <div class="login-form-c">\n            <div class="input-group input-group-lg" style="margin-bottom: 20px">\n                <span class="input-group-addon" style="background-color: #fff"><i class="fa fa-fw fa-users"></i></span>\n                <div class="input-group-addon role-select" style="background-color: #fff;width: 100%;border-left: 1px solid #ccc;padding: 0"></div>\n            </div>\n            <div class="input-group input-group-lg" style="margin-bottom: 20px">\n                <span class="input-group-addon" style="background-color: #fff"><i class="fa fa-fw fa-user-o"></i></span>\n                <input type="text" style="font-size: 14px" name="username" class="form-control" placeholder="用户名">\n            </div>\n            <div class="input-group input-group-lg" style="margin-bottom: 20px">\n                <span class="input-group-addon" style="background-color: #fff"><i class="fa fa-fw fa-key"></i></span>\n                <input type="password" style="font-size: 14px" name="password" class="form-control" placeholder="密码">\n            </div>\n            <div class="input-group input-group-lg" style="margin-bottom: 30px">\n                <span class="input-group-addon" style="background-color: #fff"><i class="fa fa-fw fa-expeditedssl"></i></span>\n                <input type="text" style="font-size: 14px" name="verifyCode" class="form-control" placeholder="验证码">\n                <span class="input-group-addon" style="background-color: #fff;padding: 0"><img id="vercodeImg" style="height: 100%"></span>\n            </div>\n        </div>\n        <button class="btn btn-main login-btn btn-lg" style="width: 100%;letter-spacing: 20px">登陆</button>\n    </div>\n</div>'}},pT4b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("0iPh"),r=(i=a)&&i.__esModule?i:{default:i};n("X4PT");e.default=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.show=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.imgs=t,e.activeIndex=n,e._renderImgs(),e.outer.show(),(0,r.default)("body").addClass("static-body"),e.ow=e.imgC.width(),e.oh=e.imgC.height()},this.hide=function(){e.outer.hide(),(0,r.default)("body").removeClass("static-body")},this._renderImgs=function(){var t=e.imgs[e.activeIndex-1],n=e.imgs[e.activeIndex],i=e.imgs[e.activeIndex+1];e.imgC.html([t,n,i].map(function(t,n){if(t&&1===n){var i=new Image;i.src=t,i.onload=function(){var t=i.width,a=i.height,r=t,o=a,s=t/a,c=e.ow/e.oh;t>e.ow?s>c?(r=e.ow,o=e.oh*c/s):(o=e.oh,r=e.ow*s/c):a>e.oh&&(s>c?(r=e.ow,o=e.oh*c/s):(o=e.oh,r=e.ow*s/c)),e.imgC.find(".img"+(n+1)).data({width:t,height:a}).css({width:r+"px",height:o+"px",display:"block",transform:"translateX(0)"})}}else if(t&&2===n){var a=new Image;a.src=t,a.onload=function(){e.imgC.find(".img"+(n+1)).data({width:a.width,height:a.height}).css({width:"100px",height:"70px",display:"block",transform:"translateX("+(e.ow/2+60)+"px)"})}}else if(t&&0===n){var r=new Image;r.src=t,r.onload=function(){e.imgC.find(".img"+(n+1)).data({width:r.width,height:r.height}).css({width:"100px",height:"70px",display:"block",transform:"translateX(-"+(e.ow/2+60)+"px)"})}}return t?'<img src="'+t+'" class="img'+(n+1)+'" />':""})),e.leftBtn.toggle(!!t),e.rightBtn.toggle(!!i)},this._bindEvent=function(){var t=e;(0,r.default)("body").on("keydown",function(e){27===e.keyCode&&t.hide()}),e.outer.on("click",".turn-right-btn",function(){t.activeIndex++,t.imgC.find(".img1").remove(),t.imgC.find(".img2").css({width:"100px",height:"70px",display:"block",transform:"translateX(-"+(t.ow/2+60)+"px)"}).removeClass("img2").addClass("img1"),t.leftBtn.show();var e=t.imgC.find(".img3"),n=e.data("width"),i=e.data("height"),a=n,r=i,o=n/i,s=t.ow/t.oh;n>t.ow?o>s?(a=t.ow,r=t.oh*s/o):(r=t.oh,a=t.ow*o/s):i>t.oh&&(o>s?(a=t.ow,r=t.oh*s/o):(r=t.oh,a=t.ow*o/s)),e.removeClass("img3").addClass("img2").css({width:a+"px",height:r+"px",display:"block",transform:"translateX(0)"});var c=t.imgs[t.activeIndex+1];if(c){t.imgC.append('<img src="'+c+'" class="img3" />');var d=new Image;d.src=c,d.onload=function(){t.imgC.find(".img3").data({width:d.width,height:d.height}).css({width:"100px",height:"70px",display:"block",transform:"translateX("+(t.ow/2+60)+"px)"})}}else t.rightBtn.hide()}).on("click",".turn-left-btn",function(){t.activeIndex--,t.imgC.find(".img3").remove(),t.imgC.find(".img2").css({width:"100px",height:"70px",display:"block",transform:"translateX("+(t.ow/2+60)+"px)"}).removeClass("img2").addClass("img3"),t.rightBtn.show();var e=t.imgC.find(".img1"),n=e.data("width"),i=e.data("height"),a=n,r=i,o=n/i,s=t.ow/t.oh;n>t.ow?o>s?(a=t.ow,r=t.oh*s/o):(r=t.oh,a=t.ow*o/s):i>t.oh&&(o>s?(a=t.ow,r=t.oh*s/o):(r=t.oh,a=t.ow*o/s)),e.removeClass("img1").addClass("img2").css({width:a+"px",height:r+"px",display:"block",transform:"translateX(0)"});var c=t.imgs[t.activeIndex-1];if(c){t.imgC.append('<img src="'+c+'" class="img1" />');var d=new Image;d.src=c,d.onload=function(){t.imgC.find(".img1").data({width:d.width,height:d.height}).css({width:"100px",height:"70px",display:"block",transform:"translateX(-"+(t.ow/2+60)+"px)"})}}else t.leftBtn.hide()}).on("click",".i-close-btn",function(){t.hide()})},this._renderHtml=function(){(0,r.default)("#"+e.id).length||(0,r.default)("body").append(e._getHtml()),e.outer=(0,r.default)("#"+e.id),e.imgC=e.outer.find(".img-outer"),e.leftBtn=e.outer.find(".turn-left-btn"),e.rightBtn=e.outer.find(".turn-right-btn")},this._getHtml=function(){return'<div id="'+e.id+'" class="muti-img-viewer-outer">\n    <div class="i-close-btn"><i class="fa fa-times-circle-o"></i></div>\n    <div class="img-c">\n        <div class="turn-left-btn">上一张</div>\n        <div class="turn-right-btn">下一张</div>\n        <div class="img-outer"></div>\n    </div>\n</div>'},this._init=function(){e._renderHtml(),e._bindEvent()},this.id="mutiImgViewer"+Math.ceil(1e11*Math.random()),this._init()}},qiY8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=d(n("0iPh")),o=d(n("RYhR")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("tMb8")),c=d(n("Z2H6"));function d(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){var n=this,i=e.controller,a=e.data,o=void 0===a?{}:a,s=e.onChange,c=void 0===s?function(){}:s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!i)throw new Error("YsModel param controller can not be undefined");if(this.outer=(0,r.default)('[ys-controller="'+i+'"]'),1!==this.outer.length)throw new Error("YsModel param controller is invalid");if("function"!=typeof c)throw new Error("YsModel param onChange must be a function");this.onChange=c,this.modelDoms={},[].forEach.call(this.outer.find("[ys-model]"),function(t){var e=(0,r.default)(t),i=e.attr("ys-model");n.modelDoms[i]=n.modelDoms[i]?n.modelDoms[i].add(e):e}),this.bindDoms={},[].forEach.call(this.outer.find("[ys-bind]"),function(t){var e=(0,r.default)(t),i=e.attr("ys-bind");n.bindDoms[i]=n.bindDoms[i]?n.bindDoms[i].add(e):e}),this.data=o,this._init()}return a(t,[{key:"_bindEvent",value:function(){var t=this,e=function(e){t.modelDoms.hasOwnProperty(e)&&(t.modelDoms[e].on("keyup",function(){var n=i({},t.data);n[e]=t.modelDoms[e].val(),t.setData(n),t.onChange(t.data)}).on("change",function(){var n=i({},t.data);n[e]=t.modelDoms[e].val(),t.setData(n),t.onChange(t.data)}),"number"===t.modelDoms[e].data("valid")&&t.modelDoms[e].on("change",function(){s.isNumber(t.modelDoms[e].val())||(t.modelDoms[e].val(""),t.data[e]="",t.onChange(t.data),(0,c.default)({obj:t.modelDoms[e],msg:"仅允许输入数字"}))}))};for(var n in this.modelDoms)e(n)}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var e in t)t.hasOwnProperty(e)&&t[e]!==this.data[e]&&(this.modelDoms[e]&&this.modelDoms[e].val((0,o.default)(t[e])),this.bindDoms[e]&&this.bindDoms[e].text((0,o.default)(t[e],this.bindDoms[e].data("placeholder"))));return this.data=r.default.extend(this.data,t),this}},{key:"reset",value:function(){for(var t in this.modelDoms)this.modelDoms.hasOwnProperty(t)&&this.modelDoms[t].val("");for(var e in this.bindDoms)this.bindDoms.hasOwnProperty(e)&&this.bindDoms[e].text((0,o.default)(this.bindDoms[e].data("placeholder")));return this.data={},this}},{key:"getData",value:function(){return this.data}},{key:"_init",value:function(){this._bindEvent(),this.reset()}}]),t}();e.default=l},rYvR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n("0iPh")),r=s(n("hPQL"));n("Fgvl");var o=s(n("9vu6"));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){var n=this,i=e.input,r=e.getData,s=void 0===r?function(){}:r,c=e.delay,d=void 0===c?500:c,l=e.renderLi,u=e.formatList,f=e.onSelect,h=void 0===f?function(){}:f,p=e.emptyMsg,m=void 0===p?"没有匹配的结果":p,v=e.keyTigger,g=void 0===v||v;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderLoading=function(){n.outer.html('<div class="ys-auto-complete-loading">'+(0,o.default)("small")+" 正在为您拼命搜索中...</div>"),n._adjustPosition()},!(i instanceof a.default)||i instanceof a.default&&1!==i.length||"INPUT"!==i[0].tagName)throw new TypeError("AutoComplete param input must be a input jquery dom");if(this.input=i,"function"!=typeof s)throw new TypeError("AutoComplete param getData must be a function");if(this.getData=s,this.delay=d,"function"!=typeof l)throw new TypeError("AutoComplete param renderLi must be a function");if(this.renderLi=l,"function"!=typeof u)throw new TypeError("AutoComplete param formatList must be a function");if(this.formatList=u,"function"!=typeof h)throw new TypeError("AutoComplete param onSelect must be a function");this.onSelect=h,this.emptyMsg=m,this.keyTigger=g,this.id="AutoComplete"+Math.ceil(1e6*Math.random()),this._init()}return i(t,[{key:"_bindEvent",value:function(){var t=this,e=this;(0,a.default)(document).on("mousedown",function(e){1!==(0,a.default)(e.target).closest("#"+t.id).length&&1!==(0,a.default)(e.target).closest(t.input).length&&t._closeComplete()}),this.input.on("focus",function(){t.input.val()&&t.autoSearch.triggerSearch()}).on("keydown",function(e){if(t.outer&&t.outer.length){var n=t.outer.find(".ys-auto-complete-item");if(!n.length)return;switch(e.which){case 40:var i=(t.outer.find(".ys-auto-complete-item.active").index()+1)%n.length;n.eq(i).addClass("active").siblings().removeClass("active"),t._selectLi(i,t.keyTigger);break;case 38:var a=t.outer.find(".ys-auto-complete-item.active").index();-1===a&&(a=n.length);var r=(a-1)%n.length;-1===r&&(r=4),n.eq(r).addClass("active").siblings().removeClass("active"),t._selectLi(r,t.keyTigger);break;case 13:var o=t.outer.find(".ys-auto-complete-item.active").index();!t.keyTigger&&t._selectLi(o),-1!==o&&t._closeComplete()}}}),this.outer.on("click",".ys-auto-complete-item",function(){var t=(0,a.default)(this).index();e._selectLi(t),e._closeComplete()})}},{key:"_selectLi",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.input.val(this.renderLi(this.list[t])),e&&this.onSelect(this.list[t])}},{key:"_renderHtml",value:function(){(0,a.default)("#"+this.id).length||(0,a.default)("body").append(this._getOuterHtml()),this.outer=(0,a.default)("#"+this.id)}},{key:"_renderList",value:function(){this.outer.html(this._getHtml()),this._adjustPosition()}},{key:"_adjustPosition",value:function(){var t=this.input.offset(),e=t.top,n=t.left,i=this.input[0].clientHeight,a=this.input[0].clientWidth;this.outer.css({width:a-4,top:e+i+5,left:n+2}).show()}},{key:"_getOuterHtml",value:function(){return'<div class="ys-auto-complete-outer" id="'+this.id+'"></div>'}},{key:"_getHtml",value:function(){var t=this;return this.list.length?this.list.map(function(e){return'<div class="ys-auto-complete-item"><a href="javascript:void(0)">'+t.renderLi(e)+"</a></div>"}):this._getEmptyHtml()}},{key:"_getEmptyHtml",value:function(){return'<div class="ys-auto-complete-empty">'+this.emptyMsg+"</div>"}},{key:"_closeComplete",value:function(){this.outer.hide()}},{key:"_init",value:function(){var t=this;this.autoSearch=new r.default({input:this.input,delay:this.delay,fn:function(e){if(!e)return t._closeComplete();t._renderLoading();var n=t.getData(e);if(!n||"function"!=typeof n.then)throw new TypeError("AutoComplete param getData must return a Promise obj at least contain then method");n.then(function(e){t.list=t.formatList(e),t._renderList()})}}),this._renderHtml(),this._bindEvent()}}]),t}();e.default=c},ryJ0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=g(n("YUB/")),r=g(n("7D5N")),o=g(n("RfmY")),s=g(n("hPQL")),c=g(n("RYhR")),d=(g(n("1WMk")),g(n("THgg"))),l=g(n("gntN")),u=g(n("/krT")),f=g(n("eI+r")),h=n("/1Qr"),p=n("z+yy"),m=g(p),v=g(n("alhc"));function g(t){return t&&t.__esModule?t:{default:t}}var y=10,b=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){m.default.getChannelManagerPromise||(m.default.getChannelManagerPromise=(0,p.getChannelManagerList)()),t._getList(1)},t._addOrEdit=function(e){(0,d.default)({url:"channel/"+(e.id?"modify":"add"),type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i({},e,{ts:Date.now()})),success:function(n){n.success?(t.modal.modalHide(),(0,f.default)({type:"success",title:(e.id?"编辑":"添加")+"渠道成功",msg:"已成功"+(e.id?"编辑":"添加")+"渠道："+e.name}),t._getList(1,"refresh")):(0,l.default)({msg:e.errorMsg||"渠道"+(e.id?"编辑":"添加")+"失败，请重试！"})}})},t._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments[1];"search"===n&&(e=1),"refresh"===n&&(e=t.table.getPagination().current),"delete"===n&&(e=t.table.getPagination().current,1===t.table.getDataSource().length&&e--,e=e||1),(0,d.default)({url:"channel/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify(i({searchPage:{pageIndex:e-1,pageSize:y}},t.condition,{ts:Date.now()})),success:function(i){if(i.success&&i.data&&i.data.searchPage){var a=i.data.searchPage.pageData||[];t.table.setData({dataSource:a,pagination:{current:e,total:i.data.searchPage.totalRecord},conditionChange:!!n})}else t.table.setData({dataSource:[]})}})},t._bindEvent=function(){var e=t;t.pager.on("click",".add-channel",function(){e.modal.setData({fn:function(t){e._addOrEdit(t)}}).modalShow()}).on("click",".edit-item",function(){var t=e.table.getRowData($(this).data("index"));e.modal.setData({type:"edit",data:t,fn:function(n){e._addOrEdit(i({id:t.id},n))}}).modalShow()})},t._initComponent=function(){t.table=new o.default({outer:t.pager.find(".channel-table"),headers:[{name:"序号",width:60},{name:"渠道编码",width:120},{name:"渠道名称",width:100},{name:"联络人",width:90},{name:"电话",width:100},{name:"邮箱",width:120},{name:"QQ",width:90},{name:"微信",width:100},{name:"地址",width:150},{name:"操作",width:80}],renderTrs:[function(t,e,n){return n.pageSize*(n.current-1)+(e+1)},function(t){return(0,c.default)(t.channelNo)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.name)+"</td>"}},function(t){return(0,c.default)(t.contactorName)},function(t){return(0,c.default)(t.contactorPhone)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.contactorEmail)+"</td>"}},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.contactorQq)+"</td>"}},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.contactorWechat)+"</td>"}},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,c.default)(t.contactorAddress)+"</td>"}},function(t,e){return'<a data-index="'+e+'" class="btn btn-link edit-item" style="margin-right: 20px"><i class="fa fa-pencil-square-o"></i>编辑</a>'}],pagination:{pageSize:y,show:!0,current:1,onChange:function(e){var n=e.current;t._getList(n)},isJump:!0},emptyMsg:"没有符合条件的渠道信息"}),new s.default({input:t.pager.find('input[name="channelName"]'),fn:function(e){t.condition.channelName=e,t._getList(1,"search")}}),new s.default({input:t.pager.find('input[name="contactorName"]'),fn:function(e){t.condition.contactorName=e,t._getList(1,"search")}}),t.jlSelect=new u.default({obj:t.pager.find(".jl-select"),renderLi:function(t){return t.name},onSelectChange:function(e){t.condition.channelManagerId=e?e.id:"",t._getList(1,"search")},list:m.default.channelManagerDic||[],hasReset:!0,placeholder:"不限"}),h.emitter.on("channelManagerChange",function(e){t.jlSelect.renderList(e)}),t.modal=new v.default({})},t.id="channelPage",t.docTitle="渠道管理",t.html=a.default,t.condition={channelName:"",contactorName:"",channelManagerId:""},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),e}();e.default=b},sH5r:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=s(n("CWZd")),r=s(n("0iPh")),o=s(n("gntN"));function s(t){return t&&t.__esModule?t:{default:t}}var c="resetPsdModal",d=function(t){function e(t){var n=t.title,i=void 0===n?"重置密码":n,a=t.confirmFn,r=void 0===a?function(){}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(s.setData=function(t){var e=t.fn;return s.setConfirmFn(e),s._reset(),s},s._reset=function(){s.modal.find('input[name="password"]').val(""),s.modal.find('input[name="password2"]').val(""),s.data={}},s._checkData=function(){return s.data.password=s.modal.find('input[name="password"]').val().trim(),s.data.password?(s.data.password2=s.modal.find('input[name="password2"]').val().trim(),s.data.password2?s.data.password===s.data.password2||((0,o.default)({msg:"两次输入密码不一致"}),!1):((0,o.default)({msg:"请再次输入新密码"}),!1)):((0,o.default)({msg:"请输入新密码"}),!1)},s.title=i,s.id=c,s.confirmFn=r,"function"!=typeof s.confirmFn)throw new Error("AccountModal param confirmFn must be a function");return s.data={},s._init(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"_renderHtml",value:function(){(0,r.default)("#"+this.id).length||(0,r.default)("body").append(this.getBasicHtml({id:this.id,title:this.title,body:this._getBodyHtml(),contentStyle:"top:100px;width: 400px;left:100px"})),this.modal=(0,r.default)("#"+this.id)}},{key:"_getBodyHtml",value:function(){return'<div style="padding: 0 20px">\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">输入新密码：</div>\n            <div class="modal-c-i-c"><input name="password" type="password" placeholder="新密码" /></div>\n        </div>\n    </div>\n    <div class="modal-c-i-o">\n        <div class="modal-c-i">\n            <div class="modal-c-i-t is-must">确认新密码：</div>\n            <div class="modal-c-i-c"><input name="password2" type="password" placeholder="确认新密码" /></div>\n        </div>\n    </div>\n</div>'}},{key:"_bindEvent",value:function(){var t=this;this.modal.on("click",".confirm-btn",function(){t._checkData()&&t.confirmFn(t.data)})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),e}();e.default=d},tMb8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkTelPhone=e.checkPhone=e.isPosInteger=e.isNumber=void 0;var i,a=n("jDxm"),r=(i=a)&&i.__esModule?i:{default:i};e.isNumber=function(t){return null!==t&&void 0!==t&&Math.abs(t)!==1/0&&!isNaN(parseFloat(t-0))},e.isPosInteger=function(t){return 0!==(t-=0)&&/^[0-9]+$/.test(t)},e.checkPhone=r.default,e.checkTelPhone=function(t){return/^(0\d{2,3}(-|\s|)\d{7,8})$/.test(t)}},tU91:function(t,e){},tt8r:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(){function t(e){var n=e.navs,i=e.router;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.navs=n,this.router=i,this._init()}return i(t,[{key:"_renderHtml",value:function(){}},{key:"_bindEvent",value:function(){var t=this;this.navs.on("click",function(){var e=$(this).attr("href");if(e)return t.navs.removeClass("active"),$(this).addClass("active"),t.router.replace({url:e}),!1})}},{key:"_init",value:function(){this._renderHtml(),this._bindEvent()}}]),t}();e.default=a},uyis:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("9vu6"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="content-container condition-outer">\n    <div class="flexbox aic">\n        <div class="section-title">类目管理</div>\n        <div class="c-i-c" style="width: 400px;margin-left: 20px">\n            <div class="c-i-t">类目名称：</div>\n            <div class="c-i-d">\n                <input class="form-control keyword-c" type="text" placeholder="请输入类目名称" />\n            </div>\n        </div>\n        <div class="flex1"></div>\n        <button class="btn btn-ys-default add-category"><i class="fa fa-plus-circle"></i>添加类目</button>\n    </div>\n</div>\n<div class="content-container" style="margin-top: 10px;padding: 20px">\n    <div class="common-table-outer">\n        <table class="ys-table category-table">\n            <thead>\n                <tr><th width="50">序号</th><th width="120">类目名称</th><th width="100">类目编码</th><th width="100">类目图片</th><th width="100">创建时间</th><th width="110">是否APP首页显示</th><th width="120">操作</th></tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n        <div class="empty-c no-msg-item">没有匹配的类目</div>\n        <div class="loading-c flexbox aic jcc" style="height: 150px">'+(0,r.default)(1)+'</div>\n        <div class="pagination-c" style="margin-top: 20px"></div>\n    </div>\n</div>\n</div>'}},vzCy:function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,c,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),o=(d=n.slice()).length,c=0;c<o;c++)d[c].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(o=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function a(){this.removeListener(t,a),n||(n=!0,e.apply(this,arguments))}return a.listener=e,this.on(t,a),this},n.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},"w4T/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("THgg"),r=(i=a)&&i.__esModule?i:{default:i};var o=function(t){return function(){var e=$.ajaxSettings.xhr();return"function"!=typeof t?e:(t&&e.upload&&e.upload.addEventListener("progress",t,!1),e)}};e.default=function(t){var e=t.fd,n=t.url,i=t.success,a=t.error,s=void 0===a?function(){}:a,c=t.always,d=void 0===c?function(){}:c,l=t.onprogress;if(!n)throw new Error("uploadFile param url is must");if(!e)throw new Error("uploadFile param fd is must");return"function"!=typeof s&&(s=function(){}),"function"!=typeof i&&(i=function(){}),"function"!=typeof d&&(d=function(){}),(0,r.default)({url:n,type:"POST",headers:{Accept:"application/json;charset=UTF-8"},data:e,cache:!1,contentType:!1,processData:!1,xhr:o(l),success:i,error:s}).always(function(){d()})}},"wew/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n("zuNf")),a=f(n("7D5N")),r=f(n("THgg")),o=f(n("RYhR")),s=f(n("gntN")),c=f(n("eI+r")),d=f(n("RfmY")),l=n("/1Qr"),u=n("X0eP");function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._init=function(){t._reset(),t.state.id&&(t._getBasic(),t._getDetail(t.state.id))},t._getBasic=function(){(0,r.default)({url:"product/getBasic/"+t.state.id,type:"post",success:function(e){e.success&&(t.data.productList.push(e.data),t.productTable.setData({dataSource:t.data.productList}))}})},t._reset=function(){t.data={productList:[]},t.productTable.setData({dataSource:[]}),t.editor&&t.editor.setData(l.editerDefault)},t._checkData=function(){return!0},t._getDetail=function(e){t.data.detail||(0,r.default)({url:"product/detail/getByProductId/"+(e||t.data.productList[0].id),type:"post",success:function(e){e.success&&(t.data.detail=e.data.detailInfo,t.editor.setData(t.data.detail))}})},t._bindEvent=function(){var e=t;t.pager.on("click",".ys-back-btn,.cancel-btn",function(){e.data.detail?l.confirmModal.setData({title:"取消编辑",msg:"你有信息未保存，是否返回列表页？",confirmFn:function(){l.confirmModal.modalHide(),e.router.pop()}}).modalShow():e.router.pop()}).on("click",".save-content",function(){var t=e.data.productList.map(function(t){return t.id});if(!t.length)return(0,s.default)({msg:"请至少选择一条商品信息"});var n=e.editor.getData();if(n===l.editerDefault)return(0,s.default)({msg:"请输入详情内容"});(0,r.default)({url:"product/details/addOrModify",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({detailInfo:n,productIdList:t}),success:function(t){t.success?((0,c.default)({title:"编辑成功",msg:"商品详情编辑成功"}),e.router.pop()):(0,s.default)({msg:t.errorMsg||"商品详情编辑失败"})}})}).on("click",".open-product-modal",function(){u.chooseModal.setData({fn:function(t){if(u.chooseModal.modalHide(),e.data.productList.some(function(e){return e.id===t.id}))return(0,s.default)({msg:"该商品已添加到列表中"});e.data.productList.push(t),e.productTable.setData({dataSource:e.data.productList}),e._getDetail()}}).modalShow()}).on("click",".remove-product",function(){var t=$(this).data("index");e.data.productList.splice(t,1),e.productTable.setData({dataSource:e.data.productList})}).on("click",".view-img",function(){var t=e.productTable.getRowData($(this).data("index")),n=t.imagePaths[0]?t.imagePaths[0].split(","):[];n.length&&l.imgViewer.show(n)})},t._initComponent=function(){window.DecoupledEditor.create(document.querySelector("#editor"),{language:"zh-cn",ckfinder:{uploadUrl:"/image/ckeditor/upload"},fontFamily:{options:["默认, default","华文细黑,STXihei,SimHei","华文楷体,STKaiti,KaiTi","华文宋体,STSong,SimSun","华文仿宋,STFangsong,FangSong","苹方,PingFang SC"]}}).then(function(e){document.querySelector("#toolbar-container").appendChild(e.ui.view.toolbar.element),t.editor=e}).catch(function(t){console.error(t)}),t.productTable=new d.default({outer:t.pager.find(".product-table3"),headers:[{name:"序号",width:45},{name:"商品编码",width:90},{name:"商品名称",width:170},{name:"商品图片",width:80},{name:"款式编码",width:80},{name:"品牌",width:90},{name:"类目",width:100},{name:"规格型号",width:80},{name:"尺寸",width:45},{name:"库存",width:45},{name:"操作",width:60}],dataSource:[],renderTrs:[function(t,e){return e+1},function(t){return(0,o.default)(t.productNo)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,o.default)(t.name)+"</td>"}},{renderTd:function(t,e){return'<td style="padding: 0">'+(t.imagePaths.length?'<img class="view-img" data-index="'+e+'" style="width: 32px;height: 32px" src="'+(l.imgPath+t.imagePaths[0].split(",")[0])+'" >':"")+"</td>"}},function(t){return(0,o.default)(t.styleCode)},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,o.default)(t.brand)+"</td>"}},{renderTd:function(t,e){return'<td style="text-align: left;padding-left: 15px">'+(0,o.default)(t.categoryName)+"</td>"}},function(t){return(0,o.default)(t.specification)},function(t){return(0,o.default)(t.size)},{renderTd:function(t,e){return'<td style="text-align: right;padding-right: 15px">'+(0,o.default)(t.storageSize)+"</td>"}},function(t,e){return'<a data-index="'+e+'" class="btn btn-link remove-product">移除</a>'}],renderEmpty:function(){return""}})},t.id="productDetailPage",t.docTitle="商品详情录入",t.html=i.default,t.data={productList:[]},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=h},yaTh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("IdQS")),o=n("0iPh"),s=(i=o)&&i.__esModule?i:{default:i};var c=function(){function t(e){var n=this,i=e.router,a=e.outer;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._jumpToError=function(t,e){n.currentRoute=n.getRouteByName("error"),n.currentRoute.state={code:t},n.history.replaceState({code:t},"",e),n.outer.children().hide(),n.currentRoute.page.init(n.currentRoute,n,"replace",n.outer)},!i)throw new Error("YsRouter must has a router param");this.router=i,this.outer=a,this.history=window.history,this.historySupport="function"==typeof this.history.pushState,this.currentRoute="",this.selfHistory=[],this._init()}return a(t,[{key:"getRouterConfig",value:function(){return this.router}},{key:"push",value:function(t){var e=t.state,n=void 0===e?{}:e,i=t.title,a=void 0===i?"":i,o=t.url,c=void 0===o?"":o,d=t.page;c!==window.basePath+"index.html"&&c!==window.basePath+"index"||(c=window.basePath);var l=void 0;if(d)c=(l=this.getRouteByName(d)).path;else{var u=r.getUrlParams(r.getSearchFromStr(c));n=s.default.extend(n,u),c=c.split("?").shift(),l=this._findRouteByPath(c)}if(!l)return this._jumpToError(404,c);if(l.reject)return this._jumpToError(403,c);this.selfHistory.push(l);var f=r.createSearch(n);if(!this.historySupport)return window.location.href=c+f;this.history.pushState(n,a,c+f),l.state=n,this.currentRoute=l,this.outer.children().hide(),this.currentRoute.page.init(this.currentRoute,this,"push",this.outer)}},{key:"replace",value:function(t){var e=t.state,n=void 0===e?{}:e,i=t.title,a=void 0===i?"":i,o=t.url,c=void 0===o?"":o,d=t.page;c===window.basePath+"index.html"&&(c=window.basePath);var l=void 0;if(d)c=(l=this.getRouteByName(d)).path;else{var u=r.getUrlParams(r.getSearchFromStr(c));n=s.default.extend(n,u),c=c.split("?").shift(),l=this._findRouteByPath(c)}if(!this.historySupport)return window.location.href=l.path;if(!l)return this._jumpToError(404,c);if(l.reject)return this._jumpToError(403,c);var f=r.createSearch(n);this.selfHistory.pop(),this.selfHistory.push(l),this.history.replaceState(n,a,c+f),l.state=n,this.currentRoute=l,this.outer.children().hide(),this.currentRoute.page.init(this.currentRoute,this,"replace",this.outer)}},{key:"pop",value:function(){if(this.selfHistory.length>1)this.history.go(-1),this.selfHistory.pop(),this.currentRoute=this.selfHistory[this.selfHistory.length-1];else{var t=this._findParentRoute(this.currentRoute.path);"function"==typeof t.page.emptyPop?t.page.emptyPop({router:this,route:t,childRoute:this.currentRoute}):this.replace({url:t.path})}}},{key:"getState",value:function(){return this.currentRoute.state}},{key:"getCurrent",value:function(){var t=this;return{route:this.currentRoute,index:this.router.findIndex(function(e){return e.path===t.currentRoute.path})}}},{key:"_init",value:function(){this._bindEvent()}},{key:"getRouteByName",value:function(t){return this.router.find(function(e){return e.name===t})}},{key:"_findRouteByPath",value:function(t){return this.router.find(function(e){return e.path===t})}},{key:"initCurrent",value:function(){var t=window.location.pathname;t===window.basePath+"index.html"&&(t=window.basePath);var e=this._findRouteByPath(t);if(!e)return this._jumpToError(404,t);if(e.reject)return this._jumpToError(403,t);var n=window.location.search;if(this.historySupport){if(!e.state&&n){var i={};return n.substr(1).split("&").forEach(function(t){i[t.split("=")[0]]=t.split("=")[1]}),this.replace({state:i,url:t+n})}return this.replace({state:e.state,url:e.path})}var a={};n.substr(1).split("&").forEach(function(t){a[t.split("=")[0]]=t.split("=")[1]}),e.state=a,this.currentRoute=e,this.currentRoute.page.init(this.currentRoute,this)}},{key:"_findParentRoute",value:function(t){var e=this._findRouteByPath(t);return this.router.find(function(t){return t.name===e.parent})}},{key:"_bindEvent",value:function(){var t=this;window.onpopstate=function(){t.currentRoute=t._findRouteByPath(window.location.pathname),t.currentRoute.state=t.history.state,t.outer.children().hide(),t.currentRoute.page.init(t.currentRoute,t,"pop")}}}]),t}();e.default=c},"z+yy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLabelDic=e.getCategoryDic=e.getChannelManagerList=e.getRoleList=void 0;var i,a=n("THgg"),r=(i=a)&&i.__esModule?i:{default:i},o=n("/1Qr");var s={roleDic:null,channelManagerDic:null,categoryDic:null,labelDic:null};e.getRoleList=function(){return new window.Promise(function(t){(0,r.default)({url:"role/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({pageIndex:0,pageSize:-1}),success:function(e){e.success&&(s.roleDic=e.data.searchPage.pageData||[],t(s.roleDic),o.emitter.emit("roleDicChange",s.roleDic))}})})},e.getChannelManagerList=function(){return new window.Promise(function(t){(0,r.default)({url:"user/listChannelManager",type:"post",success:function(e){s.channelManagerDic=[{name:"不限",id:""}].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e.data||[])),t(s.channelManagerDic),o.emitter.emit("channelManagerChange",s.channelManagerDic)}})})},e.getCategoryDic=function(){return new window.Promise(function(t){(0,r.default)({url:"category/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:0,pageSize:-1},ts:Date.now()}),success:function(e){e.success&&(s.categoryDic=e.data.searchPage.pageData,t(s.categoryDic),o.emitter.emit("categoryDicChange",s.categoryDic))}})})},e.getLabelDic=function(){return new window.Promise(function(t){(0,r.default)({url:"label/list",type:"post",contentType:"application/json;charset=utf-8",data:JSON.stringify({searchPage:{pageIndex:0,pageSize:-1},ts:Date.now()}),success:function(e){e.success&&(s.labelDic=e.data.searchPage.pageData,t(s.labelDic),o.emitter.emit("labelDicChange",s.labelDic))}})})};e.default=s},zuNf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/1Qr");e.default=function(t){return'<div id="'+t.id+'" class="page-outer">\n<div class="ys-back-btn"></div>\n<div class="content-container" style="padding: 20px">\n    <div class="section-title">商品详情录入</div>\n</div>\n<div class="content-container" style="padding: 20px 20px 40px;margin-top: 15px">\n    <button style="margin-bottom: 10px" class="btn btn-ys-default open-product-modal"><i class="fa fa-plus"></i>添加商品</button>\n    <div class="product-table3" style="margin: 10px 0"></div>\n    \x3c!-- The toolbar will be rendered in this container. --\x3e\n    <div id="toolbar-container"></div>\n    \x3c!-- This container will become the editable. --\x3e\n    <div id="editor" style="height: 400px;border: 1px solid #ccc">\n        '+i.editerDefault+'\n    </div>\n    <div class="flexbox aic jcc" style="margin-top: 20px">\n        <button class="btn btn-main save-content" style="margin-right: 20px">保 存</button><button class="btn btn-warning cancel-btn">取 消</button>\n    </div>\n</div>\n</div>'}}});